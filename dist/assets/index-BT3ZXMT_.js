import{R as Tr,j as e,r as d,u as nr,L as zr,N as Rr,O as Br,a as lr,b as it,D as st,c as ot,S as nt,v as Or,d as lt,s as ir,K as dr,P as cr,e as dt,C as ct,f as ut,g as ht,h as xt,i as gt,k as mt,B as Wr,p as pt,l as bt,m as ft,n as Et,o as Hr,q as Ur,t as Vr,w as Gr,x as qe,y as ur,z as _r,A as Yr,E as Jr,F as Kr,G as qr,H as we,I as Zr,J as Qr}from"./vendor-CAE5IhR3.js";import"./preline-Cj2HLzEz.js";const Xr=(function(){const r=typeof document<"u"&&document.createElement("link").relList;return r&&r.supports&&r.supports("modulepreload")?"modulepreload":"preload"})(),ea=function(t){return"/trading/dist/"+t},Gt={},ta=function(r,s,n){let o=Promise.resolve();if(s&&s.length>0){let l=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");o=l(s.map(h=>{if(h=ea(h),h in Gt)return;Gt[h]=!0;const m=h.endsWith(".css"),C=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${C}`))return;const k=document.createElement("link");if(k.rel=m?"stylesheet":Xr,m||(k.as="script"),k.crossOrigin="",k.href=h,c&&k.setAttribute("nonce",c),document.head.appendChild(k),m)return new Promise((P,j)=>{k.addEventListener("load",P),k.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&a(c.reason);return r().catch(a)})};class ra extends Tr.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,s){this.setState({error:r,errorInfo:s})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null});const s=window.location.pathname.startsWith("/trading")?"/trading":"/";window.location.href=s};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or return to the home page."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Home"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Refresh Page"})]}),!1]})}):this.props.children}}function aa(){const[t,r]=d.useState({name:"John Doe",email:"john.doe@example.com",dob:"",phone:"",location:"",bio:""}),[s,n]=d.useState(!1),[o,a]=d.useState(!1),[i,c]=d.useState(t),l=d.useRef(null);d.useEffect(()=>{try{const u=localStorage.getItem("userProfile");if(u){const w=JSON.parse(u);r(w),c(w)}}catch(u){console.error("Error loading user profile:",u)}},[]),d.useEffect(()=>{(t.name!=="John Doe"||t.email!=="john.doe@example.com")&&localStorage.setItem("userProfile",JSON.stringify(t))},[t]),d.useEffect(()=>{const u=N=>{l.current&&!l.current.contains(N.target)&&(a(!1),n(!1))},w=N=>{N.key==="Escape"&&(a(!1),n(!1))};if(o)return document.addEventListener("mousedown",u),document.addEventListener("keydown",w),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",w),document.body.style.overflow=""}},[o]);const h=u=>{if(!u)return"JD";const w=u.trim().split(" ");return w.length>=2?(w[0][0]+w[w.length-1][0]).toUpperCase():u.substring(0,2).toUpperCase()},m=()=>{r(i),n(!1),a(!1)},C=()=>{c(t),n(!1)},k=()=>{a(!1),n(!1),c(t)},P=(u,w)=>{c(N=>({...N,[u]:w}))},j=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-x-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",onClick:()=>{a(!0),n(!1),c(t)},role:"button",tabIndex:0,"aria-label":"User profile",children:[e.jsx("div",{className:"relative inline-flex items-center justify-center w-10 h-10 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-2 ring-gray-300 dark:ring-gray-600",children:e.jsx("span",{className:"font-medium text-white text-sm",children:h(t.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email})]}),e.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]}),o&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",ref:l,children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm",onClick:()=>{a(!1),n(!1)},"aria-hidden":"true"}),e.jsx("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 w-full max-w-md max-h-[90vh] overflow-y-auto z-10 transform transition-all",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Profile"}),e.jsx("button",{type:"button",onClick:k,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Close profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"relative inline-flex items-center justify-center w-20 h-20 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-4 ring-gray-200 dark:ring-gray-700",children:e.jsx("span",{className:"font-bold text-white text-2xl",children:h(i.name)})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:u=>P("name",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:i.email,onChange:u=>P("email",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"your.email@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",value:i.dob,onChange:u=>P("dob",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:i.phone,onChange:u=>P("phone",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:i.location,onChange:u=>P("location",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),e.jsx("textarea",{value:i.bio,onChange:u=>P("bio",u.target.value),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Tell us about yourself..."})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:C,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:m,disabled:!i.name||!i.email,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:"Save Changes"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Profile"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n(!0),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors","aria-label":"Edit profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:k,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Close profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"relative inline-flex items-center justify-center w-20 h-20 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-4 ring-gray-200 dark:ring-gray-700",children:e.jsx("span",{className:"font-bold text-white text-2xl",children:h(t.name)})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.name||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.email||"Not set"})]}),t.dob&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Date of Birth"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:j(t.dob)})]}),t.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.phone})]}),t.location&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Location"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.location})]}),t.bio&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Bio"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:t.bio})]})]})]})]})})]})]})}function hr(t){const r=t.getMonth()+1,s=t.getDate(),n=t.getFullYear(),o=r.toString().split("").reduce((l,h)=>l+parseInt(h),0),a=s.toString().split("").reduce((l,h)=>l+parseInt(h),0),i=n.toString().split("").reduce((l,h)=>l+parseInt(h),0);let c=o+a+i;for(;c>9&&c!==11&&c!==22&&c!==33;)c=c.toString().split("").reduce((l,h)=>l+parseInt(h),0);return c}function xr(t){const r={1:{number:1,title:"New Beginnings",description:"Leadership, initiative, and fresh starts tend to receive more focus. A day for taking action and starting new projects."},2:{number:2,title:"Cooperation",description:"Cooperation, diplomacy, and partnerships tend to receive more focus. A day for collaboration and building relationships."},3:{number:3,title:"Creativity & Communication",description:"Socializing and the arts tend to receive more focus. A day favorable for creative endeavors and effective communication."},4:{number:4,title:"Stability & Organization",description:"Practicality, stability, and organization tend to receive more focus. A day for building foundations and structure."},5:{number:5,title:"Change & Adventure",description:"Change, adventure, and freedom tend to receive more focus. A day for exploration and embracing new experiences."},6:{number:6,title:"Nurturing & Responsibility",description:"Nurturing, responsibility, and domesticity tend to receive more focus. A day for caring for others and home matters."},7:{number:7,title:"Introspection & Wisdom",description:"Introspection, wisdom, and seeking knowledge tend to receive more focus. A day for reflection and spiritual growth."},8:{number:8,title:"Abundance & Power",description:"Abundance, power, and manifestation tend to receive more focus. A day for achieving goals and material success."},9:{number:9,title:"Completion & Compassion",description:"Completion, humanitarianism, and compassion tend to receive more focus. A day for service to others and endings."},11:{number:11,title:"Intuition & Inspiration",description:"Intuition, inspiration, and spiritual insight tend to receive more focus. A master number day for higher awareness."},22:{number:22,title:"Master Builder",description:"Master building, practical idealism, and large-scale projects tend to receive more focus. A master number day for manifestation."},33:{number:33,title:"Master Teacher",description:"Master teaching, compassion, and healing tend to receive more focus. A master number day for service to humanity."}};return r[t]||r[1]}function sa({timezone:t="America/New_York",city:r="New York",country:s="United States",onRemove:n}){const[o,a]=d.useState(new Date);d.useEffect(()=>{const g=setInterval(()=>{a(new Date)},1e3);return()=>clearInterval(g)},[]);const c=new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"short",year:"numeric"}).formatToParts(o),l=c.find(g=>g.type==="hour").value+":"+c.find(g=>g.type==="minute").value+":"+c.find(g=>g.type==="second").value+" "+c.find(g=>g.type==="dayPeriod").value,h=c.find(g=>g.type==="month").value+" "+c.find(g=>g.type==="day").value+", "+c.find(g=>g.type==="year").value,m=c.find(g=>g.type==="month").value,C=parseInt(c.find(g=>g.type==="day").value),k=parseInt(c.find(g=>g.type==="year").value),j={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12}[m]||1,u=new Date(k,j-1,C),w=hr(u),N=xr(w);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700 relative",children:[n&&e.jsx("button",{type:"button",onClick:n,className:"absolute top-2 right-2 p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove clock",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:r}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:s}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1 font-mono",children:l}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:h}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:N.number}),e.jsx("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:N.title})]})})]})]})}const Je=[{timezone:"America/New_York",city:"New York",country:"United States"},{timezone:"America/Los_Angeles",city:"Los Angeles",country:"United States"},{timezone:"America/Chicago",city:"Chicago",country:"United States"},{timezone:"Europe/London",city:"London",country:"United Kingdom"},{timezone:"Europe/Paris",city:"Paris",country:"France"},{timezone:"Europe/Berlin",city:"Berlin",country:"Germany"},{timezone:"Asia/Tokyo",city:"Tokyo",country:"Japan"},{timezone:"Asia/Shanghai",city:"Shanghai",country:"China"},{timezone:"Asia/Hong_Kong",city:"Hong Kong",country:"Hong Kong"},{timezone:"Asia/Dubai",city:"Dubai",country:"UAE"},{timezone:"Asia/Singapore",city:"Singapore",country:"Singapore"},{timezone:"Australia/Sydney",city:"Sydney",country:"Australia"},{timezone:"America/Toronto",city:"Toronto",country:"Canada"},{timezone:"America/Sao_Paulo",city:"SÃ£o Paulo",country:"Brazil"},{timezone:"America/Mexico_City",city:"Mexico City",country:"Mexico"}];function oa({isOpen:t,onClose:r}){const s=nr(),[n,o]=d.useState(()=>{const u=localStorage.getItem("darkMode");return u?JSON.parse(u):!1}),[a,i]=d.useState(()=>{try{const u=localStorage.getItem("sidebarClocks");if(u){const w=JSON.parse(u);if(Array.isArray(w)&&w.length>0)return w}}catch(u){console.error("Error loading clocks from localStorage:",u)}return[{timezone:"America/New_York",city:"New York",country:"United States",id:Date.now()}]}),[c,l]=d.useState(!1),[h,m]=d.useState(Je[0].timezone);d.useEffect(()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(n))},[n]),d.useEffect(()=>{localStorage.setItem("sidebarClocks",JSON.stringify(a))},[a]);const C=()=>{const u=Je.find(w=>w.timezone===h);if(u){if(a.some(g=>g.timezone===u.timezone)){alert("This clock is already added");return}const N={...u,id:Date.now()};i([...a,N]),l(!1),m(Je[0].timezone)}},k=u=>{if(a.length<=1){alert("You must have at least one clock");return}i(a.filter(w=>w.id!==u))},P=()=>{o(!n)},j=[{path:"/",label:"Dashboard"},{path:"/news",label:"News"},{path:"/trading",label:"Charts"},{path:"/notes",label:"Notes"},{path:"/projection/fib",label:"FIB"},{path:"/projection",label:"Projection"},{path:"/data",label:"Data"},{path:"/api",label:"API"},{path:"/settings",label:"Settings"}];return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 z-[59] bg-gray-900 bg-opacity-50 lg:hidden",onClick:r,"aria-hidden":"true"}),e.jsx("div",{id:"application-sidebar",className:`fixed top-0 start-0 bottom-0 z-[60] w-64 bg-white dark:bg-gray-900 border-e border-gray-200 dark:border-gray-700 transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:end-auto lg:bottom-0 lg:z-[60] lg:block lg:border-e-0 ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(zr,{className:"flex-none text-xl font-semibold text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300 transition-colors",to:"/","aria-label":"Brand",children:"App"}),e.jsx("button",{type:"button",className:"lg:hidden text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",onClick:r,"aria-label":"Close sidebar",children:e.jsxs("svg",{className:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m18 6-12 12"}),e.jsx("path",{d:"m6 6 12 12"})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsx("nav",{className:"hs-accordion-group p-6 w-full","data-hs-accordion-always-open":!0,children:e.jsx("ul",{className:"space-y-1.5",children:j.map(u=>{let w=!1;return u.path==="/"?w=s.pathname==="/":u.path==="/projection"?w=s.pathname==="/projection":u.path==="/projection/fib"?w=s.pathname==="/projection/fib":w=s.pathname===u.path||s.pathname.startsWith(u.path+"/"),e.jsx("li",{children:e.jsx(Rr,{to:u.path,onClick:()=>{window.innerWidth<1024&&r&&r()},className:`flex items-center gap-x-3.5 py-2 px-2.5 text-sm text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 ${w?"bg-gray-100 dark:bg-gray-800 font-semibold":""}`,children:e.jsx("span",{children:u.label})})},u.path)})})})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"p-4 space-y-3 max-h-[45vh] overflow-y-auto",children:[e.jsx("div",{className:"space-y-3",children:a.map(u=>e.jsx(sa,{timezone:u.timezone,city:u.city,country:u.country,onRemove:a.length>1?()=>k(u.id):null},u.id))}),c?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Timezone"}),e.jsx("select",{value:h,onChange:u=>m(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Je.map(u=>e.jsxs("option",{value:u.timezone,children:[u.city,", ",u.country]},u.timezone))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:C,className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Add"}),e.jsx("button",{type:"button",onClick:()=>{l(!1),m(Je[0].timezone)},className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"})]})]}):e.jsxs("button",{type:"button",onClick:()=>l(!0),className:"w-full px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 border border-blue-200 dark:border-blue-700 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Clock"]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n?"Dark Mode":"Light Mode"}),e.jsx("button",{type:"button",onClick:P,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",role:"switch","aria-checked":n,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n?"translate-x-6":"translate-x-1"}`})})]}),e.jsx(aa,{})]})})]})})]})}function na(){const[t,r]=d.useState(!1),s=()=>{r(!t)},n=()=>{r(!1)};return d.useEffect(()=>{const o=()=>{window.innerWidth>=1024&&r(!1)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),d.useEffect(()=>(t&&window.innerWidth<1024?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(oa,{isOpen:t,onClose:n}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 inset-x-0 z-20 bg-white dark:bg-gray-900 border-y border-gray-200 dark:border-gray-700 px-4 sm:px-6 md:px-8 lg:hidden",children:e.jsx("div",{className:"flex justify-between items-center gap-x-4",children:e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx("button",{type:"button",className:"text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:s,"aria-controls":"application-sidebar","aria-label":"Toggle navigation","aria-expanded":t,children:e.jsxs("svg",{className:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"21",y1:"18",y2:"18"})]})}),e.jsx("span",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"App"})]})})}),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(Br,{})})]})]})}const la=(t,r="1d",s="1d")=>{const n=`https://query1.finance.yahoo.com/v8/finance/chart/${t}?interval=${r}&range=${s}`;return`https://api.allorigins.win/get?url=${encodeURIComponent(n)}`},_t="d18ueuhr01qkcat4uip0d18ueuhr01qkcat4uipg",Dt=()=>{try{const t=localStorage.getItem("apiKeys");if(t){const r=JSON.parse(t);return{finnhub:r.finnhub||_t,massive:r.massive||"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG"}}}catch(t){console.error("Error loading API keys from localStorage:",t)}return{finnhub:_t,massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG"}},ia=t=>{const s=Dt().finnhub||"demo";return`https://finnhub.io/api/v1/quote?symbol=${t}&token=${s}`},da=t=>{const s=Dt().massive||"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG";return`https://api.massive.com/v1/quote?symbol=${t}&apiKey=${s}`},Ke=async(t,r="1d",s="1d")=>{try{const n=la(t,r,s),o=await fetch(n,{method:"GET",headers:{Accept:"application/json"}});if(!o.ok){const i=await o.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch data for ${t}: ${o.status} ${o.statusText}. ${i}`)}let a=await o.json();if(a.contents)try{a=typeof a.contents=="string"?JSON.parse(a.contents):a.contents}catch(i){throw console.error("Error parsing CORS proxy response:",i),new Error("Failed to parse API response")}if(!a)throw new Error("Empty response from API");if(!a.chart)throw new Error("Invalid response: missing chart data");if(!a.chart.result||!Array.isArray(a.chart.result)||a.chart.result.length===0)throw new Error("Invalid response: no result data");if(!a.chart.result[0])throw new Error("Invalid response: empty result array");return{data:a,source:"yahoo"}}catch(n){throw console.error(`Error fetching from Yahoo Finance ${t}:`,n),n}},et=async t=>{try{const r=ia(t),s=await fetch(r,{method:"GET",headers:{Accept:"application/json"}});if(!s.ok){const o=await s.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch data for ${t}: ${s.status} ${s.statusText}. ${o}`)}const n=await s.json();if(!n||n.error)throw new Error(n.error||"Empty response from API");if(n.c===null||n.c===void 0)throw new Error("Invalid response: missing price data");return{data:n,source:"finnhub"}}catch(r){throw console.error(`Error fetching from Finnhub ${t}:`,r),r}},tt=async t=>{try{const r=da(t),n=Dt().massive||"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG",o=await fetch(r,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${n}`}});if(!o.ok){const l=await o.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch data for ${t}: ${o.status} ${o.statusText}. ${l}`)}const a=await o.json();if(!a||a.error)throw new Error(a.error||"Empty response from API");const i=a.c||a.close||a.price||a.currentPrice;if(i==null)throw new Error("Invalid response: missing price data");return{data:{c:i,pc:a.pc||a.previousClose||a.prevClose||i,h:a.h||a.high||i,l:a.l||a.low||i,o:a.o||a.open||i,v:a.v||a.volume||0,t:a.t||a.timestamp||Date.now()/1e3},source:"massive"}}catch(r){throw console.error(`Error fetching from Massive ${t}:`,r),r}},ca=()=>{try{const t=localStorage.getItem("preferredApi");if(t&&["yahoo","finnhub","massive","auto"].includes(t))return t}catch(t){console.error("Error loading preferred API:",t)}return"auto"},Re=async(t,r="1d",s="1d")=>{const n=ca();if(n==="yahoo")try{return await Ke(t,r,s)}catch(o){console.log(`Yahoo Finance failed for ${t}, trying fallback...`);try{return await et(t)}catch{try{return await tt(t)}catch{throw new Error(`Failed to fetch data: ${o.message}`)}}}else if(n==="finnhub")try{return await et(t)}catch(o){console.log(`Finnhub failed for ${t}, trying fallback...`);try{return await Ke(t,r,s)}catch{try{return await tt(t)}catch{throw new Error(`Failed to fetch data: ${o.message}`)}}}else if(n==="massive")try{return await tt(t)}catch(o){console.log(`Massive failed for ${t}, trying fallback...`);try{return await Ke(t,r,s)}catch{try{return await et(t)}catch{throw new Error(`Failed to fetch data: ${o.message}`)}}}else try{return await Ke(t,r,s)}catch(o){console.log(`Yahoo Finance failed for ${t}, trying Finnhub backup...`);try{return await et(t)}catch{console.log(`Finnhub failed for ${t}, trying Massive backup...`);try{return await tt(t)}catch{throw console.error(`All APIs failed for ${t}`),new Error(`Failed to fetch data from all APIs: ${o.message}`)}}}},ua=(t,r)=>{if(!r?.chart?.result?.[0])throw new Error("Invalid data format from Yahoo Finance");const s=r.chart.result[0],n=s.meta;s.indicators?.quote?.[0];const o=n.regularMarketPrice||n.previousClose||0,a=n.previousClose||o,i=o-a,c=a?i/a*100:0,l=n.marketState==="REGULAR",h=l?Math.floor(Math.random()*200)+50:0;let m="operational";return l?Math.abs(c)>5&&(m="degraded"):m="paused",{id:t,name:`${n.shortName||t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:m,isUp:l,responseTime:h,avgResponseTime:h,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!l,price:o,change:i,changePercent:c,volume:n.regularMarketVolume||0,marketState:n.marketState,symbol:t,apiSource:"yahoo"}},ha=(t,r)=>{if(!r||r.c===null||r.c===void 0)throw new Error("Invalid data format from Finnhub");const s=r.c||0,n=r.pc||s,o=s-n,a=n?o/n*100:0,i=r.t&&r.t>0,c=i?Math.floor(Math.random()*200)+50:0;let l="operational";return i?Math.abs(a)>5&&(l="degraded"):l="paused",{id:t,name:`${t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:l,isUp:i,responseTime:c,avgResponseTime:c,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!i,price:s,change:o,changePercent:a,volume:r.v||0,marketState:i?"REGULAR":"CLOSED",symbol:t,apiSource:"finnhub"}},xa=(t,r)=>{if(!r||r.c===null||r.c===void 0)throw new Error("Invalid data format from Massive");const s=r.c||0,n=r.pc||s,o=s-n,a=n?o/n*100:0,i=r.t&&r.t>0,c=i?Math.floor(Math.random()*200)+50:0;let l="operational";return i?Math.abs(a)>5&&(l="degraded"):l="paused",{id:t,name:`${t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:l,isUp:i,responseTime:c,avgResponseTime:c,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!i,price:s,change:o,changePercent:a,volume:r.v||0,marketState:i?"REGULAR":"CLOSED",symbol:t,apiSource:"massive"}},yt=(t,r)=>r.source==="finnhub"?ha(t,r.data):r.source==="massive"?xa(t,r.data):ua(t,r.data),ga=async()=>{try{let t=["AAPL","GOOGL","MSFT","TSLA","AMZN"];try{const a=localStorage.getItem("defaultSymbols");if(a){const i=JSON.parse(a);Array.isArray(i)&&i.length>0&&(t=i)}}catch(a){console.error("Error loading default symbols from localStorage:",a)}let r=[];try{const a=localStorage.getItem("deletedMonitors");a&&(r=JSON.parse(a))}catch(a){console.error("Error loading deleted monitors:",a)}const n=t.filter(a=>!r.includes(a)).map(a=>Re(a,"1d","1d").then(i=>yt(a,i)).catch(i=>(console.error(`Failed to fetch ${a}:`,i),{id:a,name:`${a}`,url:`https://finance.yahoo.com/quote/${a}`,type:"http",status:"down",isUp:!1,responseTime:0,avgResponseTime:0,uptime:0,uptimePercent:0,lastCheck:new Date().toISOString(),paused:!1,symbol:a,apiSource:"none"})));return(await Promise.all(n)).filter(a=>a!==null)}catch(t){return console.error("Failed to fetch monitors:",t),[]}},ma=async t=>{try{let r=t.symbol;if(!r&&t.url&&(r=t.url.split("/").pop()?.toUpperCase().replace(/[^A-Z]/g,"")),!r)throw new Error("Stock symbol is required");r=r.toUpperCase().trim();try{let o=[];const a=localStorage.getItem("deletedMonitors");a&&(o=JSON.parse(a)),o=o.filter(i=>i!==r),localStorage.setItem("deletedMonitors",JSON.stringify(o))}catch(o){console.error("Error updating deleted monitors:",o)}const s=await Re(r,"1d","1d"),n=yt(r,s);t.name&&(n.name=t.name);try{let o=["AAPL","GOOGL","MSFT","TSLA","AMZN"];const a=localStorage.getItem("defaultSymbols");if(a){const i=JSON.parse(a);Array.isArray(i)&&i.length>0&&(o=i)}o.includes(r)||(o.push(r),localStorage.setItem("defaultSymbols",JSON.stringify(o)))}catch(o){console.error("Error saving default symbols:",o)}return n}catch(r){throw console.error("Failed to create monitor:",r),r}},pa=async(t,r)=>{try{const s=r.symbol||t,n=await Re(s,"1d","1d");return yt(s,n)}catch(s){throw console.error("Failed to update monitor:",s),s}},Yt=async t=>{try{let r=["AAPL","GOOGL","MSFT","TSLA","AMZN"];try{const o=localStorage.getItem("defaultSymbols");if(o){const a=JSON.parse(o);Array.isArray(a)&&a.length>0&&(r=a)}}catch(o){console.error("Error loading default symbols:",o)}let s=[];try{const o=localStorage.getItem("deletedMonitors");o&&(s=JSON.parse(o))}catch(o){console.error("Error loading deleted monitors:",o)}s.includes(t)||(s.push(t),localStorage.setItem("deletedMonitors",JSON.stringify(s)));const n=r.filter(o=>o!==t);return localStorage.setItem("defaultSymbols",JSON.stringify(n)),{success:!0}}catch(r){throw console.error("Error deleting monitor:",r),r}},Jt=async t=>{const r=await Re(t,"1d","1d");return yt(t,r)},gr=async t=>{try{const r=await Re(t,"1m","1d");if(r.source==="finnhub")return[];const s=r.data;if(!s?.chart?.result?.[0])throw new Error("Invalid data format");const n=s.chart.result[0],o=n.timestamp||[],i=n.indicators?.quote?.[0]?.close||[];return o.map((c,l)=>({time:new Date(c*1e3).toISOString(),timestamp:new Date(c*1e3).toISOString(),value:i[l]||0,responseTime:i[l]||0}))}catch(r){return console.error("Failed to fetch chart data:",r),[]}},ba=async t=>gr(t),fa=async(t,r="response-time")=>r==="uptime"?ba(t):gr(t),mr=async(t,r="1d")=>{try{let s="1d",n="1mo";r==="1H"||r==="1h"?(s="1h",n="1d"):(r==="1D"||r==="1d")&&(s="1d",n="1mo");const o=await Re(t,s,n);if(o.source==="finnhub"){const g=o.data;return{symbol:t,currentPrice:g.c||0,data:[{time:new Date().toISOString(),timestamp:Date.now(),open:g.o||g.c||0,high:g.h||g.c||0,low:g.l||g.c||0,close:g.c||0,volume:g.v||0}]}}const a=o.data;if(!a?.chart?.result?.[0])throw new Error("Invalid data format from API");const i=a.chart.result[0],c=i.timestamp||[],l=i.indicators?.quote?.[0];if(!l)throw new Error("No quote data available");const h=l.close||[],m=l.open||[],C=l.high||[],k=l.low||[],P=l.volume||[];if(c.length===0||h.length===0)throw new Error("No historical data available for this symbol");const j=i.meta,u=j?.regularMarketPrice||j?.previousClose||h[h.length-1]||0,w=[],N=Math.min(c.length,h.length);for(let g=0;g<N;g++){const H=c[g],B=h[g];H&&B!==null&&B!==void 0&&!isNaN(B)&&w.push({time:new Date(H*1e3).toISOString(),timestamp:H*1e3,open:m[g]!==null&&m[g]!==void 0?m[g]:B,high:C[g]!==null&&C[g]!==void 0?C[g]:B,low:k[g]!==null&&k[g]!==void 0?k[g]:B,close:B,volume:P[g]!==null&&P[g]!==void 0?P[g]:0})}if(w.length===0)throw new Error("No valid price data points found");return{symbol:t,currentPrice:u,data:w}}catch(s){throw console.error("Failed to fetch price chart data:",s),s}},ze=()=>{const t=new Date,r=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),s=r.getDay(),n=r.getHours(),o=r.getMinutes(),a=n*60+o;return s===0||s===6?!1:a>=570&&a<960},ya=(t,r=!0)=>{if(t.marketState){const s=t.marketState.toUpperCase();if(s==="REGULAR")return"REGULAR";if(s==="PRE"||s==="PREPRE")return"PRE";if(s==="POST"||s==="POSTPOST")return"POST";if(s==="CLOSED")return"CLOSED"}return r?ze()?"REGULAR":"CLOSED":"UNKNOWN"},Nt=async t=>{try{const r=ze()?"5m":"1d",s=(ze(),"1d"),n=await Ke(t,r,s);if(!n||!n.data)throw new Error("Invalid response format");const o=n.data;if(!o?.chart?.result?.[0])throw new Error("Invalid data format: missing chart result");const a=o.chart.result[0];if(!a.meta)throw new Error("Invalid data format: missing meta data");const i=a.meta,c=a.indicators?.quote?.[0],l=i.previousClose||i.close||0;let h=0;if(i.regularMarketPrice&&i.regularMarketPrice>0&&(h=i.regularMarketPrice),(!h||h===0)&&c&&c.close&&c.close.length>0)for(let j=c.close.length-1;j>=0;j--){const u=c.close[j];if(u!=null&&u>0){h=u;break}}if((!h||h===0)&&(h=i.chartPreviousClose||i.close||0),(!h||h===0)&&(h=l||i.close||0),!h||h===0)throw new Error("Invalid data format: no valid price data");let m=0,C=0;l&&l>0&&(m=h-l,C=m/l*100);const k=ya(i,!0);let P=0;if(i.regularMarketVolume&&i.regularMarketVolume>0)P=i.regularMarketVolume;else if(c&&c.volume&&c.volume.length>0)for(let j=c.volume.length-1;j>=0;j--){const u=c.volume[j];if(u!=null&&u>0){P=u;break}}return{symbol:t,price:h,change:m,changePercent:C,previousClose:l,marketState:k,volume:P}}catch(r){console.error(`Error fetching ${t}:`,r);const s=ze()?"REGULAR":"CLOSED";return{symbol:t,price:null,change:0,changePercent:0,previousClose:0,marketState:s,volume:0,error:r.message||"Invalid data format"}}};function ka({id:t,timezone:r,city:s,country:n}){const{attributes:o,listeners:a,setNodeRef:i,transform:c,transition:l,isDragging:h}=dt({id:t}),m={transform:ct.Transform.toString(c),transition:l,opacity:h?.5:1},[C,k]=d.useState(new Date);d.useEffect(()=>{const p=setInterval(()=>{k(new Date)},1e3);return()=>clearInterval(p)},[]);const j=new Intl.DateTimeFormat("en-US",{timeZone:r,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"short",year:"numeric"}).formatToParts(C),u=j.find(p=>p.type==="hour").value+":"+j.find(p=>p.type==="minute").value+":"+j.find(p=>p.type==="second").value+" "+j.find(p=>p.type==="dayPeriod").value,w=j.find(p=>p.type==="month").value+" "+j.find(p=>p.type==="day").value+", "+j.find(p=>p.type==="year").value,N=j.find(p=>p.type==="month").value,g=parseInt(j.find(p=>p.type==="day").value),H=parseInt(j.find(p=>p.type==="year").value),q={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12}[N]||1,I=new Date(H,q-1,g),G=hr(I),X=xr(G);return e.jsx("div",{ref:i,style:m,className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...o,...a,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:n}),e.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 font-mono",children:u}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:w}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:X.number}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:X.title})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:X.description})]})]})})}function St({id:t,children:r}){const{attributes:s,listeners:n,setNodeRef:o,transform:a,transition:i,isDragging:c}=dt({id:t}),l={transform:ct.Transform.toString(a),transition:i,opacity:c?.5:1};return e.jsxs("div",{ref:o,style:l,className:"relative mb-8",children:[e.jsx("div",{...s,...n,className:"absolute -top-2 left-0 right-0 h-8 cursor-move touch-none flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity z-10 group",children:e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Drag to reorder section"})]})}),e.jsx("div",{className:"pt-2",children:r})]})}function ja({volume:t,symbol:r}){if(!t||t===0)return null;const s=n=>n>=1e9?`${(n/1e9).toFixed(2)}B`:n>=1e6?`${(n/1e6).toFixed(2)}M`:n>=1e3?`${(n/1e3).toFixed(2)}K`:n.toLocaleString();return e.jsxs("div",{className:"absolute z-50 w-56 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-200 bottom-full left-1/2 transform -translate-x-1/2 mb-3",children:[e.jsxs("div",{className:"text-xs font-semibold mb-2 text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:[r," Volume"]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:s(t)}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total shares traded"}),e.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-px",children:[e.jsx("div",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-white dark:border-t-gray-800"}),e.jsx("div",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-gray-200 dark:border-t-gray-700 absolute top-[1px]"})]})]})}function va({id:t,symbol:r,data:s,loading:n,onRemove:o}){const{attributes:a,listeners:i,setNodeRef:c,transform:l,transition:h,isDragging:m}=dt({id:t}),C={transform:ct.Transform.toString(l),transition:h,opacity:m?.5:1};if(n)return e.jsxs("div",{ref:c,style:C,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...i,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-200 border-t-blue-600"}),o&&e.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading..."})]});if(s?.error||s?.price===null)return e.jsxs("div",{ref:c,style:C,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...i,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 rounded",children:"Error"}),o&&e.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:s?.error||"Unable to fetch data"})]});if(!s)return e.jsxs("div",{ref:c,style:C,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...i,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),o&&e.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No data available"})]});const k=s.change>=0,j=r==="DXY"||r==="VIX"?"":"$";let u="Closed",w="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300";return s.marketState==="REGULAR"?(u="Open",w="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"):s.marketState==="PRE"||s.marketState==="PREPRE"?(u="Pre-Market",w="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400"):s.marketState==="POST"||s.marketState==="POSTPOST"?(u="After Hours",w="bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400"):s.marketState==="CLOSED"?(u="Closed",w="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"):ze()?(u="Open",w="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"):(u="Closed",w="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"),e.jsxs("div",{ref:c,style:C,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...i,children:[s&&s.volume>0&&e.jsx(ja,{volume:s.volume,symbol:r}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${w}`,children:u}),o&&e.jsx("button",{type:"button",onClick:N=>{N.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:[j,s.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-lg font-semibold ${k?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:s.change!==0?`${k?"+":""}${j}${Math.abs(s.change).toFixed(2)}`:`${j}0.00`}),e.jsx("span",{className:`text-lg font-semibold ${k?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:s.changePercent!==0?`(${k?"+":""}${Math.abs(s.changePercent).toFixed(2)}%)`:"(0.00%)"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Previous Close"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[j,(s.previousClose||s.price-s.change).toFixed(2)]})]})})]})}function wa(){const t=[{display:"QQQ",api:"QQQ"},{display:"SPY",api:"SPY"},{display:"DXY",api:"DX-Y.NYB"},{display:"VIX",api:"^VIX"}],r=[{id:"clock-ny",timezone:"America/New_York",city:"New York",country:"United States"},{id:"clock-london",timezone:"Europe/London",city:"London",country:"United Kingdom"},{id:"clock-tokyo",timezone:"Asia/Tokyo",city:"Tokyo",country:"Japan"},{id:"clock-sydney",timezone:"Australia/Sydney",city:"Sydney",country:"Australia"}],s=["world-clocks","market","todo-list"],[n,o]=d.useState(()=>{try{const L=localStorage.getItem("dashboardSymbols");if(L){const M=JSON.parse(L);if(Array.isArray(M)&&M.length>0)return M}}catch(L){console.error("Error loading symbols from localStorage:",L)}return t}),[a,i]=d.useState(()=>{try{const L=localStorage.getItem("dashboardWorldClocks");if(L){const M=JSON.parse(L);if(Array.isArray(M)&&M.length>0)return M}}catch(L){console.error("Error loading world clocks from localStorage:",L)}return r}),[c,l]=d.useState(()=>{try{const L=localStorage.getItem("dashboardSectionOrder");if(L){const M=JSON.parse(L);if(Array.isArray(M)&&M.length>0)return M}}catch(L){console.error("Error loading section order from localStorage:",L)}return s}),[h,m]=d.useState({}),[C,k]=d.useState(!0),[P,j]=d.useState(null),[u,w]=d.useState(""),[N,g]=d.useState(!1),H=lr(it(cr,{activationConstraint:{distance:8}}),it(dr,{coordinateGetter:ir}));d.useEffect(()=>{localStorage.setItem("dashboardWorldClocks",JSON.stringify(a))},[a]),d.useEffect(()=>{localStorage.setItem("dashboardSectionOrder",JSON.stringify(c))},[c]),d.useEffect(()=>{localStorage.setItem("dashboardSymbols",JSON.stringify(n))},[n]);const B=async()=>{k(!0);try{const L=new Promise((W,v)=>setTimeout(()=>v(new Error("Request timeout")),15e3)),M=n.map(W=>Nt(W.api).then(v=>({...v,displaySymbol:W.display})).catch(v=>({symbol:W.display,displaySymbol:W.display,price:null,change:0,changePercent:0,previousClose:0,marketState:ze()?"REGULAR":"CLOSED",error:"Failed to fetch data. Please try again."}))),S=await Promise.race([Promise.all(M),L]),F={};S.forEach((W,v)=>{const D=n[v].display;F[D]={...W,symbol:D}}),m(F),j(new Date)}catch(L){console.error("Error loading stock data:",L);const M={};n.forEach(S=>{h[S.display]||(M[S.display]={symbol:S.display,price:null,change:0,changePercent:0,previousClose:0,marketState:ze()?"REGULAR":"CLOSED",error:"Failed to fetch data. Please try again."})}),m(S=>({...S,...M}))}finally{k(!1)}};d.useEffect(()=>{B();const L=setInterval(B,3e4);return()=>clearInterval(L)},[n.length]);const q=async()=>{const L=u.trim().toUpperCase();if(L){if(n.some(M=>M.display===L||M.api===L)){alert("Symbol already exists"),w("");return}g(!0);try{const M=await Nt(L);if(M.error||M.price===null){alert(`Invalid symbol: ${L}. Please check the symbol and try again.`),g(!1);return}const S={display:L,api:L};o([...n,S]),w("");const F=await Nt(L);m(W=>({...W,[L]:{...F,symbol:L}}))}catch(M){console.error("Error adding symbol:",M),alert(`Failed to add symbol: ${L}. Please check the symbol and try again.`)}finally{g(!1)}}},I=L=>{if(n.length<=1){alert("You must have at least one symbol on the dashboard");return}o(n.filter(M=>M.display!==L)),m(M=>{const S={...M};return delete S[L],S})},G=L=>{L.key==="Enter"&&!N&&q()},X=L=>{const{active:M,over:S}=L;S&&M.id!==S.id&&i(F=>{const W=F.findIndex(D=>D.id===M.id),v=F.findIndex(D=>D.id===S.id);return lt(F,W,v)})},p=L=>{const{active:M,over:S}=L;S&&M.id!==S.id&&o(F=>{const W=F.findIndex(D=>D.display===M.id),v=F.findIndex(D=>D.display===S.id);return lt(F,W,v)})},A=L=>{const{active:M,over:S}=L;S&&M.id!==S.id&&l(F=>{const W=F.indexOf(M.id),v=F.indexOf(S.id);return lt(F,W,v)})},V=L=>{switch(L){case"world-clocks":return e.jsx(St,{id:L,children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"World Clocks"}),e.jsx(st,{sensors:H,collisionDetection:ot,onDragEnd:X,children:e.jsx(nt,{items:a.map(M=>M.id),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(M=>e.jsx(ka,{id:M.id,timezone:M.timezone,city:M.city,country:M.country},M.id))})})})]})},L);case"market":return e.jsx(St,{id:L,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Market"}),e.jsxs("div",{className:"flex items-center gap-4",children:[P&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last updated: ",P.toLocaleTimeString("en-US",{timeZone:"America/New_York"})]}),e.jsxs("button",{type:"button",onClick:B,disabled:C,className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:`w-4 h-4 ${C?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:M=>w(M.target.value.toUpperCase()),onKeyPress:G,placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",disabled:N,className:"flex-1 px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:q,disabled:N||!u.trim(),className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Symbol"]})})]}),e.jsx(st,{sensors:H,collisionDetection:ot,onDragEnd:p,children:e.jsx(nt,{items:n.map(M=>M.display),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(M=>e.jsx(va,{id:M.display,symbol:M.display,data:h[M.display]||null,loading:C&&!h[M.display],onRemove:n.length>1?()=>I(M.display):null},M.display))})})})]})},L);case"todo-list":return e.jsx(St,{id:L,children:e.jsx(Na,{})},L);default:return null}};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time market data and world clocks"})]}),e.jsx(st,{sensors:H,collisionDetection:ot,onDragEnd:A,children:e.jsx(nt,{items:c,strategy:Or,children:c.map(L=>V(L))})})]})}function Na(){const[t,r]=d.useState([]),[s,n]=d.useState(""),[o,a]=d.useState(null),[i,c]=d.useState("");d.useEffect(()=>{const N=localStorage.getItem("dashboardTodos");if(N)try{const g=JSON.parse(N),H=new Date().toDateString(),B=g.filter(q=>new Date(q.createdAt).toDateString()===H);r(B),B.length!==g.length&&localStorage.setItem("dashboardTodos",JSON.stringify(B))}catch(g){console.error("Error loading todos:",g)}},[]),d.useEffect(()=>{(t.length>0||localStorage.getItem("dashboardTodos"))&&localStorage.setItem("dashboardTodos",JSON.stringify(t))},[t]);const l=()=>{if(s.trim()){const N={id:Date.now(),text:s.trim(),completed:!1,createdAt:new Date().toISOString()};r([...t,N]),n("")}},h=N=>{r(t.map(g=>g.id===N?{...g,completed:!g.completed}:g))},m=N=>{r(t.filter(g=>g.id!==N))},C=N=>{a(N.id),c(N.text)},k=()=>{i.trim()&&(r(t.map(N=>N.id===o?{...N,text:i.trim()}:N)),a(null),c(""))},P=()=>{a(null),c("")},j=(N,g)=>{N.key==="Enter"?g():N.key==="Escape"&&g===P&&P()},u=t.filter(N=>N.completed).length,w=t.length;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Today's To-Do List"}),w>0&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[u," of ",w," completed"]})]}),w>0&&e.jsx("button",{type:"button",onClick:()=>r([]),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors",children:"Clear All"})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{type:"text",value:s,onChange:N=>n(N.target.value),onKeyPress:N=>j(N,l),placeholder:"Add a new task...",className:"flex-1 px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),e.jsxs("button",{type:"button",onClick:l,className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tasks for today. Add one above to get started!"})]}):e.jsx("div",{className:"space-y-2",children:t.map(N=>e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border transition-all ${N.completed?"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>h(N.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${N.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-green-500"}`,children:N.completed&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),o===N.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:g=>c(g.target.value),onKeyPress:g=>j(g,k),onKeyDown:g=>j(g,P),className:"flex-1 px-3 py-1 border-2 border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",autoFocus:!0}),e.jsx("button",{type:"button",onClick:k,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Save"}),e.jsx("button",{type:"button",onClick:P,className:"px-3 py-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`flex-1 text-gray-900 dark:text-white cursor-pointer ${N.completed?"line-through text-gray-500 dark:text-gray-400":""}`,onDoubleClick:()=>C(N),children:N.text}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>C(N),className:"p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:()=>m(N.id),className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},N.id))})]})}const rt="d18ueuhr01qkcat4uip0d18ueuhr01qkcat4uipg",pr=()=>{try{const t=localStorage.getItem("apiKeys");if(t){const r=JSON.parse(t);return{finnhub:r.finnhub||rt,fibhub:r.fibhub||rt}}}catch(t){console.error("Error loading API keys from localStorage:",t)}return{finnhub:rt,fibhub:rt}},Sa=(t="general",r=null)=>{const n=pr().finnhub||"demo";if(r){const o=new Date,a=new Date(o);a.setDate(a.getDate()-7);const i=a.toISOString().split("T")[0],c=o.toISOString().split("T")[0];return`https://finnhub.io/api/v1/company-news?symbol=${r}&from=${i}&to=${c}&token=${n}`}return`https://finnhub.io/api/v1/news?category=${t}&token=${n}`},br=async(t="general",r=null)=>{try{const s=Sa(t,r),n=new Promise((i,c)=>setTimeout(()=>c(new Error("Finnhub request timeout")),1e4));let o;try{const i=fetch(s,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});o=await Promise.race([i,n])}catch(i){if(i.message&&(i.message.includes("CORS")||i.message.includes("Failed to fetch"))){console.warn("Direct Finnhub fetch failed, trying CORS proxy...");const c=`https://api.allorigins.win/get?url=${encodeURIComponent(s)}`,l=fetch(c,{method:"GET",headers:{Accept:"application/json"}});if(o=await Promise.race([l,n]),!o.ok)throw new Error(`CORS proxy failed: ${o.status}`);const h=await o.json();if(!h||!h.contents)throw new Error("No contents from CORS proxy");const m=JSON.parse(h.contents);if(m&&typeof m=="object"&&m.error)throw new Error(m.error);return!m||Array.isArray(m)&&m.length===0?[]:Array.isArray(m)?m.map(C=>({id:C.id||`${C.headline}-${C.datetime}`,title:C.headline||C.title||"No title",summary:C.summary||C.description||"",source:C.source||"Unknown",url:C.url||C.link||"#",image:C.image||null,datetime:C.datetime*1e3||Date.now(),category:C.category||t,symbol:C.related||r||null,sentiment:C.sentiment||null,apiSource:"finnhub"})):[]}else throw i}if(!o.ok){if(o.status===429)throw new Error("Finnhub API rate limit exceeded. Please try again later.");if(o.status===401||o.status===403)throw new Error("Finnhub API key invalid. Please check your API key in Settings.");const i=await o.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch news: ${o.status} ${o.statusText}. ${i}`)}const a=await o.json();if(a&&typeof a=="object"&&a.error)throw new Error(a.error);return!a||Array.isArray(a)&&a.length===0?[]:Array.isArray(a)?a.map(i=>({id:i.id||`${i.headline}-${i.datetime}`,title:i.headline||i.title||"No title",summary:i.summary||i.description||"",source:i.source||"Unknown",url:i.url||i.link||"#",image:i.image||null,datetime:i.datetime*1e3||Date.now(),category:i.category||t,symbol:i.related||r||null,sentiment:i.sentiment||null,apiSource:"finnhub"})):[]}catch(s){return console.error("Error fetching news from Finnhub:",s),[]}},Ca=(t="general")=>{const r={general:"https://feeds.finance.yahoo.com/rss/2.0/headline",market:"https://feeds.finance.yahoo.com/rss/2.0/headline",stocks:"https://feeds.finance.yahoo.com/rss/2.0/headline",crypto:"https://feeds.finance.yahoo.com/rss/2.0/headline?s=YF",economy:"https://feeds.finance.yahoo.com/rss/2.0/headline"};return r[t]||r.general},La=(t="general",r=null)=>{const s=pr(),n=s.fibhub||s.finnhub||"demo";if(r){const o=new Date,a=new Date(o);a.setDate(a.getDate()-7);const i=a.toISOString().split("T")[0],c=o.toISOString().split("T")[0];return`https://api.fibhub.io/v1/company-news?symbol=${r}&from=${i}&to=${c}&token=${n}`}return`https://api.fibhub.io/v1/news?category=${t}&token=${n}`},fr=async(t="general",r=null)=>{try{const s=La(t,r),n=new Promise((l,h)=>setTimeout(()=>h(new Error("Fibhub request timeout")),8e3)),o=fetch(s,{method:"GET",headers:{Accept:"application/json"},mode:"cors"}),a=await Promise.race([o,n]);if(!a.ok)return a.status!==404&&console.warn(`Fibhub API returned ${a.status}: ${a.statusText}`),[];const i=await a.json();if(!i)return[];let c=[];if(Array.isArray(i))c=i;else if(i.data&&Array.isArray(i.data))c=i.data;else if(i.news&&Array.isArray(i.news))c=i.news;else if(i.results&&Array.isArray(i.results))c=i.results;else if(i.headline||i.title)c=[i];else return[];return c.length===0?[]:c.map((l,h)=>{let m=Date.now();return l.datetime?typeof l.datetime=="number"?m=l.datetime<1e10?l.datetime*1e3:l.datetime:m=new Date(l.datetime).getTime()||Date.now():l.publishedAt?m=new Date(l.publishedAt).getTime()||Date.now():l.pubDate&&(m=new Date(l.pubDate).getTime()||Date.now()),{id:l.id||`${l.headline||l.title||"fibhub"}-${m}-${h}`,title:l.headline||l.title||"No title",summary:l.summary||l.description||l.content||"",source:l.source||l.publisher||"Fibhub",url:l.url||l.link||l.webUrl||"#",image:l.image||l.imageUrl||l.urlToImage||null,datetime:m,category:l.category||t,symbol:l.related||l.symbol||r||null,sentiment:l.sentiment||null,apiSource:"fibhub"}})}catch(s){return s.message&&!s.message.includes("timeout")&&!s.message.includes("Failed to fetch")&&console.warn("Fibhub fetch warning:",s.message),[]}},Ma=async(t="general")=>{try{const r=Ca(t),s=`https://api.allorigins.win/get?url=${encodeURIComponent(r)}`,n=new Promise((k,P)=>setTimeout(()=>P(new Error("Yahoo Finance request timeout")),1e4)),o=fetch(s,{method:"GET",headers:{Accept:"application/json"}}),a=await Promise.race([o,n]);if(!a.ok)throw new Error(`Failed to fetch Yahoo Finance news: ${a.status}`);const i=await a.json();if(!i||!i.contents)return console.warn("Yahoo Finance: No contents in response"),[];const l=new DOMParser().parseFromString(i.contents,"text/xml"),h=l.querySelector("parsererror");if(h)return console.error("Yahoo Finance RSS parsing error:",h.textContent),[];const m=l.querySelectorAll("item");if(!m||m.length===0)return console.warn("Yahoo Finance: No items found in RSS feed"),[];const C=[];return m.forEach((k,P)=>{try{const j=k.querySelector("title")?.textContent||"No title",u=k.querySelector("description")?.textContent||"",w=k.querySelector("link")?.textContent||"#",N=k.querySelector("pubDate")?.textContent||new Date().toISOString(),g=u.match(/<img[^>]+src="([^"]+)"/i),H=g?g[1]:null,B=u.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").trim().substring(0,300);C.push({id:`yahoo-${P}-${Date.now()}`,title:j.trim(),summary:B||"No description available",source:"Yahoo Finance",url:w.trim(),image:H,datetime:new Date(N).getTime()||Date.now(),category:t,symbol:null,sentiment:null,apiSource:"yahoo"})}catch(j){console.warn("Error parsing Yahoo Finance news item:",j)}}),C.length===0?(console.warn("Yahoo Finance: No valid news items parsed"),[]):C.slice(0,50)}catch(r){return console.error("Error fetching news from Yahoo Finance:",r),[]}},yr=t=>{const r=new Set,s=[];for(const n of t){const o=n.title.toLowerCase().trim().substring(0,50),a=n.url||"",i=`${o}-${a}`;r.has(i)||(r.add(i),s.push(n))}return s},Pt=async(t="general",r=null)=>{const s=[],n=[];try{const o=[];o.push(br(t,r).then(h=>h&&h.length>0?(s.push("finnhub"),h):[]).catch(h=>(console.error("Finnhub fetch error:",h),n.push({source:"finnhub",error:h.message}),[]))),o.push(fr(t,r).then(h=>h&&h.length>0?(s.push("fibhub"),h):[]).catch(h=>(console.warn("Fibhub fetch error (non-critical):",h.message),[]))),r||o.push(Ma(t).then(h=>h&&h.length>0?(s.push("yahoo"),h):[]).catch(h=>(console.error("Yahoo Finance fetch error:",h),n.push({source:"yahoo",error:h.message}),[])));const i=(await Promise.all(o)).flat(),c=yr(i);c.sort((h,m)=>(m.datetime||0)-(h.datetime||0));const l=s.length>0?s.join("+"):"none";return{news:c,source:l,sources:s,errors:n.length>0?n:null}}catch(o){return console.error("Error fetching market news:",o),{news:[],source:"none",sources:[],errors:[{source:"unknown",error:o.message}]}}},Pa=async(t="general")=>{const s={all:"general",market:"general",stocks:"general",crypto:"crypto",economy:"general"}[t]||"general";return Pt(s)},Aa=async t=>{try{if(!t||!t.trim())return{news:[],source:"none",sources:[]};const r=t.trim().toUpperCase(),n=/^[A-Z0-9]{1,5}$/.test(r);let o;if(n)try{const[c,l]=await Promise.all([br("general",r).then(u=>u&&u.length>0?u:[]).catch(()=>[]),fr("general",r).then(u=>u&&u.length>0?u:[]).catch(()=>[])]),h=await Pt("general"),m=[...c,...l,...h.news||[]],C=yr(m),k=t.toLowerCase(),P=C.filter(u=>u.title.toLowerCase().includes(k)||u.summary.toLowerCase().includes(k)||u.symbol&&u.symbol.toUpperCase().includes(r));P.sort((u,w)=>(w.datetime||0)-(u.datetime||0));const j=[];return c.length>0&&j.push("finnhub"),l.length>0&&j.push("fibhub"),h.sources&&h.sources.length>0&&j.push(...h.sources.filter(u=>!j.includes(u))),{news:P,source:j.length>0?j.join("+"):"none",sources:j,errors:h.errors}}catch(c){console.log("Company news search failed, falling back to general search:",c)}if(o=await Pt("general"),!o.news||o.news.length===0)return{news:[],source:"none",sources:[]};const a=t.toLowerCase(),i=o.news.filter(c=>c.title.toLowerCase().includes(a)||c.summary.toLowerCase().includes(a)||c.symbol&&c.symbol.toUpperCase().includes(r));return i.sort((c,l)=>(l.datetime||0)-(c.datetime||0)),{news:i,source:o.source,sources:o.sources||[],errors:o.errors}}catch(r){return console.error("Error searching news:",r),{news:[],source:"none",sources:[],errors:[{source:"unknown",error:r.message}]}}};function Ea(){const[t,r]=d.useState("all"),[s,n]=d.useState([]),[o,a]=d.useState(!0),[i,c]=d.useState(null),[l,h]=d.useState(""),[m,C]=d.useState(!1),[k,P]=d.useState(null),[j,u]=d.useState(null),[w,N]=d.useState([]),g=[{id:"all",label:"All News"},{id:"market",label:"Market News"},{id:"stocks",label:"Stocks"},{id:"crypto",label:"Crypto"},{id:"economy",label:"Economy"}],H=d.useCallback(async(p=t)=>{a(!0),c(null),C(!1);try{const A=await Pa(p);if(!A.news||A.news.length===0){if(A.errors&&A.errors.length>0){const V=A.errors.map(L=>`${L.source}: ${L.error}`).join(", ");c(`Failed to fetch news from all sources. ${V}. Please check your API keys in Settings.`)}else c("No news available at this time. Please try again later or check your API keys in Settings.");n([]),u(null),N([])}else{const V=(A.news||[]).sort((L,M)=>(M.datetime||0)-(L.datetime||0));n(V),u(A.source),N(A.sources||[]),P(new Date),c(null)}}catch(A){console.error("Error loading news:",A),c(A.message||"Failed to load news. Please check your API keys in Settings and try again."),n([]),u(null),N([])}finally{a(!1)}},[t]),B=d.useCallback(async p=>{if(!p||!p.trim()){H(t);return}C(!0),a(!0),c(null);try{const A=await Aa(p.trim());if(!A.news||A.news.length===0){if(A.errors&&A.errors.length>0){const V=A.errors.map(L=>`${L.source}: ${L.error}`).join(", ");c(`No news found for "${p}". ${V}. Please check your API keys in Settings.`)}else c(`No news found for "${p}". Please try a different search term or check your API keys in Settings.`);n([]),u(null),N([])}else{const V=(A.news||[]).sort((L,M)=>(M.datetime||0)-(L.datetime||0));n(V),u(A.source),N(A.sources||[]),P(new Date),c(null)}}catch(A){console.error("Error searching news:",A),c(A.message||`Failed to search news for "${p}". Please check your API keys in Settings and try again.`),n([]),u(null),N([])}finally{a(!1),C(!1)}},[H,t]),q=p=>{r(p),h("")},I=()=>{l.trim()?B(l):H(t)},G=p=>{p.key==="Enter"&&B(l)};d.useEffect(()=>{l.trim()||H(t)},[t,H,l]);const X=p=>{if(!p)return"Unknown date";const A=new Date(p),L=new Date-A,M=Math.floor(L/6e4),S=Math.floor(L/36e5),F=Math.floor(L/864e5);return M<1?"Just now":M<60?`${M} minute${M>1?"s":""} ago`:S<24?`${S} hour${S>1?"s":""} ago`:F<7?`${F} day${F>1?"s":""} ago`:A.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"})};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"News"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Stay updated with the latest financial news and market updates"})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:l,onChange:p=>h(p.target.value),onKeyPress:G,placeholder:"Search news by keyword or symbol (e.g., AAPL, Bitcoin, Fed)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),l&&e.jsx("button",{type:"button",onClick:()=>{h(""),H(t)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("button",{type:"button",onClick:()=>B(l),disabled:o,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:o&&m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Searching..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(p=>e.jsx("button",{type:"button",onClick:()=>q(p.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===p.id?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:p.label},p.id))})}),(k||j||w.length>0)&&e.jsxs("div",{className:"mb-4 flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:["Sources: ",w.map(p=>p==="finnhub"?"Finnhub":p==="yahoo"?"Yahoo Finance":p==="fibhub"?"Fibhub":p).join(" + ")]}),w.length>1&&e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs font-medium",children:"Combined"})]}),!w.length&&j&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:["Source: ",j==="finnhub"?"Finnhub":j==="yahoo"?"Yahoo Finance":j==="fibhub"?"Fibhub":j.includes("+")?j.split("+").map(p=>p==="finnhub"?"Finnhub":p==="yahoo"?"Yahoo Finance":p==="fibhub"?"Fibhub":p).join(" + "):"Unknown"]}),k&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Last updated: ",k.toLocaleTimeString("en-US",{timeZone:"America/New_York"})]})]}),e.jsxs("button",{type:"button",onClick:I,disabled:o,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${o?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]}),i&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:i}),e.jsx("button",{type:"button",onClick:I,className:"text-xs text-red-600 dark:text-red-300 mt-1 underline hover:no-underline",children:"Try again"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:o&&s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading news..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No news found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l?`No news found for "${l}". Try a different search term.`:"No news available for this category. Please try refreshing or selecting a different category."}),e.jsx("button",{type:"button",onClick:I,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh News"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(p=>e.jsx("article",{className:"border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.image&&e.jsx("div",{className:"flex-shrink-0 sm:w-32 sm:h-32 w-full h-48",children:e.jsx("img",{src:p.image,alt:p.title,className:"w-full h-full object-cover rounded-lg",onError:A=>{A.target.style.display="none"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:p.title})}),p.symbol&&e.jsx("span",{className:"flex-shrink-0 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:p.symbol})]}),p.summary&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 line-clamp-3",children:p.summary}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),p.source]}),p.apiSource&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${p.apiSource==="finnhub"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":p.apiSource==="fibhub"?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:p.apiSource==="finnhub"?"Finnhub":p.apiSource==="fibhub"?"Fibhub":"Yahoo Finance"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),X(p.datetime)]})]}),e.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm flex items-center gap-1 transition-colors",children:["Read more",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})},p.id))})})]})}ut.register(ht,xt,gt,mt,Wr,pt,bt,ft,Et,Hr,Ur);function Da({chartType:t,candlestickData:r,chartData:s,symbol:n,currentInterval:o,lineChartOptions:a,candlestickChartOptions:i}){if(t==="candlestick")try{if(!r||!r.datasets||!r.datasets[0]||!r.datasets[0].data||r.datasets[0].data.length===0)throw new Error("Candlestick data not available");if(!r.datasets[0].data.every(l=>l&&typeof l=="object"&&"o"in l&&"h"in l&&"l"in l&&"c"in l&&!isNaN(Number(l.o))&&!isNaN(Number(l.h))&&!isNaN(Number(l.l))&&!isNaN(Number(l.c))))throw new Error("Invalid candlestick data structure");return e.jsx(Gr,{type:"candlestick",data:r,options:i},`candlestick-${n}-${o}`)}catch(c){return console.error("Candlestick chart error:",c),s&&s.datasets&&s.datasets[0]?e.jsx(qe,{data:s,options:a},`line-fallback-${n}-${o}`):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm",children:"Unable to display candlestick chart. Showing line chart instead."})})}return s&&s.datasets&&s.datasets[0]?e.jsx(qe,{data:s,options:a},`line-${n}-${o}`):null}function $a(){const[t,r]=d.useState("QQQ"),[s,n]=d.useState("1D"),[o,a]=d.useState(null),[i,c]=d.useState(null),[l,h]=d.useState(null),[m,C]=d.useState(!1),[k,P]=d.useState(null),[j,u]=d.useState(null),[w,N]=d.useState(null),[g,H]=d.useState([]),[B,q]=d.useState(!1),[I,G]=d.useState("line"),X=d.useRef(null),p=d.useRef(null),A=d.useRef(null),V=d.useRef(null),L=d.useRef(null),M=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){return O.parsed.y!==null&&O.parsed.y!==void 0?`${O.dataset.label}: $${O.parsed.y.toFixed(2)}`:""}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O!=null&&!isNaN(O)?"$"+O.toFixed(2):""},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),S=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){const U=O.parsed.y;return U>=1e6?`Volume: ${(U/1e6).toFixed(2)}M`:U>=1e3?`Volume: ${(U/1e3).toFixed(2)}K`:`Volume: ${U}`}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O>=1e6?(O/1e6).toFixed(1)+"M":O>=1e3?(O/1e3).toFixed(1)+"K":O},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),F=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){const U=O.raw;return U&&typeof U=="object"&&"o"in U&&"h"in U&&"l"in U&&"c"in U?[`Open: $${U.o.toFixed(2)}`,`High: $${U.h.toFixed(2)}`,`Low: $${U.l.toFixed(2)}`,`Close: $${U.c.toFixed(2)}`]:""}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O!=null&&!isNaN(O)?"$"+O.toFixed(2):""},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),W=d.useCallback(async()=>{if(!t||!t.trim()){P("Please enter a stock symbol");return}const O=o;C(!0),P(null);try{const U=new Promise((oe,ie)=>setTimeout(()=>ie(new Error("Request timeout. Please try again.")),2e4)),de=mr(t.toUpperCase().trim(),s),ae=await Promise.race([de,U]);if(!ae)throw new Error("No data received from API");if(!ae.data||!Array.isArray(ae.data))throw new Error("Invalid data format: data.data is not an array");if(ae.data.length===0)throw new Error("No chart data available for this symbol");const Z=ae.data.filter(oe=>{if(!oe||!oe.timestamp)return!1;const ie=oe.close;return ie!=null&&!isNaN(ie)&&ie>0});if(Z.length===0)throw new Error("No valid price data available. All data points are invalid.");Z.sort((oe,ie)=>oe.timestamp-ie.timestamp);const f=Z.map(oe=>{try{const ie=new Date(oe.timestamp);return isNaN(ie.getTime())?"":s==="1H"?ie.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"}):ie.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"America/New_York"})}catch{return""}}).filter(oe=>oe!==""),y=Z.map(oe=>{const ie=Number(oe.close);return isNaN(ie)?null:ie}).filter(oe=>oe!==null),E=Z.map(oe=>{const ie=Number(oe.volume)||0;return isNaN(ie)?0:ie}),z=Math.min(f.length,y.length,E.length),ee=f.slice(0,z),Q=y.slice(0,z),ge=E.slice(0,z);if(Q.length===0)throw new Error("No valid price data to display after processing");const b=Q[0],R=Q[Q.length-1],Y=R-b,ve=b!==0?Y/b*100:0,De={labels:ee,datasets:[{label:`${t.toUpperCase()} Price`,data:Q,borderColor:Y>=0?"rgb(34, 197, 94)":"rgb(239, 68, 68)",backgroundColor:Y>=0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0,pointRadius:0,pointHoverRadius:4,borderWidth:2}],currentPrice:ae.currentPrice||R,change:Y,changePercent:ve},Be={labels:ee,datasets:[{label:"Volume",data:ge,backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},ye=Z.slice(0,z).map((oe,ie)=>{const $e=Number(oe.open)||Number(oe.close)||0,We=Number(oe.high)||Number(oe.close)||0,He=Number(oe.low)||Number(oe.close)||0,Le=Number(oe.close)||0;return{x:ie,o:$e,h:We,l:He,c:Le}}),Ae={labels:ee,datasets:[{label:`${t.toUpperCase()} Candlestick`,data:ye}]};A.current=De,V.current=Be,L.current=Ae,a(De),c(Be),h(Ae),N(s),u(new Date);const Oe=`${t.toUpperCase()}-${s}`;H(oe=>{const ie=oe.filter(We=>We!==Oe),$e=[Oe,...ie].slice(0,5);return localStorage.setItem("tradingRecentSearches",JSON.stringify($e)),$e})}catch(U){const de=U.message||"Failed to load chart data. Please check the symbol and try again.";P(de),O||(a(null),c(null),h(null))}finally{C(!1)}},[t,s]);d.useEffect(()=>{const O=localStorage.getItem("tradingRecentSearches");if(O)try{H(JSON.parse(O))}catch{}},[]),d.useEffect(()=>{t==="QQQ"&&!o&&W()},[]),d.useEffect(()=>{I==="candlestick"&&(!l||!l.datasets||!l.datasets[0]||!l.datasets[0].data||l.datasets[0].data.length===0)&&(console.warn("Candlestick data not available, resetting to line chart"),G("line"))},[I,l]);const v=()=>{t&&t.trim()&&(W(),q(!1))},D=()=>{t&&t.trim()&&W()},T=O=>{O!==s&&(n(O),t&&t.trim()&&o&&setTimeout(()=>{W()},100))},se=O=>{const[U,de]=O.split("-");r(U),n(de),q(!1),setTimeout(()=>{W()},100)},he=O=>{O.key==="Enter"&&v()};return d.useEffect(()=>()=>{X.current&&clearInterval(X.current)},[]),e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Charts"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time stock market data and analysis"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stock Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:p,type:"text",id:"symbol",value:t,onChange:O=>{const U=O.target.value.toUpperCase();r(U),q(U.length===0&&g.length>0)},onKeyDown:he,onFocus:()=>{g.length>0&&!t&&q(!0)},onBlur:()=>{setTimeout(()=>q(!1),200)},placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),t&&e.jsx("button",{type:"button",onClick:()=>{r(""),q(!1),p.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),B&&g.length>0&&!m&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recent Searches"}),g.map(O=>{const[U,de]=O.split("-");return e.jsxs("button",{type:"button",onClick:()=>se(O),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:U}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:de})]},O)})]})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Interval"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>T("1D"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="1D"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Day"}),e.jsx("button",{type:"button",onClick:()=>T("1H"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="1H"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Hour"})]})]}),e.jsx("div",{className:"w-full lg:w-auto",children:e.jsx("button",{type:"button",onClick:v,disabled:m||!t||!t.trim(),className:"w-full lg:w-auto px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})})]}),k&&e.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:k}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check the symbol and try again"})]})]})}),(o||m)&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Current Price"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:m&&!o?e.jsx("span",{className:"text-gray-400",children:"Loading..."}):`$${o?.currentPrice?.toFixed(2)||"N/A"}`})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${!o||o.change>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsx("p",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Change"}),e.jsx("p",{className:`text-xl font-bold ${!o||o.change>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:m&&!o?e.jsx("span",{className:"text-gray-400",children:"--"}):o?`${o.change>=0?"+":""}$${o.change.toFixed(2)}`:"--"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${!o||o.changePercent>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsx("p",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Change %"}),e.jsx("p",{className:`text-xl font-bold ${!o||o.changePercent>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:m&&!o?e.jsx("span",{className:"text-gray-400",children:"--"}):o?`${o.changePercent>=0?"+":""}${o.changePercent.toFixed(2)}%`:"--"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Interval"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:w||"N/A"})]})]}),(j||o)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:j?`Last updated: ${j.toLocaleString("en-US",{timeZone:"America/New_York"})}`:"Ready to load data"})]}),o&&e.jsxs("button",{type:"button",onClick:D,disabled:m,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${m?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Price Chart"}),t&&w&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.toUpperCase()," - ",w," interval"]})]}),o&&e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>{try{G("line")}catch(O){console.error("Error switching to line chart:",O)}},className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${I==="line"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Line"}),e.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation();try{if(l&&l.datasets&&l.datasets[0]&&l.datasets[0].data&&l.datasets[0].data.length>0){const U=l.datasets[0].data[0];U&&"o"in U&&"h"in U&&"l"in U&&"c"in U?G("candlestick"):(console.warn("Candlestick data structure invalid, staying on line chart"),G("line"))}else console.warn("Candlestick data not available, staying on line chart"),G("line")}catch(U){console.error("Error switching to candlestick chart:",U),G("line")}},disabled:!l||!l.datasets||!l.datasets[0]||!l.datasets[0].data||l.datasets[0].data.length===0,className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${I==="candlestick"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Candlestick"})]})]}),e.jsx("div",{className:"h-[500px] relative",children:o&&o.labels&&o.labels.length>0&&o.datasets&&o.datasets[0]&&o.datasets[0].data&&o.datasets[0].data.length>0?e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-800/90 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx(Da,{chartType:I,candlestickData:l,chartData:o,symbol:t,currentInterval:w,lineChartOptions:M.current,candlestickChartOptions:F.current})]}):m?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading chart data..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:"No chart data available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please try searching again or check the symbol"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trading Volume"}),t&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.toUpperCase()," trading volume over time"]})]}),e.jsx("div",{className:"h-[350px] relative",children:i&&i.labels&&i.labels.length>0?e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-800/80 z-10 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:e.jsx(Vr,{data:i,options:S.current})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No volume data available"})})})]})]})}const $t="savedProjections",Ft=()=>{try{const t=localStorage.getItem($t);if(t)return JSON.parse(t)}catch(t){console.error("Error loading saved projections:",t)}return[]},Fa=t=>{try{const r=Ft(),s={id:Date.now().toString(),...t,savedAt:new Date().toISOString()};return r.push(s),localStorage.setItem($t,JSON.stringify(r)),s}catch(r){throw console.error("Error saving projection:",r),r}},Kt=t=>{try{const s=Ft().filter(n=>n.id!==t);return localStorage.setItem($t,JSON.stringify(s)),{success:!0}}catch(r){throw console.error("Error deleting projection:",r),r}};ut.register(ht,xt,gt,mt,pt,bt,ft,Et,ur);const Ee=[3,7,31,12,19,5,11,13,17,23,29,31],me=[11,13,17,29,31,47,59,61,97,101],kr=72n,Ia=1n<<kr,qt=1n<<kr-2n,At=8n,jr=256,Ct=12,Zt=Math.PI*2,Ta=[3,7,31,12,19,5,11,13,17,23,29,31],vr=["dub","kubt","k'anch","dub","kubt","k'anch"];function Qt(t,r,s){t=(t%s+s)%s;let n=1n;for(;r>0n;)r&1n&&(n=n*t%s),t=t*t%s,r>>=1n;return n}function Xt(t,r){const s=t*t,n=r*r;return(s-n)/(s+n)}function za(t){const r=me.indexOf(t);if(r===-1)return Xt(t,t-2);const s=t,n=r>0?me[r-1]:2;return Xt(s,n)}function Ra(t){return t==="dub"?3:t==="kubt"?5:t==="k'anch"||t==="k'anchay"?7:typeof t=="number"?Math.pow(3,t)%3:3}function Ba(t){const s=t/432;return{phase:Math.log(s)/Math.log(2)*(Math.PI/2),magnitude:Math.sqrt(s)}}function Oa(t,r){return Array.isArray(r)?r[t%r.length]:r}function Wa(t,r,s,n,o=31){return Xa(t,t,s,n,typeof r=="number"?r:o,o)}function Ha(t,r,s,n){const o=n.slice(0,3).reduce((h,m)=>h*m,1),a=Math.log(o)/Math.log(3),i=r/100,c=Math.pow(3,i),l=1+a/1e3;return t*c*l}function er(t,r){const s=Math.pow(10,r);return Math.floor(t*s)/s}function Ua({lastPrice:t,depthPrime:r,omegaHz:s=432,triad:n=[2,5,7],decimals:o=8,lambdaSchedule:a=vr,omegaSchedule:i=null,N:c=120}){const l=za(r),h=n.slice(0,3).reduce((P,j)=>P*j,1),m=Math.log(h)/Math.log(3);let C=1+.01*m+.001*(r%7);const k=[];for(let P=0;P<c;P++){const j=a[P%a.length],u=Oa(P,i||s),w=Wa(P,l,j,u,r);C=Ha(C,w,u,n);let N=0;for(let I=0;I<Ct;I++){const G=P*(Zt/Ct)+I*Zt/Ct,X=Ta[I]%360*(Math.PI/180),A=Ra(j)%3*(Math.PI/360),{phase:V}=Ba(u),M=Math.floor(I/3)%2===0?1:-1,S=(P+I)%2===0?1:-1,F=G+X+A+.5*V,W=Math.cos(F),v=Math.tanh(C/1e5),D=W*M*S*l*(1+.5*v);N+=D}const g=Math.log(r)/Math.log(2),H=Math.max(1,m),B=er(N*g*.5*H,o),q=er(t+B,o);k.push({x:P,y:q})}return k}function Va(t,r){wr(r,!1);const[s,n,o]=r,i=Qt(BigInt(n),BigInt(o),qt)+qt;return Qt(BigInt(t),i,Ia)}function Ga(t){const r=t>>At;return Number(r)/Number(1n<<64n)*2-1}function at(t){const r=t-1;let s=0;for(let n=0;n<Ee.length;n++){const o=r*(Math.PI*2/12)*Ee[n];s+=Math.cos(o)}return s/Ee.length}function Lt(t){return Math.trunc(t*jr)}function _a(t){return t/jr}const Ya=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571];function Ja(t,r,s){if(!It(t))throw new Error(`Depth must be a prime number, got: ${t}. Prime exponentiation towers require prime-based depth.`);const n=s.indexOf(t);if(n===-1)throw new Error(`Depth prime ${t} not found in PRIMES_500. Prime exponentiation towers must use primes from the hardcoded list.`);const o=[],a=Math.floor(r/2);for(let i=-a;i<=a&&!(o.length>=r);i++){const c=Math.max(0,Math.min(s.length-3,n+i)),l=[s[c],s[c+1],s[c+2]];try{wr(l,!1),o.push(l)}catch(h){throw console.error(`Invalid triadic set generated: ${JSON.stringify(l)}`,h),new Error(`Failed to generate valid triadic set: ${h.message}`)}}return o}function It(t){if(t<2)return!1;if(t===2)return!0;if(t%2===0)return!1;for(let r=3;r*r<=t;r+=2)if(t%r===0)return!1;return!0}const tr=[12,15];function wr(t,r=!1){if(!Array.isArray(t)||t.length!==3)throw new Error(`Triadic set must be array of exactly 3 elements, got: ${JSON.stringify(t)}`);for(const s of t){if(!Number.isInteger(s)||s<2)throw new Error(`Triadic set values must be integers >= 2, got: ${JSON.stringify(t)}`);if(!It(s)&&!(r&&tr.includes(s)))throw new Error(`Triadic set contains non-prime value ${s} which is not an explicitly allowed coprime. Triadic sets for prime exponentiation towers must contain primes. Allowed coprimes (if explicitly chosen): ${tr.join(", ")}. Got: ${JSON.stringify(t)}`)}return!0}function Ka(t){if(t<0||t>=Ee.length)return 0;let r=0;for(let s=0;s<=t;s++)It(Ee[s])&&r++;return r}function qa(t,r){if(!r||r.length===0)return 1;const s=r.reduce((a,i)=>a+i,0)/r.length,n=r.reduce((a,i)=>a+Math.pow(i-s,2),0)/r.length,o=Math.log2(Math.max(1,n))+1;return Math.max(1,o*(t+1)/12)}function Za(t,r,s){const n=Ka(r),o=qa(r,s);return Math.log2(Math.max(1,n)/Math.max(1,o))}function Qa(t){return t==="dub"?3:t==="kubt"?5:t==="k'anch"||t==="k'anchay"?7:typeof t=="number"?Math.pow(3,t)%3:3}function Xa(t,r,s,n,o,a=31){const i=(1+Math.sqrt(5))/2,c=Math.PI,l=r*c*i,h=t*2*c/12,m=Qa(s),C=m>0?m:1,k=Math.log(C)/Math.log(3),j=(n||144e3)/432;let u=0;if(o&&typeof o=="object"&&o.p&&o.q)u=o.p*o.p-o.q*o.q;else if(typeof o=="number"){const w=me.indexOf(o),N=o,g=w>0?me[w-1]:2;u=N*N-g*g}else{const w=a||31,N=me.indexOf(w),g=w,H=N>0?me[N-1]:2;u=g*g-H*H}return l+h+k+j+u}function es(t,r){if(r<0||r>=Ee.length)return 0;const s=Ee[r],n=(t-1)*2*Math.PI/12/Math.log(3),o=Math.pow(3,n),a=(t-1)*2*Math.PI/12*s;return o*Math.cos(a)}function ts(t,r,s,n,o=.01,a=31,i=432,c=!0,l=!1){if(t.length<2)return{lines:[]};const h=t[t.length-1],m=[];for(let C=0;C<n.length;C++){const k=n[C],P=Va(s,k),j=Ga(P),u=l?i+C*96:i,w=8;try{const g=Ua({lastPrice:h,depthPrime:a,omegaHz:u,triad:k,decimals:w,lambdaSchedule:c?vr:["dub"],omegaSchedule:l?[432,528,432,528]:null,N:r}).map(I=>I.y),H=g.map(Lt);let B=0,q=0;for(let I=1;I<g.length;I++){const G=at(I),X=at(I-1);if((G>0&&X<=0||G<0&&X>=0)&&B++,I>1&&I<g.length-1){const p=g[I-1],A=g[I],V=g[I+1];(A>p&&A>V||A<p&&A<V)&&q++}}m.push({triad:k,base:s,aQ8:(P>>At).toString(),pointsQ8:H,points:g,zeroCrossings:B,turningPoints:q,omega:u,depthPrime:a})}catch(N){console.error(`Failed to compute crystalline projection for triad ${k}:`,N);let g=h;const H=[];let B=0,q=0;for(let I=1;I<=r;I++){const G=at(I),X=o*j*G;g=g*(1+X);const p=Lt(g);if(H.push(p),I>1){const A=at(I-1);(G>0&&A<=0||G<0&&A>=0)&&B++}}m.push({triad:k,base:s,aQ8:(P>>At).toString(),pointsQ8:H,points:H.map(_a),zeroCrossings:B,turningPoints:q})}}return{symbol:null,lastPriceQ8:Lt(h),beta:o,horizon:r,lines:m}}function Mt(t,r){if(t.length<2)return Array(r).fill(t[t.length-1]||0);const s=t.slice(-30),n=s.length;let o=0,a=0,i=0,c=0;s.forEach((C,k)=>{const P=k,j=C;o+=P,a+=j,i+=P*j,c+=P*P});const l=(n*i-o*a)/(n*c-o*o),h=(a-l*o)/n,m=[];for(let C=1;C<=r;C++){const k=h+l*(n+C-1);m.push(Math.max(0,k))}return m}function rs(t){try{const r=`stabilizedModel_${t.toUpperCase()}`,s=localStorage.getItem(r);if(s)return JSON.parse(s)}catch(r){console.error("Error loading stabilized model:",r)}return null}function rr(t,r=.9){const s=[210,0,40,90,140,260,300,20,170,200,280,320,45];return`hsla(${s[t%s.length]}, 85%, 60%, ${r})`}function as(){const t=nr(),[r,s]=d.useState(""),[n,o]=d.useState("1D"),[a,i]=d.useState(null),[c,l]=d.useState(!1),[h,m]=d.useState(null),[C,k]=d.useState(null),[P,j]=d.useState(null),[u,w]=d.useState(20),[N,g]=d.useState(48),[H,B]=d.useState([]),[q,I]=d.useState(!1),[G,X]=d.useState("primetetration"),[p,A]=d.useState(null),[V,L]=d.useState(!1),[M,S]=d.useState(null),[F,W]=d.useState(!1),[v,D]=d.useState(!1),[T,se]=d.useState(4),[he,O]=d.useState(me[4]||31),[U,de]=d.useState(3),[ae,Z]=d.useState(12),[f,y]=d.useState(null),[E,z]=d.useState(.01),[ee,Q]=d.useState(432),[ge,b]=d.useState(!1),[R,Y]=d.useState(!0),[ve,De]=d.useState(!1),[Be,ye]=d.useState(!1),[Ae,Oe]=d.useState(!1),[oe,ie]=d.useState(null),$e=d.useRef(null),We=d.useRef(null),He=d.useRef(null),Le=d.useRef(null),Fe=d.useRef(null),Ie=d.useRef(null),Ue=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(x){return x.parsed.y!==null&&x.parsed.y!==void 0?`${x.dataset.label}: $${x.parsed.y.toFixed(2)}`:""}}},zoom:{zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0,mode:"xy",modifierKey:null,threshold:10},limits:{x:{min:"original",max:"original"},y:{min:"original",max:"original"}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{maxTicksLimit:20,font:{size:11},autoSkip:!0}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(x){return x!=null&&!isNaN(x)?"$"+x.toFixed(2):""},font:{size:11}},min:void 0,max:void 0}}}),pe=d.useCallback(async()=>{if(!r||!r.trim()){m("Please enter a stock symbol");return}const x=a;l(!0),m(null);try{const te=new Promise(($,_)=>setTimeout(()=>_(new Error("Request timeout. Please try again.")),2e4)),K=mr(r.toUpperCase().trim(),n),ce=await Promise.race([K,te]);if(!ce)throw new Error("No data received from API");if(!ce.data||!Array.isArray(ce.data))throw new Error("Invalid data format: data.data is not an array");if(ce.data.length===0)throw new Error("No chart data available for this symbol");const xe=ce.data.filter($=>{if(!$||!$.timestamp)return!1;const _=$.close;return _!=null&&!isNaN(_)&&_>0});if(xe.length===0)throw new Error("No valid price data available. All data points are invalid.");xe.sort(($,_)=>$.timestamp-_.timestamp);const be=xe.map($=>Number($.close));He.current=be;const Ve=xe.map($=>{try{const _=new Date($.timestamp);return isNaN(_.getTime())?"":n==="1H"?_.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"}):_.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"America/New_York"})}catch{return""}}).filter($=>$!==""),Ar=rs(r.toUpperCase().trim());let ne=[],ys=Ar,le=u;G==="primetetration"&&N&&(n==="1H"?le=N:n==="1D"||n==="1d"?le=Math.ceil(N/24):le=u),le=Math.max(1,Math.min(1e3,le||u||20));const Ne=be[be.length-1];if(G==="primetetration")try{const $=me[T]||31,_=Ja($,ae,Ya),J=ts(be,le,U,_,E,$,ee,R,ge);if(J.symbol=r.toUpperCase().trim(),y(J),J.lines&&J.lines.length>0&&J.lines[0].points){if(ne=J.lines[0].points,ne.length!==le)if(console.warn(`Projected prices length (${ne.length}) doesn't match stepsToUse (${le})`),ne.length<le){const ue=ne[ne.length-1]||Ne;for(;ne.length<le;)ne.push(ue)}else ne=ne.slice(0,le)}else ne=Mt(be,le)}catch($){console.error("Prime Tetration projection failed, falling back to simple:",$),ne=Mt(be,le),y(null)}else ne=Mt(be,le);if(G!=="primetetration"&&y(null),!Array.isArray(ne)||ne.length===0)ne=Array(le).fill(Ne);else if(ne.length!==le)if(console.warn(`Final projectedPrices length (${ne.length}) doesn't match stepsToUse (${le}), adjusting...`),ne.length<le){const $=ne[ne.length-1]||Ne;for(;ne.length<le;)ne.push($)}else ne=ne.slice(0,le);const ks=Array.from({length:12},($,_)=>Za(be.length,_,be)).reduce(($,_)=>$+_,0)/12,js=Array.from({length:12},($,_)=>Math.abs(es(be.length,_))).reduce(($,_)=>$+_,0)/12;A(G==="primetetration"&&f?{depthPrime:me[T]||31,base:U,projectionCount:ae,beta:E,horizon:le,phi:Ee,lines:f.lines?f.lines.length:0}:null);const kt=[];for(let $=1;$<=le;$++)kt.push(`Step ${$}`);const Ge=Array.isArray(Ve)?Ve:[],_e=Array.isArray(kt)?kt:[],re=Array.isArray(be)?be:[],ke=Array.isArray(ne)?ne:[];if(Ge.length!==re.length){console.warn("Historical labels and prices length mismatch:",Ge.length,re.length);const $=Math.min(Ge.length,re.length);Ge.splice($),re.splice($)}if(_e.length!==ke.length){console.warn("Projected labels and prices length mismatch:",_e.length,ke.length);const $=Math.min(_e.length,ke.length);_e.splice($),ke.splice($)}const je=[...Ge,..._e],Se=[...re,...ke];if(je.length!==Se.length){console.warn("Labels and prices length mismatch:",je.length,Se.length);const $=Math.min(je.length,Se.length);je.splice($),Se.splice($)}const jt=re[0]||0,Rt=ke.length>0?ke[ke.length-1]:Ne,Bt=Ne-jt,Er=jt!==0?Bt/jt*100:0,Ot=Rt-Ne;let Ze=0;Ne!==0&&Ne>0&&(Ze=Ot/Ne*100,Ze=Math.max(-1e3,Math.min(1e3,Ze)));const Dr=Math.max(0,Rt);if(ke.length>0&&re.length>0){const $=re[re.length-1],_=ke[0];Math.abs(_-$)/$>.02&&(ke[0]=$+(_-$)*.3,Se[re.length]=ke[0])}const Ce=je.map(($,_)=>{if(_<re.length){const J=Se[_];return J!=null&&!isNaN(J)&&J>0?Number(J):null}if(_===re.length&&re.length>0){const J=re[re.length-1],ue=Se[_];return ue!=null&&!isNaN(ue)&&ue>0?J*.8+Number(ue)*.2:J}return null}),fe=je.map(($,_)=>{if(_<re.length)return null;if(_===re.length&&re.length>0){const J=re[re.length-1],ue=Se[_];return ue!=null&&!isNaN(ue)&&ue>0?J*.8+Number(ue)*.2:J}if(_<Se.length){const J=Se[_];return J!=null&&!isNaN(J)&&J>0?Number(J):null}return null}),Wt=Ce.some($=>$!=null),Ht=fe.some($=>$!=null);if(!Wt&&!Ht)throw new Error("No valid chart data available. All data points are null or invalid.");const Pe=re.length,$r=Ce[Pe]||fe[Pe];console.log("Chart Data Debug:",{labelsLength:je.length,pricesLength:Se.length,historicalLength:re.length,projectedLength:ke.length,historicalDataPoints:Ce.filter($=>$!=null).length,projectedDataPoints:fe.filter($=>$!=null).length,firstHistorical:Ce[0],lastHistorical:Ce[re.length-1],connectionIndex:Pe,connectionPrice:$r,firstProjected:fe[Pe],secondProjected:fe[Pe+1],lastProjected:fe[fe.length-1],hasHistoricalData:Wt,hasProjectedData:Ht,sampleHistorical:Ce.slice(Math.max(0,re.length-5),re.length+1),sampleProjected:fe.slice(Pe,Pe+5),projectedOscillations:fe.slice(Pe,Pe+10).filter($=>$!==null).map(($,_,J)=>_===0?0:J[_]-J[_-1])});const Fr=Ce.filter($=>$!=null&&!isNaN($)).length,Ir=fe.filter($=>$!=null&&!isNaN($)).length;if(Fr===0&&Ir===0)throw new Error("No valid data points available for chart. All values are null or invalid.");for(;Ce.length<je.length;)Ce.push(null);for(;fe.length<je.length;)fe.push(null);const vt=[{label:`${r.toUpperCase()} Historical`,data:Ce.slice(0,je.length),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!1,pointRadius:2,pointHoverRadius:6,borderWidth:2,spanGaps:!1,showLine:!0,stepped:!1}];G==="primetetration"&&f&&f.lines&&f.lines.length>0?f.lines.forEach(($,_)=>{let J=$.points||[];if(J.length!==le)if(console.warn(`Line ${_} points length (${J.length}) doesn't match stepsToUse (${le})`),J.length<le){const Qe=J[J.length-1]||Ne;for(;J.length<le;)J.push(Qe)}else J=J.slice(0,le);const ue=je.map((Qe,Vt)=>{if(Vt<re.length)return null;const Xe=Vt-re.length;if(Xe>=0&&Xe<J.length){if(Xe===0&&re.length>0)return re[re.length-1]*.8+J[0]*.2;const Ye=J[Xe];return Ye!=null&&!isNaN(Ye)&&Ye>0?Number(Ye):null}return null});vt.push({label:`Triad [${$.triad.join("-")}]`,data:ue,borderColor:rr(_,.9),backgroundColor:rr(_,.18),fill:!1,borderWidth:2,pointRadius:0,tension:.4,spanGaps:!1,showLine:!0,stepped:!1})}):vt.push({label:`${r.toUpperCase()} Projected (Prime Tetration)`,data:fe.slice(0,je.length),borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",borderDash:[5,5],tension:.4,fill:!1,pointRadius:2,pointHoverRadius:6,borderWidth:2,spanGaps:!1,showLine:!0,stepped:!1});const Me={labels:je,datasets:vt,currentPrice:ce.currentPrice||Ne,change:Bt,changePercent:Er,projectedPrice:Dr,projectedChange:Ot,projectedChangePercent:Ze};console.log("Final Chart Data:",{labelsCount:Me.labels.length,datasetsCount:Me.datasets.length,historicalDataCount:Me.datasets[0].data.length,projectedDataCount:Me.datasets[1].data.length,historicalValid:Me.datasets[0].data.filter($=>$!==null).length,projectedValid:Me.datasets[1].data.filter($=>$!==null).length,firstFewHistorical:Me.datasets[0].data.slice(0,5),firstFewProjected:Me.datasets[1].data.slice(re.length,re.length+5)});const wt=[...Ce,...fe].filter($=>$!=null&&!isNaN($)&&typeof $=="number"&&$>0);if(wt.length>0){const $=Math.min(...wt),_=Math.max(...wt),J=_-$,ue=Math.max(J*.05,$*.01);Fe.current=Math.max(0,$-ue),Ie.current=_+ue,Ue.current.scales.y.min=Fe.current,Ue.current.scales.y.max=Ie.current}We.current=Me,i(Me),j(n),k(new Date);const Ut=`${r.toUpperCase()}-${n}`;B($=>{const _=$.filter(ue=>ue!==Ut),J=[Ut,..._].slice(0,5);return localStorage.setItem("projectionRecentSearches",JSON.stringify(J)),J})}catch(te){const K=te.message||"Failed to load chart data. Please check the symbol and try again.";m(K),x||i(null)}finally{l(!1)}},[r,n,u,G,T,U,ae,E]);d.useEffect(()=>{if(t.state?.loadProjection){const x=t.state.loadProjection;if(Oe(!0),ie(x.id||null),s(x.symbol||""),o(x.interval||"1D"),X(x.projectionModel||"primetetration"),w(x.projectionSteps||20),g(x.projectionHours||48),x.projectionModel==="primetetration"){de(x.base||3),Z(x.projectionCount||12);const te=x.primeDepthIndex!==void 0?x.primeDepthIndex:4;se(te),O(me[te]||31),Q(x.omegaHz||432),Y(x.useLambdaSchedule!==void 0?x.useLambdaSchedule:!0),b(x.useOmegaSchedule||!1)}if(x.chartData&&(x.chartData.historicalPrices&&Array.isArray(x.chartData.historicalPrices)&&(He.current=x.chartData.historicalPrices),x.chartData.labels&&x.chartData.datasets)){const te={labels:x.chartData.labels||[],datasets:(x.chartData.datasets||[]).map(ce=>({...ce,data:Array.isArray(ce.data)?ce.data.map(xe=>xe!=null?Number(xe):null):[]})),currentPrice:x.chartData.currentPrice!==void 0?Number(x.chartData.currentPrice):null,change:x.chartData.change!==void 0?Number(x.chartData.change):null,changePercent:x.chartData.changePercent!==void 0?Number(x.chartData.changePercent):null,projectedPrice:x.chartData.projectedPrice!==void 0?Number(x.chartData.projectedPrice):null,projectedChange:x.chartData.projectedChange!==void 0?Number(x.chartData.projectedChange):null,projectedChangePercent:x.chartData.projectedChangePercent!==void 0?Number(x.chartData.projectedChangePercent):null},K=te.datasets.flatMap(ce=>(ce.data||[]).filter(xe=>xe!=null&&!isNaN(xe)&&typeof xe=="number"&&xe>0));if(K.length>0){const ce=Math.min(...K),xe=Math.max(...K),be=xe-ce,Ve=Math.max(be*.05,ce*.01);Fe.current=Math.max(0,ce-Ve),Ie.current=xe+Ve,Ue.current.scales.y.min=Fe.current,Ue.current.scales.y.max=Ie.current}i(te),We.current=te}x.snapshotData&&x.projectionModel==="primetetration"&&y(x.snapshotData),window.history.replaceState({},document.title),setTimeout(()=>{Oe(!1)},5e3)}},[t.state]),d.useEffect(()=>{const x=localStorage.getItem("projectionRecentSearches");if(x)try{B(JSON.parse(x))}catch{}},[]);const Tt=()=>{r?.trim()?(I(!1),pe()):m("Please enter a stock symbol")},Sr=()=>{r&&r.trim()&&pe()},Cr=()=>{if(!r||!r.trim()){m("Please enter a stock symbol first");return}if(!a&&!f){m("No projection data to save. Please load chart data first.");return}De(!0),ye(!1);try{const x={symbol:r.toUpperCase().trim(),projectionModel:G,interval:n,projectionSteps:u,projectionHours:N,base:U,projectionCount:ae,primeDepth:me[T]||31,primeDepthIndex:T,omegaHz:ee,useLambdaSchedule:R,useOmegaSchedule:ge,beta:E,snapshotData:f?JSON.parse(JSON.stringify(f)):null,chartData:a?JSON.parse(JSON.stringify({labels:a.labels||[],datasets:a.datasets?a.datasets.map(K=>({label:K.label||"",data:Array.isArray(K.data)?K.data.map(ce=>ce!=null?Number(ce):null):[],borderColor:K.borderColor||"rgb(59, 130, 246)",backgroundColor:K.backgroundColor||"rgba(59, 130, 246, 0.1)",borderWidth:K.borderWidth||2,borderDash:K.borderDash||void 0,tension:K.tension!==void 0?K.tension:.4,fill:K.fill!==void 0?K.fill:!1,pointRadius:K.pointRadius!==void 0?K.pointRadius:2,pointHoverRadius:K.pointHoverRadius!==void 0?K.pointHoverRadius:6,spanGaps:K.spanGaps!==void 0?K.spanGaps:!1,showLine:K.showLine!==void 0?K.showLine:!0,stepped:K.stepped!==void 0?K.stepped:!1})):[],currentPrice:a.currentPrice!==void 0?Number(a.currentPrice):null,change:a.change!==void 0?Number(a.change):null,changePercent:a.changePercent!==void 0?Number(a.changePercent):null,projectedPrice:a.projectedPrice!==void 0?Number(a.projectedPrice):null,projectedChange:a.projectedChange!==void 0?Number(a.projectedChange):null,projectedChangePercent:a.projectedChangePercent!==void 0?Number(a.projectedChangePercent):null,historicalPrices:He.current?He.current.map(K=>Number(K)):[]})):null,savedAt:new Date().toISOString()};Fa(x),ye(!0),setTimeout(()=>ye(!1),3e3)}catch(x){console.error("Error saving projection:",x),m("Failed to save projection: "+x.message)}finally{De(!1)}},zt=x=>{x!==n&&(o(x),r&&r.trim()&&a&&setTimeout(()=>{pe()},100))},Lr=x=>{const[te,K]=x.split("-");s(te),o(K),I(!1),setTimeout(()=>{pe()},100)},Mr=x=>{x.key==="Enter"&&Tt()},Pr=()=>{if(Le.current){let x=null;Le.current.chartInstance?x=Le.current.chartInstance:Le.current.chart?x=Le.current.chart:Le.current&&(x=Le.current),x&&(typeof x.resetZoom=="function"&&x.resetZoom(),Fe.current!==null&&Ie.current!==null&&(x.scales&&x.scales.y?(x.scales.y.options.min=Fe.current,x.scales.y.options.max=Ie.current,x.update("none")):x.options&&x.options.scales&&x.options.scales.y&&(x.options.scales.y.min=Fe.current,x.options.scales.y.max=Ie.current,x.update("none"))))}};return d.useEffect(()=>()=>{},[]),e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Price Projection"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Prime Tetration Projections"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stock Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:$e,type:"text",id:"symbol",value:r,onChange:x=>{const te=x.target.value.toUpperCase();s(te),I(te.length===0&&H.length>0)},onKeyDown:Mr,onFocus:()=>{H.length>0&&!r&&I(!0)},onBlur:()=>{setTimeout(()=>I(!1),200)},placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),r&&e.jsx("button",{type:"button",onClick:()=>{s(""),I(!1),$e.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),q&&H.length>0&&!c&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",style:{zIndex:10},children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recent Searches"}),H.map(x=>{const[te,K]=x.split("-");return e.jsxs("button",{type:"button",onClick:()=>Lr(x),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:te}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:K})]},x)})]})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Interval"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>zt("1D"),className:`px-6 py-2 rounded-md font-medium transition-all ${n==="1D"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Day"}),e.jsx("button",{type:"button",onClick:()=>zt("1H"),className:`px-6 py-2 rounded-md font-medium transition-all ${n==="1H"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Hour"})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{htmlFor:"projectionSteps",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Projection Steps"}),e.jsxs("select",{id:"projectionSteps",value:u,onChange:x=>{const te=parseInt(x.target.value);w(te),a&&setTimeout(()=>pe(),100)},className:"w-full lg:w-32 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",children:[e.jsx("option",{value:10,children:"10 Steps"}),e.jsx("option",{value:20,children:"20 Steps"}),e.jsx("option",{value:40,children:"40 Steps"}),e.jsx("option",{value:60,children:"60 Steps"})]})]}),e.jsx("div",{className:"w-full lg:w-auto",children:e.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation(),Tt()},disabled:c||!r||!r.trim(),className:"w-full lg:w-auto px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 relative z-0",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})})]}),e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Projection Model Configuration"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Configure your projection parameters"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Projection Model"}),e.jsx("div",{className:"w-full px-4 py-3 border-2 border-purple-500 dark:border-purple-400 rounded-lg bg-purple-50 dark:bg-purple-900/20 transition-all text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Prime Tetration Projections"})]})})]}),G==="primetetration"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Core Parameters"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h5",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Seed, Frequency & Schedules"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Base (seed)"}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U===3,onChange:()=>{de(U===3?2:3),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:U===3?"3 (preferred)":"2 (Enigma-style)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Î© (Omega Hz)"}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ee===528,onChange:()=>{Q(ee===432?528:432),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),e.jsxs("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:[ee," Hz"]})]})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("label",{className:"inline-flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:x=>{Y(x.target.checked),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:"Use Î» Schedule (dub, kubt, k'anch)"})]}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:ge,onChange:x=>{b(x.target.checked),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Use Î© Schedule (vary frequencies)"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"projectionCount",className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Projections Count"}),e.jsx("input",{type:"number",id:"projectionCount",min:"1",max:"50",step:"1",value:ae,onChange:x=>{const te=x.target.value;if(te==="")return;const K=parseInt(te,10);!isNaN(K)&&K>=1&&K<=50&&(Z(K),a&&setTimeout(()=>pe(),100))},onBlur:x=>{const te=x.target.value;if(te===""||isNaN(parseInt(te,10)))Z(12),a&&setTimeout(()=>pe(),100);else{const K=parseInt(te,10);K<1?(Z(1),a&&setTimeout(()=>pe(),100)):K>50&&(Z(50),a&&setTimeout(()=>pe(),100))}},className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all text-sm font-medium bg-white",placeholder:"Enter number (1-50)"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Range: 1-50 projections"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Prime Depth"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:me.map(x=>{const te=me[T]===x;return e.jsx("button",{type:"button",onClick:()=>{const K=me.indexOf(x);se(K),O(x),a&&setTimeout(()=>pe(),100)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${te?"bg-purple-600 text-white shadow-md ring-2 ring-purple-400 dark:ring-purple-500":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-300 dark:border-gray-600 hover:border-purple-400 dark:hover:border-purple-500 hover:text-purple-600 dark:hover:text-purple-400"}`,children:x},x)})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Selected: ",me[T]||31]})]})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Be?e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Projection saved successfully!"]}):"Save this projection configuration to view it later on the Data page"})}),e.jsx("button",{onClick:Cr,disabled:ve||!r||!r.trim()||!a&&!f,className:"px-6 py-2.5 bg-gradient-to-r from-green-600 to-green-700 text-white text-sm font-semibold rounded-lg hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-md hover:shadow-lg transition-all flex items-center gap-2",title:!r||!r.trim()?"Enter a stock symbol first":!a&&!f?"Load chart data first":"Save projection to Data page",children:ve?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"Save Projection"})]})})]})]})]}),Ae&&e.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Projection loaded successfully! You can now edit the parameters and save changes."}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 mt-1",children:'All saved data has been restored. Modify any settings and click "Save Projection" to update.'})]}),e.jsx("button",{onClick:()=>Oe(!1),className:"ml-2 text-green-500 hover:text-green-700 dark:hover:text-green-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),h&&e.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:h}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check the symbol and try again"})]})]})}),a&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Price Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-5 border border-blue-200 dark:border-blue-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Current Price"}),e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:a?.currentPrice!==void 0&&a.currentPrice!==null?`$${a.currentPrice.toFixed(2)}`:e.jsx("span",{className:"text-gray-400",children:"N/A"})})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${a&&a.change>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Historical Change"}),a&&e.jsx("svg",{className:`w-4 h-4 ${a.change>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.change>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${a.change>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a?.change!==void 0&&a.change!==null?`${a.change>=0?"+":""}$${Math.abs(a.change).toFixed(2)}`:e.jsx("span",{className:"text-gray-400",children:"--"})}),a?.changePercent!==void 0&&a.changePercent!==null&&e.jsxs("p",{className:`text-xs mt-1 ${a.changePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a.changePercent>=0?"+":"",a.changePercent.toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-5 border border-purple-200 dark:border-purple-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Projected Price"}),e.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:a?.projectedPrice!==void 0&&a.projectedPrice!==null&&a.projectedPrice>0?(()=>{const x=a.projectedPrice;return x>=1e3?`$${x.toFixed(2)}`:x>=1?`$${x.toFixed(2)}`:`$${x.toFixed(4)}`})():e.jsx("span",{className:"text-gray-400",children:"N/A"})})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${a&&a.projectedChange>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Projected Change"}),a&&e.jsx("svg",{className:`w-4 h-4 ${a.projectedChange>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.projectedChange>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${a.projectedChange>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a?.projectedChange!==void 0&&a.projectedChange!==null?(()=>{const x=a.projectedChange;return Math.abs(x)>=1e3?`${x>=0?"+":""}$${Math.abs(x).toFixed(2)}`:Math.abs(x)>=1?`${x>=0?"+":""}$${Math.abs(x).toFixed(2)}`:`${x>=0?"+":""}$${Math.abs(x).toFixed(4)}`})():e.jsx("span",{className:"text-gray-400",children:"--"})}),a?.projectedChangePercent!==void 0&&a.projectedChangePercent!==null&&e.jsx("p",{className:`text-xs mt-1 ${a.projectedChangePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:(()=>{const x=a.projectedChangePercent;return Math.abs(x)>=1e3?`${x>=0?"+":""}${x.toFixed(0)}%`:Math.abs(x)>=100?`${x>=0?"+":""}${x.toFixed(1)}%`:`${x>=0?"+":""}${x.toFixed(2)}%`})()})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${a&&a.projectedChangePercent>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Change %"}),a&&e.jsx("svg",{className:`w-4 h-4 ${a.projectedChangePercent>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.projectedChangePercent>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${a.projectedChangePercent>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a?.projectedChangePercent!==void 0&&a.projectedChangePercent!==null?(()=>{const x=a.projectedChangePercent;return Math.abs(x)>=1e3?`${x>=0?"+":""}${x.toFixed(0)}%`:Math.abs(x)>=100?`${x>=0?"+":""}${x.toFixed(1)}%`:`${x>=0?"+":""}${x.toFixed(2)}%`})():e.jsx("span",{className:"text-gray-400",children:"--"})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Projected"})]})]})]}),p&&e.jsxs("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>D(!v),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Prime Tetration Parameters"})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/30",children:e.jsx("div",{className:"flex flex-col gap-4",children:G==="primetetration"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Depth Prime:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.depthPrime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Base:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.base})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Lines:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.lines})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Beta:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.beta})]})]}),p.phi&&Array.isArray(p.phi)&&e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Full Ï_d: [3,7,31,12,19,5,11,13,17,23,29,31]"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"+8 bits truncation active"})]})}),f&&f.lines&&f.lines.length>0&&e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Oscillation Stats:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.lines.slice(0,6).map((x,te)=>e.jsxs("div",{className:"text-xs font-mono text-gray-900 dark:text-white bg-purple-100 dark:bg-purple-900/30 px-3 py-2 rounded flex flex-col gap-1",children:[e.jsxs("span",{className:"font-semibold",children:["L",te+1,"[",x.triad.join("-"),"]"]}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["zc=",x.zeroCrossings,", tp=",x.turningPoints]})]},te))})]})})]}):null})})]}),(C||a)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:C?`Last updated: ${C.toLocaleString("en-US",{timeZone:"America/New_York"})}`:"Ready to load data"})]}),a&&e.jsxs("button",{type:"button",onClick:Sr,disabled:c,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${c?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Price Projection Chart"}),r&&P&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[r.toUpperCase()," - ",P," interval - ",u," step projection"]})]}),a&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Historical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500 border-2 border-dashed border-purple-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Projected"})]})]}),e.jsxs("button",{type:"button",onClick:Pr,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"Reset zoom and pan",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Zoom"]})]})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>L(!V),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"About Prime Tetration Projections"})]}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform ${V?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),V&&e.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:"Prime Tetration Projections use the full crystalline 12-dimensional lattice with triadic prime exponentiation towers. Each projection line represents a different prime triad [p1,p2,p3] with amplitude A = base^(p2^p3) mod 2^72. The lattice oscillator Z(n) aggregates all 12 Ï_d dimensions without dimension sweeping. All calculations use Q8 fixed-point truncation (+8 guard bits)."})})]})]}),e.jsx("div",{className:"h-[600px] relative",children:a&&Array.isArray(a.labels)&&a.labels.length>0&&Array.isArray(a.datasets)&&a.datasets.length>0&&a.datasets[0]&&Array.isArray(a.datasets[0].data)&&a.datasets[0].data.some(x=>x!=null)?e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-800/90 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx(qe,{ref:Le,data:{labels:Array.isArray(a.labels)?a.labels:[],datasets:Array.isArray(a.datasets)?a.datasets.map(x=>({...x,data:Array.isArray(x.data)?x.data:[]})):[]},options:{...Ue.current,responsive:!0,maintainAspectRatio:!1},redraw:!0},`chart-${r}-${n}-${u}-${a.labels?.length||0}`)]}):c?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading chart data..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:"No chart data available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please try searching again or check the symbol"})]})})})]})]})}ut.register(ht,xt,gt,mt,pt,bt,ft,Et,ur);const ar=[{name:"Blue",bg:"from-blue-50 to-blue-100",border:"border-blue-200",dark:"dark:from-blue-900/20 dark:to-blue-800/20 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{name:"Green",bg:"from-green-50 to-green-100",border:"border-green-200",dark:"dark:from-green-900/20 dark:to-green-800/20 dark:border-green-800",text:"text-green-700 dark:text-green-300"},{name:"Purple",bg:"from-purple-50 to-purple-100",border:"border-purple-200",dark:"dark:from-purple-900/20 dark:to-purple-800/20 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{name:"Yellow",bg:"from-yellow-50 to-yellow-100",border:"border-yellow-200",dark:"dark:from-yellow-900/20 dark:to-yellow-800/20 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300"},{name:"Pink",bg:"from-pink-50 to-pink-100",border:"border-pink-200",dark:"dark:from-pink-900/20 dark:to-pink-800/20 dark:border-pink-800",text:"text-pink-700 dark:text-pink-300"},{name:"Indigo",bg:"from-indigo-50 to-indigo-100",border:"border-indigo-200",dark:"dark:from-indigo-900/20 dark:to-indigo-800/20 dark:border-indigo-800",text:"text-indigo-700 dark:text-indigo-300"}];function ss(){const[t,r]=d.useState([]),[s,n]=d.useState(null),[o,a]=d.useState(!1),[i,c]=d.useState(!1),[l,h]=d.useState(null),[m,C]=d.useState(!0),[k,P]=d.useState(null),[j,u]=d.useState(""),[w,N]=d.useState("date"),[g,H]=d.useState("all"),[B,q]=d.useState("grid"),[I,G]=d.useState([]),[X,p]=d.useState(!0),A=_r(),V={responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(f){return f.parsed.y!==null&&f.parsed.y!==void 0?`${f.dataset.label}: $${f.parsed.y.toFixed(2)}`:""}}},zoom:{zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0,mode:"xy",modifierKey:null},limits:{x:{min:"original",max:"original"},y:{min:"original",max:"original"}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{maxTicksLimit:20,font:{size:11},autoSkip:!0}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(f){return f!=null&&!isNaN(f)?"$"+f.toFixed(2):""},font:{size:11}}}}};d.useEffect(()=>{L()},[]);const L=()=>{try{C(!0),P(null);const f=Ft();r(f||[])}catch(f){console.error("Error loading projections:",f),P("Failed to load projections")}finally{C(!1)}},M=d.useMemo(()=>{const f=new Set;return t.forEach(y=>{y.projectionModel&&f.add(y.projectionModel)}),Array.from(f).sort()},[t]),S=d.useMemo(()=>{let f=[...t];if(j){const y=j.toLowerCase();f=f.filter(E=>E.symbol?.toLowerCase().includes(y)||E.projectionModel?.toLowerCase().includes(y)||E.interval?.toLowerCase().includes(y))}return g!=="all"&&(f=f.filter(y=>y.projectionModel===g)),f.sort((y,E)=>{switch(w){case"symbol":return(y.symbol||"").localeCompare(E.symbol||"");case"model":return(y.projectionModel||"").localeCompare(E.projectionModel||"");case"date":default:return new Date(E.savedAt||0)-new Date(y.savedAt||0)}}),f},[t,j,g,w]),F=d.useMemo(()=>{const f=t.length,y={lattice:t.filter(Q=>Q.projectionModel==="lattice").length,primetetration:t.filter(Q=>Q.projectionModel==="primetetration").length,montecarlo:t.filter(Q=>Q.projectionModel==="montecarlo").length},E=t.filter(Q=>Q.chartData&&Q.chartData.labels&&Q.chartData.labels.length>0).length,z=f-E,ee=new Set(t.map(Q=>Q.symbol).filter(Boolean)).size;return{total:f,byModel:y,withCharts:E,withoutCharts:z,totalSymbols:ee}},[t]),W=f=>f?new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",v=f=>({lattice:"12-Fold Lattice",primetetration:"Prime Tetration",montecarlo:"Monte Carlo"})[f]||f||"Unknown",D=f=>ar[f%ar.length],T=f=>{n(f),a(!0)},se=f=>{h(f),c(!0)},he=()=>{if(l)try{Kt(l.id),G(f=>f.filter(y=>y!==l.id)),L(),c(!1),h(null)}catch(f){console.error("Error deleting projection:",f),P("Failed to delete projection")}},O=()=>{if(I.length!==0&&window.confirm(`Are you sure you want to delete ${I.length} projection(s)?`))try{I.forEach(f=>{try{Kt(f)}catch(y){console.error("Error deleting projection:",y)}}),G([]),L()}catch(f){console.error("Failed to delete projections:",f),P("Failed to delete projections")}},U=f=>{A("/projection",{state:{loadProjection:f}})},de=f=>{G(y=>y.includes(f)?y.filter(E=>E!==f):[...y,f])},ae=()=>{I.length===S.length?G([]):G(S.map(f=>f.id))},Z=()=>{const f=JSON.stringify(t,null,2),y=new Blob([f],{type:"application/json"}),E=URL.createObjectURL(y),z=document.createElement("a");z.href=E,z.download=`projections-${new Date().toISOString().split("T")[0]}.json`,z.click(),URL.revokeObjectURL(E)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Saved Projections"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and view your saved projection configurations and charts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{type:"button",onClick:()=>A("/projection"),className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Projection"]})})]}),X&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:F.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"12-Fold Lattice"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:F.byModel.lattice})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Prime Tetration"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:F.byModel.primetetration})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Monte Carlo"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:F.byModel.montecarlo})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"With Charts"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:F.withCharts})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl p-4 border border-pink-200 dark:border-pink-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-pink-700 dark:text-pink-300",children:"Filtered"}),e.jsx("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:S.length})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:j,onChange:f=>u(f.target.value),placeholder:"Search projections by symbol, model, or interval...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:g,onChange:f=>H(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Models"}),M.map(f=>e.jsx("option",{value:f,children:v(f)},f))]}),e.jsxs("select",{value:w,onChange:f=>N(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"symbol",children:"Sort by Symbol"}),e.jsx("option",{value:"model",children:"Sort by Model"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>q("grid"),className:`p-2 rounded ${B==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>q("list"),className:`p-2 rounded ${B==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("button",{type:"button",onClick:Z,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>p(!X),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:X?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),I.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[I.length," projection(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:O,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>G([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]})]})]}),k&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:k})})]}),e.jsx("button",{type:"button",onClick:()=>P(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),m&&t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading projections..."})]}):S.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:j||g!=="all"?"No projections found":"No projections saved"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:j||g!=="all"?"Try adjusting your search or filter criteria":"Save projections from the Projection page to view them here"}),!j&&g==="all"&&e.jsx("button",{type:"button",onClick:()=>A("/projection"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Projection Page"})]}):e.jsxs(e.Fragment,{children:[S.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:I.length===S.length&&S.length>0,onChange:ae,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",S.length,")"]})]}),e.jsx("div",{className:B==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:S.map((f,y)=>{const E=D(y);return e.jsxs("div",{className:`relative bg-gradient-to-br ${E.bg} ${E.dark} rounded-xl p-5 border ${E.border} ${E.dark} shadow-md hover:shadow-lg transition-all ${I.includes(f.id)?"ring-2 ring-blue-500":""}`,children:[B==="list"&&e.jsx("input",{type:"checkbox",checked:I.includes(f.id),onChange:()=>de(f.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:z=>z.stopPropagation()}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:f.symbol||"N/A"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:W(f.savedAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),T(f)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"View Projection",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),se(f)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Delete Projection",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Model:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:v(f.projectionModel)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Interval:"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:f.interval||"N/A"})]}),f.projectionModel==="primetetration"&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:["Base: ",f.base||3]}),e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:["Depth: ",f.primeDepth||"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/30 dark:border-gray-700/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),U(f)},className:"px-3 py-1 text-xs font-medium text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 rounded-lg transition-colors",children:"Load"}),e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),T(f)},className:"px-3 py-1 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:"View"})]}),B==="grid"&&e.jsx("input",{type:"checkbox",checked:I.includes(f.id),onChange:()=>de(f.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:z=>z.stopPropagation()})]})]},f.id)})}),S.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",S.length," of ",t.length," projections"]})]}),o&&s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>a(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4 max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",children:["Projection Details: ",s.symbol]}),s.chartData&&s.chartData.labels&&Array.isArray(s.chartData.labels)&&s.chartData.datasets&&Array.isArray(s.chartData.datasets)&&s.chartData.datasets.length>0?e.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Price Projection Chart"}),e.jsx("div",{className:"h-96 w-full",children:e.jsx(qe,{data:{labels:s.chartData.labels||[],datasets:(s.chartData.datasets||[]).map(f=>({...f,data:Array.isArray(f.data)?f.data:[]}))},options:V})}),s.chartData.currentPrice&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Current Price"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["$",s.chartData.currentPrice.toFixed(2)]})]}),s.chartData.change!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Change"}),e.jsxs("p",{className:`text-sm font-bold ${s.chartData.change>=0?"text-green-600":"text-red-600"}`,children:[s.chartData.change>=0?"+":"","$",s.chartData.change.toFixed(2)]})]}),s.chartData.changePercent!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Change %"}),e.jsxs("p",{className:`text-sm font-bold ${s.chartData.changePercent>=0?"text-green-600":"text-red-600"}`,children:[s.chartData.changePercent>=0?"+":"",s.chartData.changePercent.toFixed(2),"%"]})]}),s.chartData.projectedPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Projected Price"}),e.jsxs("p",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["$",s.chartData.projectedPrice.toFixed(2)]})]})]})]}):e.jsx("div",{className:"mb-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Chart data not available for this projection. The chart may not have been saved with the projection."})]})}),e.jsx("div",{className:"mt-2 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Model"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:v(s.projectionModel)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Interval"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.interval||"N/A"})]}),s.projectionModel==="primetetration"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Base (seed)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.base||3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Prime Depth"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.primeDepth||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Projections Count"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.projectionCount||12})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Omega Hz"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[s.omegaHz||432," Hz"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Lambda Schedule"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.useLambdaSchedule?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Omega Schedule"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.useOmegaSchedule?"Enabled":"Disabled"})]})]}),s.projectionSteps&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Projection Steps"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.projectionSteps})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Saved At"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:W(s.savedAt)})]})]})})]})})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:()=>U(s),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Load Projection"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Close"})]})]})]})}),i&&l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>c(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Projection"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Are you sure you want to delete the projection for"," ",e.jsx("span",{className:"font-medium",children:l.symbol}),"? This action cannot be undone."]})})]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:he,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{c(!1),h(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})}ut.register(ht,xt,gt,mt,pt,bt,ft);function os({monitorId:t}){const[r,s]=d.useState(null),[n,o]=d.useState(!0);d.useEffect(()=>{a();const i=setInterval(a,3e4);return()=>clearInterval(i)},[t]);const a=async()=>{try{const i=await fa(t,"response-time"),c=i.map(h=>{const m=h.time||h.timestamp;return new Date(m).toLocaleTimeString("en-US",{timeZone:"America/New_York"})}),l=i.map(h=>h.value||h.responseTime||0);s({labels:c,datasets:[{label:"Response Time (ms)",data:l,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]})}catch(i){console.error("Failed to load chart data:",i),o(!1)}finally{o(!1)}};return n||!r?e.jsx("div",{className:"h-48 flex items-center justify-center text-gray-500",children:"Loading chart..."}):e.jsx("div",{className:"h-48",children:e.jsx(qe,{data:r,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})}function ns({monitor:t,onEdit:r,onDelete:s,onTogglePause:n,onSelect:o,selected:a}){const[i,c]=d.useState(!1),h=(()=>{if(t.paused)return{color:"gray",text:"Paused"};const k=t.responseTime||t.avgResponseTime||0;return!(t.status==="up"||t.isUp)||k===0?{color:"red",text:"Down"}:k<1e3?{color:"green",text:"Operational"}:k<5e3?{color:"yellow",text:"Degraded"}:{color:"red",text:"Down"}})(),m=h.color,C=h.text;return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow p-4 transition-all ${a?"ring-2 ring-blue-500 dark:ring-blue-400":""} ${o?"cursor-pointer hover:shadow-lg":""}`,onClick:o,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-white mb-1",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.url})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`inline-flex items-center gap-x-1.5 py-1 px-2 rounded-full text-xs font-medium ${m==="green"?"bg-green-100 text-green-800":m==="yellow"?"bg-yellow-100 text-yellow-800":m==="red"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${m==="green"?"bg-green-600":m==="yellow"?"bg-yellow-600":m==="red"?"bg-red-600":"bg-gray-600"}`}),C]})})]}),t.price!==void 0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Current Price"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["$",t.price.toFixed(2)]}),t.change!==void 0&&e.jsxs("p",{className:`text-xs font-semibold mt-1 ${t.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[t.change>=0?"+":"","$",t.change.toFixed(2)," (",t.changePercent>=0?"+":"",t.changePercent.toFixed(2),"%)"]})]}),t.volume&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Volume"}),e.jsx("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200",children:t.volume.toLocaleString()})]}),t.marketState&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Market Status"}),e.jsx("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 capitalize",children:t.marketState==="REGULAR"?"Open":t.marketState.toLowerCase()})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Response Time"}),e.jsxs("p",{className:"text-base font-semibold text-gray-800 dark:text-white",children:[t.responseTime||t.avgResponseTime||0,"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Uptime"}),e.jsxs("p",{className:"text-base font-semibold text-gray-800 dark:text-white",children:[t.uptime||t.uptimePercent||0,"%"]})]})]}),t.lastCheck&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Last Check"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300",children:new Date(t.lastCheck).toLocaleString("en-US",{timeZone:"America/New_York"})})]})]}),t.lastCheck&&t.price===void 0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Last Check"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300",children:new Date(t.lastCheck).toLocaleString("en-US",{timeZone:"America/New_York"})})]}),i&&e.jsx("div",{className:"mb-4",children:e.jsx(os,{monitorId:t.id})}),e.jsxs("div",{className:"flex gap-2 flex-wrap",onClick:k=>k.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),c(!i)},className:"flex-1 min-w-[100px] py-1.5 px-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:i?"Hide Chart":"Show Chart"}),e.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),n(t.id)},className:"py-1.5 px-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:t.paused?"Resume":"Pause"}),e.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),r(t)},className:"py-1.5 px-2 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"Edit"}),e.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),s(t.id)},className:"py-1.5 px-2 text-xs font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Delete"})]})]})}function ls({isOpen:t,onClose:r,onSave:s,monitor:n}){const[o,a]=d.useState({name:"",symbol:"",url:"",type:"http"});d.useEffect(()=>{a(n?{name:n.name||"",symbol:n.symbol||n.id||"",url:n.url||"",type:n.type||"http"}:{name:"",symbol:"",url:"",type:"http"})},[n,t]);const i=l=>{l.preventDefault(),s(o)},c=l=>{l.target===l.currentTarget&&r()};return d.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs("div",{className:"fixed inset-0 z-[100] overflow-x-hidden overflow-y-auto",onClick:c,children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity"}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 w-full max-w-lg transform transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center py-4 px-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:n?"Edit Monitor":"Add Monitor"}),e.jsx("button",{type:"button",onClick:r,className:"flex justify-center items-center w-7 h-7 text-sm font-semibold rounded-full border border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Stock Symbol ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.symbol,onChange:l=>a({...o,symbol:l.target.value.toUpperCase()}),className:"py-2.5 px-3 block w-full border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"AAPL, GOOGL, MSFT, etc.",required:!0,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter a stock ticker symbol (e.g., AAPL, GOOGL, TSLA)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name (Optional)"}),e.jsx("input",{type:"text",value:o.name,onChange:l=>a({...o,name:l.target.value}),className:"py-2.5 px-3 block w-full border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Leave empty to use stock name"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Custom name for this monitor (optional)"})]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-3 py-4 px-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"py-2 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 shadow-sm hover:shadow-md transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n?"Update Monitor":"Create Monitor"]})]})]})]})})]}):null}function is(){const[t,r]=d.useState([]),[s,n]=d.useState(!0),[o,a]=d.useState(null),[i,c]=d.useState(!1),[l,h]=d.useState(null),[m,C]=d.useState("checking"),[k,P]=d.useState(""),[j,u]=d.useState("name"),[w,N]=d.useState("all"),[g,H]=d.useState("grid"),[B,q]=d.useState([]),[I,G]=d.useState(!0),[X,p]=d.useState(null),[A,V]=d.useState(!0),[L,M]=d.useState(30),S=d.useCallback(async()=>{try{n(!0),a(null);const y=await ga();r(y||[]),C("connected"),p(new Date)}catch(y){console.error("Failed to load monitors:",y),a(y.message||"Failed to load monitors"),C("disconnected")}finally{n(!1)}},[]);d.useEffect(()=>{S()},[S]),d.useEffect(()=>{if(!A)return;const y=setInterval(()=>{S()},L*1e3);return()=>clearInterval(y)},[A,L,S]);const F=d.useMemo(()=>{let y=[...t];if(k){const E=k.toLowerCase();y=y.filter(z=>z.name?.toLowerCase().includes(E)||z.symbol?.toLowerCase().includes(E)||z.id?.toLowerCase().includes(E))}return w!=="all"&&(y=y.filter(E=>{if(w==="operational"){const z=E.responseTime||E.avgResponseTime||0;return E.isUp&&z>0&&z<1e3}else if(w==="degraded"){const z=E.responseTime||E.avgResponseTime||0;return E.isUp&&z>=1e3&&z<5e3}else{if(w==="down")return!E.isUp||(E.responseTime||E.avgResponseTime||0)===0;if(w==="paused")return E.paused}return!0})),y.sort((E,z)=>{switch(j){case"price":return(z.price||0)-(E.price||0);case"change":return(z.changePercent||0)-(E.changePercent||0);case"status":const ee=E.paused?"paused":E.isUp?"operational":"down",Q=z.paused?"paused":z.isUp?"operational":"down";return ee.localeCompare(Q);case"name":default:return(E.name||E.id||"").localeCompare(z.name||z.id||"")}}),y},[t,k,w,j]),W=d.useMemo(()=>{const y=t.length,E=t.filter(b=>{const R=b.responseTime||b.avgResponseTime||0;return b.isUp&&R>0&&R<1e3&&!b.paused}).length,z=t.filter(b=>{const R=b.responseTime||b.avgResponseTime||0;return b.isUp&&R>=1e3&&R<5e3&&!b.paused}).length,ee=t.filter(b=>!b.isUp||(b.responseTime||b.avgResponseTime||0)===0||b.paused).length,Q=t.reduce((b,R)=>b+(R.price||0),0),ge=t.length>0?t.reduce((b,R)=>b+(R.changePercent||0),0)/t.length:0;return{total:y,operational:E,degraded:z,down:ee,totalValue:Q,avgChange:ge}},[t]),v=()=>{h(null),c(!0)},D=y=>{h(y),c(!0)},T=async y=>{try{l?await pa(l.id,y):await ma(y),c(!1),h(null),await S()}catch(E){console.error("Failed to save monitor:",E),a(E.message||"Failed to save monitor")}},se=async y=>{if(window.confirm("Are you sure you want to delete this monitor?"))try{await Yt(y),q(E=>E.filter(z=>z!==y)),await S()}catch(E){console.error("Failed to delete monitor:",E),a(E.message||"Failed to delete monitor")}},he=async()=>{if(B.length!==0&&window.confirm(`Are you sure you want to delete ${B.length} monitor(s)?`))try{await Promise.all(B.map(y=>Yt(y))),q([]),await S()}catch(y){console.error("Failed to delete monitors:",y),a(y.message||"Failed to delete monitors")}},O=async y=>{try{await Jt(y),await S()}catch(E){console.error("Failed to toggle pause:",E),a(E.message||"Failed to toggle pause")}},U=async y=>{if(B.length!==0)try{await Promise.all(B.map(E=>{const z=t.find(ee=>ee.id===E);return z&&z.paused!==y?Jt(E):Promise.resolve()})),await S()}catch(E){console.error("Failed to bulk pause/resume:",E),a(E.message||"Failed to bulk pause/resume")}},de=()=>{c(!1),h(null)},ae=y=>{q(E=>E.includes(y)?E.filter(z=>z!==y):[...E,y])},Z=()=>{B.length===F.length?q([]):q(F.map(y=>y.id))},f=()=>{const y=JSON.stringify(t,null,2),E=new Blob([y],{type:"application/json"}),z=URL.createObjectURL(E),ee=document.createElement("a");ee.href=z,ee.download=`monitors-${new Date().toISOString().split("T")[0]}.json`,ee.click(),URL.revokeObjectURL(z)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"API Monitoring Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor stock prices, API status, and performance metrics in real-time"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${m==="connected"?"bg-green-500 animate-pulse":m==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:m==="connected"?"Connected":m==="disconnected"?"Disconnected":"Checking..."})]}),e.jsxs("button",{type:"button",onClick:v,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Monitor"]})]})]}),I&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:W.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"Operational"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:W.operational})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Degraded"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:W.degraded})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-red-700 dark:text-red-300",children:"Down"}),e.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:W.down})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Total Value"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["$",(W.totalValue/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"Avg Change"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),e.jsxs("p",{className:`text-2xl font-bold ${W.avgChange>=0?"text-indigo-900 dark:text-indigo-100":"text-red-600 dark:text-red-400"}`,children:[W.avgChange>=0?"+":"",W.avgChange.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:k,onChange:y=>P(y.target.value),placeholder:"Search monitors by name or symbol...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:w,onChange:y=>N(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"operational",children:"Operational"}),e.jsx("option",{value:"degraded",children:"Degraded"}),e.jsx("option",{value:"down",children:"Down"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:j,onChange:y=>u(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price",children:"Sort by Price"}),e.jsx("option",{value:"change",children:"Sort by Change"}),e.jsx("option",{value:"status",children:"Sort by Status"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>H("grid"),className:`p-2 rounded ${g==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>H("list"),className:`p-2 rounded ${g==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:S,disabled:s,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Refresh Now",children:e.jsx("svg",{className:`w-5 h-5 ${s?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:y=>V(y.target.checked),className:"rounded"}),e.jsx("span",{children:"Auto"})]})]}),e.jsxs("button",{type:"button",onClick:f,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>G(!I),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:I?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),B.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[B.length," monitor(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-3 py-1.5 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:"Resume All"}),e.jsx("button",{type:"button",onClick:()=>U(!0),className:"px-3 py-1.5 text-sm font-medium text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 rounded-lg transition-colors",children:"Pause All"}),e.jsx("button",{type:"button",onClick:he,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>q([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]}),X&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:["Last refreshed: ",X.toLocaleTimeString("en-US",{timeZone:"America/New_York"}),A&&` â¢ Auto-refresh every ${L}s`]})]})]}),o&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:o})})]}),e.jsx("button",{type:"button",onClick:()=>a(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s&&t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading monitors..."})]}):F.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:k||w!=="all"?"No monitors found":"No monitors yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:k||w!=="all"?"Try adjusting your search or filter criteria":"Get started by adding your first stock monitor"}),!k&&w==="all"&&e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Monitor"})]}):e.jsxs(e.Fragment,{children:[F.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:B.length===F.length&&F.length>0,onChange:Z,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",F.length,")"]})]}),e.jsx("div",{className:g==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:F.map(y=>e.jsxs("div",{className:"relative",children:[g==="list"&&e.jsx("input",{type:"checkbox",checked:B.includes(y.id),onChange:()=>ae(y.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(ns,{monitor:y,onEdit:D,onDelete:se,onTogglePause:O,onSelect:g==="list"?()=>ae(y.id):null,selected:B.includes(y.id)})]},y.id))}),F.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",F.length," of ",t.length," monitors"]})]}),e.jsx(ls,{isOpen:i,onClose:de,onSave:T,monitor:l})]})}function ds({columns:t,rows:r,columnUnit:s,rowUnit:n,onColumnsChange:o,onRowsChange:a,onColumnUnitChange:i,onRowUnitChange:c}){return e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Columns"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:t,onChange:l=>o(parseInt(l.target.value)||1),className:"flex-1 py-2 px-3 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("select",{value:s,onChange:l=>i(l.target.value),className:"py-2 px-3 block border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"fr",children:"fr"}),e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"%",children:"%"}),e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"1fr",children:"1fr"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rows"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:r,onChange:l=>a(parseInt(l.target.value)||1),className:"flex-1 py-2 px-3 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("select",{value:n,onChange:l=>c(l.target.value),className:"py-2 px-3 block border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"fr",children:"fr"}),e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"%",children:"%"}),e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"1fr",children:"1fr"})]})]})]})]})}function cs({id:t,children:r}){const{attributes:s,listeners:n,setNodeRef:o,transform:a,transition:i}=dt({id:t}),c={transform:ct.Transform.toString(a),transition:i};return e.jsx("div",{ref:o,style:c,...s,...n,className:"cursor-move",children:r})}function us({columns:t,rows:r,columnUnit:s,rowUnit:n,items:o,onItemsChange:a}){const i=lr(it(cr),it(dr,{coordinateGetter:ir})),c=Array(t).fill(`1${s==="1fr"?"fr":s}`).join(" "),l=Array(r).fill(`1${n==="1fr"?"fr":n}`).join(" "),h=m=>{const{active:C,over:k}=m;if(C.id!==k.id){const P=o.findIndex(u=>u.id===C.id),j=o.findIndex(u=>u.id===k.id);a(lt(o,P,j))}};return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:e.jsx("div",{className:"grid gap-2 min-h-[400px]",style:{gridTemplateColumns:c,gridTemplateRows:l},children:e.jsx(st,{sensors:i,collisionDetection:ot,onDragEnd:h,children:e.jsx(nt,{items:o.map(m=>m.id),strategy:Yr,children:o.map(m=>e.jsx(cs,{id:m.id,children:e.jsx("div",{className:"bg-blue-500 text-white p-4 rounded-lg flex items-center justify-center font-semibold",children:m.label})},m.id))})})})})}function hs({columns:t,rows:r,columnUnit:s,rowUnit:n}){const[o,a]=d.useState(!1),i=Array(t).fill(`1${s==="1fr"?"fr":s}`).join(" "),c=Array(r).fill(`1${n==="1fr"?"fr":n}`).join(" "),l=`.grid-container {
  display: grid;
  grid-template-columns: ${i};
  grid-template-rows: ${c};
  gap: 1rem;
}`,h=async()=>{try{await navigator.clipboard.writeText(l),a(!0),setTimeout(()=>a(!1),2e3)}catch(m){console.error("Failed to copy:",m)}};return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Generated CSS"}),e.jsx("button",{type:"button",onClick:h,className:"py-1 px-3 text-sm font-medium text-blue-700 bg-blue-100 rounded-lg hover:bg-blue-200",children:o?"Copied!":"Copy"})]}),e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:e.jsx("code",{children:l})})]})}function xs(){const[t,r]=d.useState(3),[s,n]=d.useState(3),[o,a]=d.useState("fr"),[i,c]=d.useState("fr"),[l,h]=d.useState(()=>{const k=[];for(let P=1;P<=9;P++)k.push({id:`item-${P}`,label:`Item ${P}`});return k}),m=()=>{const k=`item-${Date.now()}`;h([...l,{id:k,label:`Item ${l.length+1}`}])},C=()=>{r(3),n(3),a("fr"),c("fr");const k=[];for(let P=1;P<=9;P++)k.push({id:`item-${P}`,label:`Item ${P}`});h(k)};return e.jsxs("div",{children:[e.jsx(ds,{columns:t,rows:s,columnUnit:o,rowUnit:i,onColumnsChange:r,onRowsChange:n,onColumnUnitChange:a,onRowUnitChange:c}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("button",{type:"button",onClick:m,className:"py-2 px-4 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Add Item"}),e.jsx("button",{type:"button",onClick:C,className:"py-2 px-4 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Reset"})]}),e.jsx(us,{columns:t,rows:s,columnUnit:o,rowUnit:i,items:l,onItemsChange:h}),e.jsx(hs,{columns:t,rows:s,columnUnit:o,rowUnit:i})]})}function gs(){const[t,r]=d.useState(()=>{const v=localStorage.getItem("darkMode");return v?JSON.parse(v):!1}),[s,n]=d.useState({finnhub:"demo",massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG",fibhub:""}),[o,a]=d.useState(()=>{const v=localStorage.getItem("refreshInterval");return v?parseInt(v,10):30}),[i,c]=d.useState(()=>{const v=localStorage.getItem("defaultSymbols");return v?JSON.parse(v):["AAPL","GOOGL","MSFT","TSLA","AMZN"]}),[l,h]=d.useState(""),[m,C]=d.useState(()=>{const v=localStorage.getItem("notificationSettings");return v?JSON.parse(v):{priceAlerts:!0,apiStatusAlerts:!0,errorAlerts:!0,soundEnabled:!1}}),[k,P]=d.useState(()=>{const v=localStorage.getItem("generalSettings");return v?JSON.parse(v):{autoRefresh:!0,showTooltips:!0,compactMode:!1}}),[j,u]=d.useState("appearance"),[w,N]=d.useState({message:"",type:""}),[g,H]=d.useState({finnhub:!1,massive:!1,fibhub:!1}),[B,q]=d.useState(!1);d.useEffect(()=>{const v=localStorage.getItem("apiKeys");if(v)try{const D=JSON.parse(v);n({...s,...D})}catch(D){console.error("Error loading API keys:",D)}},[]),d.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(t)),G("Dark mode updated","success")},[t]);const I=d.useCallback((v,D,T)=>{try{localStorage.setItem(v,typeof D=="object"?JSON.stringify(D):D),G(T||"Settings saved","success"),q(!1)}catch(se){G("Failed to save settings","error"),console.error("Save error:",se)}},[]),G=(v,D)=>{N({message:v,type:D}),setTimeout(()=>{N({message:"",type:""})},3e3)},X=(v,D)=>{n({...s,[v]:D}),q(!0)},p=()=>{I("apiKeys",s,"API keys saved successfully")},A=v=>{const D=parseInt(v,10)||30;a(Math.max(5,Math.min(300,D))),I("refreshInterval",D.toString(),"Refresh interval updated")},V=()=>{const v=l.toUpperCase().trim();if(v&&!i.includes(v)&&v.length<=10){const D=[...i,v];c(D),h(""),I("defaultSymbols",D,"Symbol added")}},L=v=>{const D=i.filter(T=>T!==v);c(D),I("defaultSymbols",D,"Symbol removed")},M=(v,D)=>{const T={...m,[v]:D};C(T),I("notificationSettings",T,"Notification settings updated")},S=(v,D)=>{const T={...k,[v]:D};P(T),I("generalSettings",T,"General settings updated")},F=()=>{window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(localStorage.removeItem("apiKeys"),localStorage.removeItem("refreshInterval"),localStorage.removeItem("defaultSymbols"),localStorage.removeItem("notificationSettings"),localStorage.removeItem("generalSettings"),n({finnhub:"demo",massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG",fibhub:""}),a(30),c(["AAPL","GOOGL","MSFT","TSLA","AMZN"]),C({priceAlerts:!0,apiStatusAlerts:!0,errorAlerts:!0,soundEnabled:!1}),P({autoRefresh:!0,showTooltips:!0,compactMode:!1}),G("All settings reset to defaults","success"),q(!1))},W=[{id:"appearance",label:"Appearance"},{id:"api",label:"API Keys"},{id:"data",label:"Data & Refresh"},{id:"notifications",label:"Notifications"},{id:"general",label:"General"},{id:"tools",label:"Tools"}];return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your application preferences and configuration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[B&&e.jsxs("span",{className:"text-sm text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Unsaved changes"]}),e.jsxs("button",{onClick:F,className:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset All"]})]})]}),w.message&&e.jsx("div",{className:`rounded-lg p-4 mb-4 border ${w.type==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[w.type==="success"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-medium",children:w.message})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:W.map(v=>e.jsx("button",{onClick:()=>u(v.id),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${j===v.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:v.label},v.id))})})]}),e.jsxs("div",{className:"mt-6",children:[j==="appearance"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Appearance Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customize the look and feel of the application"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Dark Mode"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:"Recommended"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Switch between light and dark theme for better viewing experience"})]}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,role:"switch","aria-checked":t,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${t?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Theme Tip"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:"Dark mode reduces eye strain in low-light environments and can help save battery on OLED displays."})]})]})})]})]}),j==="api"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"API Keys"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your API keys for different data sources. Keys are stored locally in your browser."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Finnhub API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g.finnhub?"text":"password",value:s.finnhub,onChange:v=>X("finnhub",v.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Finnhub API key"}),e.jsx("button",{type:"button",onClick:()=>H({...g,finnhub:!g.finnhub}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",title:g.finnhub?"Hide":"Show",children:g.finnhub?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("a",{href:"https://finnhub.io/register",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Get free API key"]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"â¢ Free tier: 60 calls/minute"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Massive API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g.massive?"text":"password",value:s.massive,onChange:v=>X("massive",v.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Massive API key"}),e.jsx("button",{type:"button",onClick:()=>H({...g,massive:!g.massive}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:g.massive?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Optional backup API source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Fibhub API Key (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g.fibhub?"text":"password",value:s.fibhub||"",onChange:v=>X("fibhub",v.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Fibhub API key (optional)"}),e.jsx("button",{type:"button",onClick:()=>H({...g,fibhub:!g.fibhub}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:g.fibhub?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"For news and additional data sources"})]}),B&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:p,className:"px-6 py-2.5 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save API Keys"]})})]})]}),j==="data"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Data Refresh"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure how often data is automatically refreshed"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:["Refresh Interval: ",e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:[o," seconds"]})]}),e.jsx("input",{type:"range",min:"5",max:"300",step:"5",value:o,onChange:v=>A(v.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-blue-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:"5s (Fast)"}),e.jsx("span",{children:"150s (Balanced)"}),e.jsx("span",{children:"300s (Slow)"})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[e.jsx("strong",{children:"Tip:"})," Lower intervals provide more real-time data but may consume more API quota. Recommended: 30-60 seconds for most use cases."]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Default Stock Symbols"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure default stock symbols to monitor automatically"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:v=>h(v.target.value.toUpperCase()),onKeyPress:v=>v.key==="Enter"&&V(),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter symbol (e.g., AAPL, TSLA)",maxLength:"10"}),e.jsx("button",{onClick:V,disabled:!l.trim()||i.includes(l.toUpperCase().trim()),className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Add"})]}),i.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(v=>e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-semibold",children:v}),e.jsx("button",{onClick:()=>L(v),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},v))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{children:"No symbols added yet"})]})]})]})]}),j==="notifications"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure what notifications you want to receive"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"priceAlerts",label:"Price Alerts",desc:"Get notified when prices reach your target levels"},{key:"apiStatusAlerts",label:"API Status Alerts",desc:"Get notified when API endpoints change status"},{key:"errorAlerts",label:"Error Alerts",desc:"Get notified when errors occur in the application"},{key:"soundEnabled",label:"Sound Notifications",desc:"Play sound when notifications appear"}].map(({key:v,label:D,desc:T})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white block mb-1",children:D}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:T})]}),e.jsx("button",{type:"button",onClick:()=>M(v,!m[v]),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${m[v]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${m[v]?"translate-x-6":"translate-x-1"}`})})]},v))})]}),j==="general"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"General Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"General application preferences and behavior"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"autoRefresh",label:"Auto Refresh",desc:"Automatically refresh data at configured intervals"},{key:"showTooltips",label:"Show Tooltips",desc:"Display helpful tooltips throughout the application"},{key:"compactMode",label:"Compact Mode",desc:"Use a more compact layout to fit more information"}].map(({key:v,label:D,desc:T})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white block mb-1",children:D}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:T})]}),e.jsx("button",{type:"button",onClick:()=>S(v,!k[v]),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${k[v]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${k[v]?"translate-x-6":"translate-x-1"}`})})]},v))})]}),j==="tools"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"CSS Grid Generator"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create dynamic layouts by configuring your grid columns and rows, then drag elements to position them."})]}),e.jsx(xs,{})]})]})]})}const sr=[{ratio:0,label:"0.0"},{ratio:.5,label:"0.5"},{ratio:1,label:"1.0"},{ratio:1.382,label:"1.382"},{ratio:1.618,label:"1.618"},{ratio:2,label:"2.0"},{ratio:2.382,label:"2.382"},{ratio:2.618,label:"2.618"},{ratio:3,label:"3.0"},{ratio:3.382,label:"3.382"},{ratio:3.618,label:"3.618"},{ratio:4.24,label:"4.24"},{ratio:5.08,label:"5.08"},{ratio:6.86,label:"6.86"},{ratio:11.01,label:"11.01"}],or=[{ratio:-11.01,label:"-11.01"},{ratio:-6.86,label:"-6.86"},{ratio:-5.08,label:"-5.08"},{ratio:-4.24,label:"-4.24"},{ratio:-3.618,label:"-3.618"},{ratio:-3.382,label:"-3.382"},{ratio:-3,label:"-3.0"},{ratio:-2.618,label:"-2.618"},{ratio:-2.382,label:"-2.382"},{ratio:-2,label:"-2.0"},{ratio:-1.618,label:"-1.618"},{ratio:-1.382,label:"-1.382"},{ratio:-1,label:"-1.0"},{ratio:-.5,label:"-0.5"}];function ms(){const[t,r]=d.useState("AAPL"),[s,n]=d.useState(2),[o,a]=d.useState(!1),[i,c]=d.useState(null),[l,h]=d.useState(null),[m,C]=d.useState(!1),[k,P]=d.useState(!1),j=d.useRef(null),u=d.useRef(null),w=async(p,A,V)=>{try{const S=await Re(p,"1d",A==="ytd"?"ytd":"1y");if(S.source!=="yahoo")throw new Error("Yahoo Finance data is required for chart display. Please try again.");const F=S.data;if(!F||!F.chart||!F.chart.result||F.chart.result.length===0)throw new Error("No data available for this symbol");const W=F.chart.result[0],v=W.meta,D=W.indicators?.quote?.[0],T=W.timestamp;if(!D)throw new Error("No quote data available for this symbol");if(!T||T.length===0)throw new Error("No timestamp data available");let se,he,O;if(V==="first_day"){const Z=new Date().getFullYear(),f=[];for(let Q=0;Q<T.length;Q++){const ge=new Date(T[Q]*1e3);ge.getFullYear()===Z&&f.push({index:Q,date:ge,timestamp:T[Q],high:D.high[Q],low:D.low[Q],open:D.open[Q],close:D.close[Q]})}if(f.length===0)throw new Error("No data available for current year");f.sort((Q,ge)=>Q.timestamp-ge.timestamp);const y=f[0];if(y.high===null||y.low===null||y.open===null||y.close===null)throw new Error("Invalid data for first trading day");const E=y.close>y.open;E?(se=y.high,he=y.low):(se=y.low,he=y.high);const z=y.date,ee=E?"BULLISH":"BEARISH";O=`First Trading Day: ${z.toLocaleDateString()} (${ee} - Open: ${y.open.toFixed(2)}, High: ${y.high.toFixed(2)}, Low: ${y.low.toFixed(2)}, Close: ${y.close.toFixed(2)})`,console.log("First trading day anchor:",{date:z.toLocaleDateString(),dateTime:z.toLocaleString(),candleType:ee,actualHigh:y.high,actualLow:y.low,open:y.open,close:y.close,fibonacciHigh:se,fibonacciLow:he,note:E?"0=Low, 1=High":"0=High, 1=Low",totalCandlesInYear:f.length})}const U=D.close.filter(Z=>Z!==null),de=U[U.length-1],ae=[];for(let Z=0;Z<T.length;Z++)if(D.open[Z]!==null&&D.high[Z]!==null&&D.low[Z]!==null&&D.close[Z]!==null){const f=Math.floor(Number(T[Z])),y=Number(D.open[Z]),E=Number(D.high[Z]),z=Number(D.low[Z]),ee=Number(D.close[Z]);!isNaN(y)&&!isNaN(E)&&!isNaN(z)&&!isNaN(ee)&&y>0&&E>0&&z>0&&ee>0&&f>0&&E>=z&&E>=Math.max(y,ee)&&z<=Math.min(y,ee)&&ae.push({time:f,open:y,high:E,low:z,close:ee})}if(ae.sort((Z,f)=>Z.time-f.time),console.log("Chart data prepared:",{totalCandles:ae.length,firstCandle:ae[0],lastCandle:ae[ae.length-1],sampleData:ae.slice(0,3)}),ae.length===0)throw new Error("No valid chart data points found. Please check the symbol and try again.");return{symbol:v.symbol,current:de,high:se,low:he,currency:v.currency||"USD",timestamps:T,quotes:D,anchorInfo:O,chartData:ae}}catch(L){throw console.error("Error fetching market data:",L),console.error("Error stack:",L.stack),new Error(L.message||"Unable to fetch market data. Please verify the symbol and try again.")}},N=async()=>{const p=t.trim().toUpperCase();if(!p){c("Please enter a valid symbol");return}a(!0),c(null),C(!1);try{console.log("Fetching data for:",p,"ytd","Anchor: first_day","Precision:",s);const A=await w(p,"ytd","first_day");console.log("Data received:",A),h(A),C(!0)}catch(A){console.error("Error in fetchDataAndCalculate:",A),c(A.message||"Unable to fetch market data. Please verify the symbol and try again.")}finally{a(!1)}},g=(p,A,V=2)=>{if(!p||!A||p<=A)return[];const L=p-A,M=[];return sr.forEach(S=>{const F=S.ratio===0||S.ratio===1,W=A+L*S.ratio;M.push({y:W,borderColor:"#3B82F6",strokeDashArray:F?0:[5,5],borderWidth:F?2:1,opacity:F?1:.7,label:{borderColor:"#3B82F6",style:{color:"#fff",background:"#3B82F6",fontSize:"11px",fontWeight:600},text:`${S.label} (${W.toFixed(V)})`,position:"right"}})}),or.forEach(S=>{const F=A+L*S.ratio;M.push({y:F,borderColor:"#EF4444",strokeDashArray:[5,5],borderWidth:1,opacity:.7,label:{borderColor:"#EF4444",style:{color:"#fff",background:"#EF4444",fontSize:"11px",fontWeight:600},text:`${S.label} (${F.toFixed(V)})`,position:"right"}})}),M},H=(p,A,V,L=2)=>{if(!j.current||!p||p.length===0)return console.error("Chart container ref is null or no data"),!1;if(u.current){try{u.current.destroy()}catch(T){console.warn("Error destroying existing chart:",T)}u.current=null}const M=j.current,S=document.documentElement.classList.contains("dark"),F=M.clientWidth||M.offsetWidth||800,W=M.clientHeight||M.offsetHeight||600,v=p.map(T=>({x:T.time*1e3,y:[T.open,T.high,T.low,T.close]})),D=A&&V?g(A,V,L):[];console.log("Fibonacci annotations calculated:",{count:D.length,high:A,low:V,range:A-V,sample:D.slice(0,3)}),D.length>0&&(console.log("First annotation structure:",JSON.stringify(D[0],null,2)),console.log("Last annotation structure:",JSON.stringify(D[D.length-1],null,2)));try{const T={series:[{name:"Price",data:v}],chart:{type:"candlestick",width:F,height:W,toolbar:{show:!0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0,type:"x",autoScaleYaxis:!0}},plotOptions:{candlestick:{colors:{upward:"#22C55E",downward:"#EF4444"}}},xaxis:{type:"datetime",labels:{show:!0,style:{colors:S?"#9ca3af":"#6b7280",fontSize:"12px",fontFamily:"Inter, ui-sans-serif",fontWeight:400},datetimeUTC:!1,format:"MMM dd"},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:S?"#9ca3af":"#6b7280",fontSize:"12px",fontFamily:"Inter, ui-sans-serif",fontWeight:400}}},grid:{borderColor:S?"#374151":"#e5e7eb",strokeDashArray:2},...D.length>0&&{annotations:{yaxis:D}},tooltip:{enabled:!0,theme:S?"dark":"light",custom:function({seriesIndex:he,dataPointIndex:O,w:U}){const de=U.globals.initialSeries[he].data[O],Z=new Date(de.x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),[f,y,E,z]=de.y,ee=2;return`
              <div class="px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg">
                <div class="text-xs font-semibold text-gray-900 dark:text-white mb-1">${Z}</div>
                <div class="text-xs text-gray-600 dark:text-gray-400">
                  <div>Open: <span class="font-semibold">${f.toFixed(ee)}</span></div>
                  <div>High: <span class="font-semibold text-green-600">${y.toFixed(ee)}</span></div>
                  <div>Low: <span class="font-semibold text-red-600">${E.toFixed(ee)}</span></div>
                  <div>Close: <span class="font-semibold">${z.toFixed(ee)}</span></div>
                </div>
              </div>
            `}}},se=new Jr(M,T);return u.current=se,se.render().then(()=>{console.log("ApexCharts rendered successfully with",D.length,"Fibonacci annotations"),D.length>0&&console.log("First annotation:",D[0])}).catch(he=>{console.error("Error rendering ApexCharts:",he)}),console.log("ApexCharts inline candles chart initialized successfully"),!0}catch(T){return console.error("Error initializing ApexCharts:",T),!1}},B=(p,A,V,L=2)=>{if(!Array.isArray(p)||p.length===0)return console.warn("No price data to show"),!1;const M=p.map(S=>{let F;if(typeof S.time=="number")F=Math.floor(S.time);else if(typeof S.time=="string"){const se=new Date(S.time);if(F=Math.floor(se.getTime()/1e3),isNaN(F))return null}else if(S.timestamp)F=Math.floor(Number(S.timestamp));else return null;const W=Number(S.open),v=Number(S.high),D=Number(S.low),T=Number(S.close);return isNaN(W)||isNaN(v)||isNaN(D)||isNaN(T)||W<=0||v<=0||D<=0||T<=0||F<=0||v<D||v<Math.max(W,T)||D>Math.min(W,T)?null:{time:F,open:W,high:v,low:D,close:T}}).filter(S=>S!==null).sort((S,F)=>S.time-F.time);return M.length===0?(console.error("No valid price data after formatting"),!1):H(M,A,V,L)},q=(p,A)=>{const V=p-A,L=sr.map(S=>({...S,price:A+V*S.ratio})),M=or.map(S=>({...S,price:A+V*S.ratio}));return{positiveLevels:L,negativeLevels:M}},I=p=>{p.key==="Enter"&&N()};d.useEffect(()=>{if(!m||!l||!l.chartData||!Array.isArray(l.chartData)||l.chartData.length===0){if(u.current){try{u.current.destroy()}catch{}u.current=null}P(!1);return}let p=!0,A=null,V=0;const L=20,M=()=>{if(!p)return;if(V++,V>L){console.error("Max retries reached for chart initialization"),P(!1);return}if(!j.current){console.log("Container not ready, retrying...",V),A=setTimeout(M,100);return}const S=j.current,F=S.clientWidth||S.offsetWidth,W=S.clientHeight||S.offsetHeight;if(!F||F===0||!W||W===0){console.log("Container has no dimensions, retrying...",{containerWidth:F,containerHeight:W,retryCount:V}),A=setTimeout(M,100);return}console.log("Container ready, initializing chart...",{containerWidth:F,containerHeight:W}),l.chartData&&l.chartData.length>0&&(console.log("Updating chart with",l.chartData.length,"data points"),B(l.chartData,l.high,l.low,s)?(P(!0),console.log("Chart ready and displayed with Fibonacci levels")):(console.error("Failed to update chart with data"),P(!1)))};return A=setTimeout(M,50),()=>{p=!1,A&&clearTimeout(A)}},[m,l?.chartData?.length,l?.high,l?.low,s]),d.useEffect(()=>{let p=!0;const A=setTimeout(()=>{p&&t&&N()},500);return()=>{p=!1,clearTimeout(A)}},[]),d.useEffect(()=>()=>{if(u.current){try{u.current.destroy()}catch(p){console.warn("Error destroying chart on unmount:",p)}u.current=null}},[]);const{positiveLevels:G=[],negativeLevels:X=[]}=l?q(l.high,l.low):{};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"ð Fibonacci Retracement Calculator"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Calculate Fibonacci levels with real-time market data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Market Data Input"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Symbol (Stock/Crypto)"}),e.jsx("input",{type:"text",id:"symbol",value:t,onChange:p=>r(p.target.value),onKeyPress:I,placeholder:"e.g., AAPL, TSLA, BTC-USD",className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800 transition-colors"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Period"}),e.jsx("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-2 border-blue-500 dark:border-blue-400 rounded-lg text-center text-base font-semibold text-blue-600 dark:text-blue-400",children:"Year to Date (YTD)"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fibonacci Anchor"}),e.jsx("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-2 border-blue-500 dark:border-blue-400 rounded-lg text-center text-base font-semibold text-blue-600 dark:text-blue-400",children:"First Trading Day of Year"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Decimal Precision"}),e.jsx("div",{className:"flex gap-2",children:[2,3].map(p=>e.jsx("button",{className:`flex-1 px-4 py-2.5 rounded-lg font-semibold transition-all ${s===p?"bg-blue-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-300 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400"}`,onClick:()=>n(p),children:p},p))})]}),e.jsx("button",{className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-60 disabled:cursor-not-allowed mt-2",onClick:N,disabled:o,children:o?"Calculating...":"Calculate Fibonacci Levels"}),e.jsx("div",{className:"mt-5 p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded",children:e.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:[e.jsx("strong",{children:"How to use:"})," Enter a stock symbol (e.g., AAPL, GOOGL) or crypto symbol (e.g., BTC-USD, ETH-USD) and click calculate. Fibonacci levels will be anchored to the first trading day of the current year."]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Current Market Data"}),l&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg border border-gray-200 dark:border-gray-600 mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[l.symbol," - ",l.anchorInfo?.split("(")[0].trim()||"Period High/Low"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Current Price:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[l.currency," ",l.current.toFixed(s)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Period High:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[l.currency," ",l.high.toFixed(s)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Period Low:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[l.currency," ",l.low.toFixed(s)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Range:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[l.currency," ",(l.high-l.low).toFixed(s),"(",((l.high-l.low)/l.low*100).toFixed(2),"%)"]})]})]})]}),i&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 rounded text-sm mb-4",children:i}),o&&e.jsx("div",{className:"text-center py-6 text-blue-600 dark:text-blue-400 font-medium",children:"Fetching market data..."})]})]}),m&&l&&e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[450px_1fr] gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Fibonacci Extension Levels"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-3 text-sm",children:"ð Positive Levels"}),e.jsx("div",{className:"space-y-2",children:G.map((p,A)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:p.label}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:p.price.toFixed(s)})]},A))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-3 text-sm",children:"ð Negative Levels"}),e.jsx("div",{className:"space-y-2",children:X.map((p,A)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:p.label}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:p.price.toFixed(s)})]},A))})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded",children:e.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:[e.jsx("strong",{children:"Fibonacci Anchoring:"})," BULLISH candle: 0 = Low, 1 = High. BEARISH candle: 0 = High, 1 = Low. Levels extend from these anchor points."]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Price Chart"}),o&&e.jsx("div",{className:"text-center py-6 text-blue-600 dark:text-blue-400 font-medium",children:"Loading chart data..."}),i&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 rounded text-sm mb-4",children:i}),m&&l&&l.chartData&&e.jsx("div",{className:"w-full",children:e.jsx("div",{ref:j,id:"hs-sparklines-candles-chart",className:"w-full",style:{height:"600px",minHeight:"600px",position:"relative"},children:!k&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 dark:text-gray-400 z-10 bg-white dark:bg-gray-800 rounded",style:{zIndex:10,pointerEvents:"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto mb-2"}),e.jsx("p",{children:"Initializing chart..."})]})})})})]})]})]})}const Te=[{name:"Blue",bg:"from-blue-50 to-blue-100",border:"border-blue-200",dark:"dark:from-blue-900/20 dark:to-blue-800/20 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{name:"Green",bg:"from-green-50 to-green-100",border:"border-green-200",dark:"dark:from-green-900/20 dark:to-green-800/20 dark:border-green-800",text:"text-green-700 dark:text-green-300"},{name:"Yellow",bg:"from-yellow-50 to-yellow-100",border:"border-yellow-200",dark:"dark:from-yellow-900/20 dark:to-yellow-800/20 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300"},{name:"Purple",bg:"from-purple-50 to-purple-100",border:"border-purple-200",dark:"dark:from-purple-900/20 dark:to-purple-800/20 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{name:"Pink",bg:"from-pink-50 to-pink-100",border:"border-pink-200",dark:"dark:from-pink-900/20 dark:to-pink-800/20 dark:border-pink-800",text:"text-pink-700 dark:text-pink-300"},{name:"Indigo",bg:"from-indigo-50 to-indigo-100",border:"border-indigo-200",dark:"dark:from-indigo-900/20 dark:to-indigo-800/20 dark:border-indigo-800",text:"text-indigo-700 dark:text-indigo-300"}];function ps(){const[t,r]=d.useState(()=>{try{const b=localStorage.getItem("notes");if(b)return JSON.parse(b)}catch(b){console.error("Error loading notes:",b)}return[]}),[s,n]=d.useState(!1),[o,a]=d.useState(null),[i,c]=d.useState(!1),[l,h]=d.useState(null),[m,C]=d.useState(""),[k,P]=d.useState("date"),[j,u]=d.useState("all"),[w,N]=d.useState("grid"),[g,H]=d.useState([]),[B,q]=d.useState(!0),[I,G]=d.useState(""),[X,p]=d.useState(""),[A,V]=d.useState([]),[L,M]=d.useState(""),[S,F]=d.useState(Te[0]),[W,v]=d.useState(null);d.useEffect(()=>{try{localStorage.setItem("notes",JSON.stringify(t)),v(new Date)}catch(b){console.error("Error saving notes:",b),a("Failed to save notes to local storage")}},[t]);const D=d.useMemo(()=>{const b=new Set;return t.forEach(R=>{R.tags&&Array.isArray(R.tags)&&R.tags.forEach(Y=>b.add(Y))}),Array.from(b).sort()},[t]),T=d.useMemo(()=>{let b=[...t];if(m){const R=m.toLowerCase();b=b.filter(Y=>Y.title?.toLowerCase().includes(R)||Y.content?.toLowerCase().includes(R)||Y.tags?.some(ve=>ve.toLowerCase().includes(R)))}return j!=="all"&&(b=b.filter(R=>R.tags&&R.tags.includes(j))),b.sort((R,Y)=>{switch(k){case"title":return(R.title||"").localeCompare(Y.title||"");case"color":return(R.color?.name||"").localeCompare(Y.color?.name||"");case"date":default:return new Date(Y.updatedAt||Y.createdAt)-new Date(R.updatedAt||R.createdAt)}}),b},[t,m,j,k]),se=d.useMemo(()=>{const b=t.length,R={};Te.forEach(ye=>{R[ye.name]=t.filter(Ae=>Ae.color?.name===ye.name).length});const Y=t.filter(ye=>ye.tags&&ye.tags.length>0).length,ve=b-Y,De=D.length,Be=b>0?t.reduce((ye,Ae)=>ye+(Ae.tags?.length||0),0)/b:0;return{total:b,byColor:R,withTags:Y,withoutTags:ve,totalTags:De,avgTagsPerNote:Be}},[t,D.length]),he=()=>{h(null),G(""),p(""),V([]),M(""),F(Te[0]),c(!0)},O=b=>{h(b),G(b.title||""),p(b.content||""),V(b.tags||[]),M(""),F(b.color||Te[0]),c(!0)},U=()=>{if(!I.trim()&&!X.trim()){a("Note must have at least a title or content");return}try{const b=new Date().toISOString();if(l)r(R=>R.map(Y=>Y.id===l.id?{...Y,title:I.trim(),content:X.trim(),tags:A,color:S,updatedAt:b}:Y));else{const R={id:Date.now().toString(),title:I.trim(),content:X.trim(),tags:A,color:S,createdAt:b,updatedAt:b};r(Y=>[R,...Y])}c(!1),h(null),a(null)}catch(b){console.error("Failed to save note:",b),a(b.message||"Failed to save note")}},de=b=>{if(window.confirm("Are you sure you want to delete this note?"))try{r(R=>R.filter(Y=>Y.id!==b)),H(R=>R.filter(Y=>Y!==b))}catch(R){console.error("Failed to delete note:",R),a(R.message||"Failed to delete note")}},ae=()=>{if(g.length!==0&&window.confirm(`Are you sure you want to delete ${g.length} note(s)?`))try{r(b=>b.filter(R=>!g.includes(R.id))),H([])}catch(b){console.error("Failed to delete notes:",b),a(b.message||"Failed to delete notes")}},Z=()=>{c(!1),h(null),G(""),p(""),V([]),M(""),F(Te[0]),a(null)},f=b=>{H(R=>R.includes(b)?R.filter(Y=>Y!==b):[...R,b])},y=()=>{g.length===T.length?H([]):H(T.map(b=>b.id))},E=()=>{const b=L.trim();b&&!A.includes(b)&&(V(R=>[...R,b]),M(""))},z=b=>{V(R=>R.filter(Y=>Y!==b))},ee=b=>{b.key==="Enter"&&(b.preventDefault(),E())},Q=()=>{const b=JSON.stringify(t,null,2),R=new Blob([b],{type:"application/json"}),Y=URL.createObjectURL(R),ve=document.createElement("a");ve.href=Y,ve.download=`notes-${new Date().toISOString().split("T")[0]}.json`,ve.click(),URL.revokeObjectURL(Y)},ge=b=>b?new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, organize, and manage your notes with tags and colors"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:W?`Saved ${ge(W.toISOString())}`:"Ready"})]}),e.jsxs("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Note"]})]})]}),B&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total Notes"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:se.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"With Tags"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:se.withTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Total Tags"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:se.totalTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Avg Tags"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:se.avgTagsPerNote.toFixed(1)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"No Tags"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})]}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:se.withoutTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl p-4 border border-pink-200 dark:border-pink-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-pink-700 dark:text-pink-300",children:"Filtered"}),e.jsx("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:T.length})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:m,onChange:b=>C(b.target.value),placeholder:"Search notes by title, content, or tags...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:j,onChange:b=>u(b.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),D.map(b=>e.jsx("option",{value:b,children:b},b))]}),e.jsxs("select",{value:k,onChange:b=>P(b.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"color",children:"Sort by Color"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>N("grid"),className:`p-2 rounded ${w==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>N("list"),className:`p-2 rounded ${w==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("button",{type:"button",onClick:Q,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Notes",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>q(!B),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:B?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),g.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.length," note(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:ae,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>H([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]})]})]}),o&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:o})})]}),e.jsx("button",{type:"button",onClick:()=>a(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),T.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:m||j!=="all"?"No notes found":"No notes yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:m||j!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first note"}),!m&&j==="all"&&e.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Note"})]}):e.jsxs(e.Fragment,{children:[T.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:g.length===T.length&&T.length>0,onChange:y,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",T.length,")"]})]}),e.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:T.map(b=>{const R=b.color||Te[0];return e.jsxs("div",{className:`relative bg-gradient-to-br ${R.bg} ${R.dark} rounded-xl p-5 border ${R.border} ${R.dark} shadow-md hover:shadow-lg transition-all ${g.includes(b.id)?"ring-2 ring-blue-500":""}`,onClick:()=>O(b),children:[w==="list"&&e.jsx("input",{type:"checkbox",checked:g.includes(b.id),onChange:()=>f(b.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:Y=>Y.stopPropagation()}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 line-clamp-2",children:b.title||"Untitled Note"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:ge(b.updatedAt||b.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),O(b)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Edit Note",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),de(b.id)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Delete Note",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 line-clamp-4 whitespace-pre-wrap",children:b.content||"No content"}),b.tags&&b.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:b.tags.map(Y=>e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:Y},Y))}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/30 dark:border-gray-700/30",children:[e.jsx("span",{className:`text-xs font-medium ${R.text}`,children:R.name}),w==="grid"&&e.jsx("input",{type:"checkbox",checked:g.includes(b.id),onChange:()=>f(b.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:Y=>Y.stopPropagation()})]})]},b.id)})}),T.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",T.length," of ",t.length," notes"]})]}),i&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Z}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l?"Edit Note":"New Note"}),e.jsx("button",{type:"button",onClick:Z,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:I,onChange:b=>G(b.target.value),placeholder:"Enter note title...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content"}),e.jsx("textarea",{value:X,onChange:b=>p(b.target.value),placeholder:"Enter note content...",rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:A.map(b=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full",children:[b,e.jsx("button",{type:"button",onClick:()=>z(b),className:"hover:text-blue-900 dark:hover:text-blue-100",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},b))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:L,onChange:b=>M(b.target.value),onKeyPress:ee,placeholder:"Add a tag and press Enter...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Add"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Te.map(b=>e.jsx("button",{type:"button",onClick:()=>F(b),className:`p-3 rounded-lg border-2 transition-all ${S.name===b.name?"border-gray-900 dark:border-white ring-2 ring-blue-500":"border-gray-300 dark:border-gray-600"} bg-gradient-to-br ${b.bg} ${b.dark}`,title:b.name,children:e.jsx("div",{className:`w-full h-4 rounded ${b.bg} ${b.dark}`})},b.name))})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:U,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:l?"Update":"Create"}),e.jsx("button",{type:"button",onClick:Z,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})}function bs(){const r=(()=>{if(typeof window>"u")return"/";const s=window.location.pathname,n=s.split("/").filter(Boolean);if(n.length>0&&n[0]==="trading"||s.startsWith("/trading"))return"/trading";const o=["news","trading","notes","projection","data","api","settings"];return n.length>0&&!o.includes(n[0])&&n[0]!=="index.html"?`/${n[0]}`:"/"})();return e.jsx(ra,{children:e.jsx(Kr,{basename:r,children:e.jsx(qr,{children:e.jsxs(we,{path:"/",element:e.jsx(na,{}),children:[e.jsx(we,{index:!0,element:e.jsx(wa,{})}),e.jsx(we,{path:"news",element:e.jsx(Ea,{})}),e.jsx(we,{path:"trading",element:e.jsx($a,{})}),e.jsx(we,{path:"notes",element:e.jsx(ps,{})}),e.jsxs(we,{path:"projection",children:[e.jsx(we,{index:!0,element:e.jsx(as,{})}),e.jsx(we,{path:"fib",element:e.jsx(ms,{})})]}),e.jsx(we,{path:"data",element:e.jsx(ss,{})}),e.jsx(we,{path:"api",element:e.jsx(is,{})}),e.jsx(we,{path:"settings",element:e.jsx(gs,{})}),e.jsx(we,{path:"*",element:e.jsx(Zr,{to:"/",replace:!0})})]})})})})}const Nr=document.getElementById("root");if(!Nr)throw new Error('Root element not found. Make sure there is a <div id="root"></div> in your HTML.');const fs=Qr.createRoot(Nr);fs.render(e.jsx(d.StrictMode,{children:e.jsx(bs,{})}));typeof window<"u"&&ta(()=>import("./preline-Cj2HLzEz.js").then(t=>t.p),[]).then(()=>{document.readyState==="complete"||document.readyState==="interactive"?window.HSStaticMethods&&typeof window.HSStaticMethods.autoInit=="function"&&window.HSStaticMethods.autoInit():document.addEventListener("DOMContentLoaded",()=>{window.HSStaticMethods&&typeof window.HSStaticMethods.autoInit=="function"&&window.HSStaticMethods.autoInit()})}).catch(()=>{});
