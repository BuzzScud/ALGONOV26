import{R as Kr,j as e,r as d,u as gr,L as qr,N as Zr,O as Qr,a as xr,b as dt,D as ot,c as nt,S as lt,v as Xr,d as it,s as mr,K as pr,P as br,e as ut,C as ht,f as gt,g as xt,h as mt,i as pt,k as bt,B as ea,p as ft,l as yt,m as kt,n as zt,o as ta,q as ra,t as aa,w as sa,x as Xe,y as fr,z as oa,A as na,E as la,F as ia,G as da,H as we,I as ca,J as ua}from"./vendor-CAE5IhR3.js";import"./preline-Cj2HLzEz.js";const ha=(function(){const r=typeof document<"u"&&document.createElement("link").relList;return r&&r.supports&&r.supports("modulepreload")?"modulepreload":"preload"})(),ga=function(t){return"/trading/dist/"+t},tr={},yr=function(r,s,i){let o=Promise.resolve();if(s&&s.length>0){let n=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");o=n(s.map(h=>{if(h=ga(h),h in tr)return;tr[h]=!0;const g=h.endsWith(".css"),w=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${w}`))return;const p=document.createElement("link");if(p.rel=g?"stylesheet":ha,g||(p.as="script"),p.crossOrigin="",p.href=h,c&&p.setAttribute("nonce",c),document.head.appendChild(p),g)return new Promise((C,N)=>{p.addEventListener("load",C),p.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return r().catch(a)})};class xa extends Kr.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,s){this.setState({error:r,errorInfo:s})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null});const s=window.location.pathname.startsWith("/trading")?"/trading":"/";window.location.href=s};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or return to the home page."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Home"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Refresh Page"})]}),!1]})}):this.props.children}}function ma(){const[t,r]=d.useState({name:"John Doe",email:"john.doe@example.com",dob:"",phone:"",location:"",bio:""}),[s,i]=d.useState(!1),[o,a]=d.useState(!1),[l,c]=d.useState(t),n=d.useRef(null);d.useEffect(()=>{try{const u=localStorage.getItem("userProfile");if(u){const y=JSON.parse(u);r(y),c(y)}}catch(u){console.error("Error loading user profile:",u)}},[]),d.useEffect(()=>{(t.name!=="John Doe"||t.email!=="john.doe@example.com")&&localStorage.setItem("userProfile",JSON.stringify(t))},[t]),d.useEffect(()=>{const u=b=>{n.current&&!n.current.contains(b.target)&&(a(!1),i(!1))},y=b=>{b.key==="Escape"&&(a(!1),i(!1))};if(o)return document.addEventListener("mousedown",u),document.addEventListener("keydown",y),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousedown",u),document.removeEventListener("keydown",y),document.body.style.overflow=""}},[o]);const h=u=>{if(!u)return"JD";const y=u.trim().split(" ");return y.length>=2?(y[0][0]+y[y.length-1][0]).toUpperCase():u.substring(0,2).toUpperCase()},g=()=>{r(l),i(!1),a(!1)},w=()=>{c(t),i(!1)},p=()=>{a(!1),i(!1),c(t)},C=(u,y)=>{c(b=>({...b,[u]:y}))},N=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-x-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",onClick:()=>{a(!0),i(!1),c(t)},role:"button",tabIndex:0,"aria-label":"User profile",children:[e.jsx("div",{className:"relative inline-flex items-center justify-center w-10 h-10 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-2 ring-gray-300 dark:ring-gray-600",children:e.jsx("span",{className:"font-medium text-white text-sm",children:h(t.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email})]}),e.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]}),o&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",ref:n,children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm",onClick:()=>{a(!1),i(!1)},"aria-hidden":"true"}),e.jsx("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 w-full max-w-md max-h-[90vh] overflow-y-auto z-10 transform transition-all",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Profile"}),e.jsx("button",{type:"button",onClick:p,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Close profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"relative inline-flex items-center justify-center w-20 h-20 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-4 ring-gray-200 dark:ring-gray-700",children:e.jsx("span",{className:"font-bold text-white text-2xl",children:h(l.name)})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:u=>C("name",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:l.email,onChange:u=>C("email",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"your.email@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",value:l.dob,onChange:u=>C("dob",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:l.phone,onChange:u=>C("phone",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:l.location,onChange:u=>C("location",u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),e.jsx("textarea",{value:l.bio,onChange:u=>C("bio",u.target.value),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Tell us about yourself..."})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:g,disabled:!l.name||!l.email,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:"Save Changes"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Profile"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i(!0),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors","aria-label":"Edit profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:p,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Close profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"relative inline-flex items-center justify-center w-20 h-20 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-4 ring-gray-200 dark:ring-gray-700",children:e.jsx("span",{className:"font-bold text-white text-2xl",children:h(t.name)})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.name||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.email||"Not set"})]}),t.dob&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Date of Birth"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:N(t.dob)})]}),t.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.phone})]}),t.location&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Location"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.location})]}),t.bio&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Bio"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:t.bio})]})]})]})]})})]})]})}function kr(t){const r=t.getMonth()+1,s=t.getDate(),i=t.getFullYear(),o=r.toString().split("").reduce((n,h)=>n+parseInt(h),0),a=s.toString().split("").reduce((n,h)=>n+parseInt(h),0),l=i.toString().split("").reduce((n,h)=>n+parseInt(h),0);let c=o+a+l;for(;c>9&&c!==11&&c!==22&&c!==33;)c=c.toString().split("").reduce((n,h)=>n+parseInt(h),0);return c}function jr(t){const r={1:{number:1,title:"New Beginnings",description:"Leadership, initiative, and fresh starts tend to receive more focus. A day for taking action and starting new projects."},2:{number:2,title:"Cooperation",description:"Cooperation, diplomacy, and partnerships tend to receive more focus. A day for collaboration and building relationships."},3:{number:3,title:"Creativity & Communication",description:"Socializing and the arts tend to receive more focus. A day favorable for creative endeavors and effective communication."},4:{number:4,title:"Stability & Organization",description:"Practicality, stability, and organization tend to receive more focus. A day for building foundations and structure."},5:{number:5,title:"Change & Adventure",description:"Change, adventure, and freedom tend to receive more focus. A day for exploration and embracing new experiences."},6:{number:6,title:"Nurturing & Responsibility",description:"Nurturing, responsibility, and domesticity tend to receive more focus. A day for caring for others and home matters."},7:{number:7,title:"Introspection & Wisdom",description:"Introspection, wisdom, and seeking knowledge tend to receive more focus. A day for reflection and spiritual growth."},8:{number:8,title:"Abundance & Power",description:"Abundance, power, and manifestation tend to receive more focus. A day for achieving goals and material success."},9:{number:9,title:"Completion & Compassion",description:"Completion, humanitarianism, and compassion tend to receive more focus. A day for service to others and endings."},11:{number:11,title:"Intuition & Inspiration",description:"Intuition, inspiration, and spiritual insight tend to receive more focus. A master number day for higher awareness."},22:{number:22,title:"Master Builder",description:"Master building, practical idealism, and large-scale projects tend to receive more focus. A master number day for manifestation."},33:{number:33,title:"Master Teacher",description:"Master teaching, compassion, and healing tend to receive more focus. A master number day for service to humanity."}};return r[t]||r[1]}function pa({timezone:t="America/New_York",city:r="New York",country:s="United States",onRemove:i}){const[o,a]=d.useState(new Date);d.useEffect(()=>{const k=setInterval(()=>{a(new Date)},1e3);return()=>clearInterval(k)},[]);const c=new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"short",year:"numeric"}).formatToParts(o),n=c.find(k=>k.type==="hour").value+":"+c.find(k=>k.type==="minute").value+":"+c.find(k=>k.type==="second").value+" "+c.find(k=>k.type==="dayPeriod").value,h=c.find(k=>k.type==="month").value+" "+c.find(k=>k.type==="day").value+", "+c.find(k=>k.type==="year").value,g=c.find(k=>k.type==="month").value,w=parseInt(c.find(k=>k.type==="day").value),p=parseInt(c.find(k=>k.type==="year").value),N={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12}[g]||1,u=new Date(p,N-1,w),y=kr(u),b=jr(y);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700 relative",children:[i&&e.jsx("button",{type:"button",onClick:i,className:"absolute top-2 right-2 p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove clock",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:r}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:s}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1 font-mono",children:n}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:h}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:b.number}),e.jsx("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:b.title})]})})]})]})}const qe=[{timezone:"America/New_York",city:"New York",country:"United States"},{timezone:"America/Los_Angeles",city:"Los Angeles",country:"United States"},{timezone:"America/Chicago",city:"Chicago",country:"United States"},{timezone:"Europe/London",city:"London",country:"United Kingdom"},{timezone:"Europe/Paris",city:"Paris",country:"France"},{timezone:"Europe/Berlin",city:"Berlin",country:"Germany"},{timezone:"Asia/Tokyo",city:"Tokyo",country:"Japan"},{timezone:"Asia/Shanghai",city:"Shanghai",country:"China"},{timezone:"Asia/Hong_Kong",city:"Hong Kong",country:"Hong Kong"},{timezone:"Asia/Dubai",city:"Dubai",country:"UAE"},{timezone:"Asia/Singapore",city:"Singapore",country:"Singapore"},{timezone:"Australia/Sydney",city:"Sydney",country:"Australia"},{timezone:"America/Toronto",city:"Toronto",country:"Canada"},{timezone:"America/Sao_Paulo",city:"SÃ£o Paulo",country:"Brazil"},{timezone:"America/Mexico_City",city:"Mexico City",country:"Mexico"}];function ba({isOpen:t,onClose:r}){const s=gr(),[i,o]=d.useState(()=>{const u=localStorage.getItem("darkMode");return u?JSON.parse(u):!1}),[a,l]=d.useState(()=>{try{const u=localStorage.getItem("sidebarClocks");if(u){const y=JSON.parse(u);if(Array.isArray(y)&&y.length>0)return y}}catch(u){console.error("Error loading clocks from localStorage:",u)}return[{timezone:"America/New_York",city:"New York",country:"United States",id:Date.now()}]}),[c,n]=d.useState(!1),[h,g]=d.useState(qe[0].timezone);d.useEffect(()=>{i?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(i))},[i]),d.useEffect(()=>{localStorage.setItem("sidebarClocks",JSON.stringify(a))},[a]);const w=()=>{const u=qe.find(y=>y.timezone===h);if(u){if(a.some(k=>k.timezone===u.timezone)){alert("This clock is already added");return}const b={...u,id:Date.now()};l([...a,b]),n(!1),g(qe[0].timezone)}},p=u=>{if(a.length<=1){alert("You must have at least one clock");return}l(a.filter(y=>y.id!==u))},C=()=>{o(!i)},N=[{path:"/",label:"Dashboard"},{path:"/news",label:"News"},{path:"/trading",label:"Charts"},{path:"/notes",label:"Notes"},{path:"/projection/fib",label:"FIB"},{path:"/projection",label:"Projection"},{path:"/data",label:"Data"},{path:"/api",label:"API"},{path:"/settings",label:"Settings"}];return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 z-[59] bg-gray-900 bg-opacity-50 lg:hidden",onClick:r,"aria-hidden":"true"}),e.jsx("div",{id:"application-sidebar",className:`fixed top-0 start-0 bottom-0 z-[60] w-64 bg-white dark:bg-gray-900 border-e border-gray-200 dark:border-gray-700 transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:end-auto lg:bottom-0 lg:z-[60] lg:block lg:border-e-0 ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(qr,{className:"flex-none text-xl font-semibold text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300 transition-colors",to:"/","aria-label":"Brand",children:"App"}),e.jsx("button",{type:"button",className:"lg:hidden text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",onClick:r,"aria-label":"Close sidebar",children:e.jsxs("svg",{className:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m18 6-12 12"}),e.jsx("path",{d:"m6 6 12 12"})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsx("nav",{className:"hs-accordion-group p-6 w-full","data-hs-accordion-always-open":!0,children:e.jsx("ul",{className:"space-y-1.5",children:N.map(u=>{let y=!1;return u.path==="/"?y=s.pathname==="/":u.path==="/projection"?y=s.pathname==="/projection":u.path==="/projection/fib"?y=s.pathname==="/projection/fib":y=s.pathname===u.path||s.pathname.startsWith(u.path+"/"),e.jsx("li",{children:e.jsx(Zr,{to:u.path,onClick:()=>{window.innerWidth<1024&&r&&r()},className:`flex items-center gap-x-3.5 py-2 px-2.5 text-sm text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 ${y?"bg-gray-100 dark:bg-gray-800 font-semibold":""}`,children:e.jsx("span",{children:u.label})})},u.path)})})})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"p-4 space-y-3 max-h-[45vh] overflow-y-auto",children:[e.jsx("div",{className:"space-y-3",children:a.map(u=>e.jsx(pa,{timezone:u.timezone,city:u.city,country:u.country,onRemove:a.length>1?()=>p(u.id):null},u.id))}),c?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Timezone"}),e.jsx("select",{value:h,onChange:u=>g(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:qe.map(u=>e.jsxs("option",{value:u.timezone,children:[u.city,", ",u.country]},u.timezone))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:w,className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Add"}),e.jsx("button",{type:"button",onClick:()=>{n(!1),g(qe[0].timezone)},className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"})]})]}):e.jsxs("button",{type:"button",onClick:()=>n(!0),className:"w-full px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 border border-blue-200 dark:border-blue-700 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Clock"]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:i?"Dark Mode":"Light Mode"}),e.jsx("button",{type:"button",onClick:C,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",role:"switch","aria-checked":i,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i?"translate-x-6":"translate-x-1"}`})})]}),e.jsx(ma,{})]})})]})})]})}function fa(){const[t,r]=d.useState(!1),s=()=>{r(!t)},i=()=>{r(!1)};return d.useEffect(()=>{const o=()=>{window.innerWidth>=1024&&r(!1)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),d.useEffect(()=>(t&&window.innerWidth<1024?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(ba,{isOpen:t,onClose:i}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 inset-x-0 z-20 bg-white dark:bg-gray-900 border-y border-gray-200 dark:border-gray-700 px-4 sm:px-6 md:px-8 lg:hidden",children:e.jsx("div",{className:"flex justify-between items-center gap-x-4",children:e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx("button",{type:"button",className:"text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:s,"aria-controls":"application-sidebar","aria-label":"Toggle navigation","aria-expanded":t,children:e.jsxs("svg",{className:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"21",y1:"18",y2:"18"})]})}),e.jsx("span",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"App"})]})})}),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(Qr,{})})]})]})}const De=()=>{const t=new Date,r=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),s=r.getDay(),i=r.getHours(),o=r.getMinutes(),a=i*60+o;return s===0||s===6?!1:a>=570&&a<960},ya=(t,r=!0)=>{if(t.marketState){const s=t.marketState.toUpperCase();if(s==="REGULAR")return"REGULAR";if(s==="PRE"||s==="PREPRE")return"PRE";if(s==="POST"||s==="POSTPOST")return"POST";if(s==="CLOSED")return"CLOSED"}return r?De()?"REGULAR":"CLOSED":"UNKNOWN"},Ct=async t=>{try{const r=De()?"5m":"1d",s=(De(),"1d"),{fetchMarketData:i}=await yr(async()=>{const{fetchMarketData:y}=await Promise.resolve().then(()=>Wa);return{fetchMarketData:y}},void 0),o=await i(t,r,s);if(!o||!o.data)throw new Error("Invalid response format");const a=o.data;if(o.source==="finnhub"){const y=a.c||0,b=a.pc||y,k=y-b,T=b>0?k/b*100:0,H=De()?"REGULAR":"CLOSED";return{symbol:t,price:y,change:k,changePercent:T,previousClose:b,marketState:H,volume:a.v||0}}if(!a?.chart?.result?.[0])throw new Error("Invalid data format: missing chart result");const c=a.chart.result[0];if(!c.meta)throw new Error("Invalid data format: missing meta data");const n=c.meta,h=c.indicators?.quote?.[0],g=n.previousClose||n.close||0;let w=0;if(n.regularMarketPrice&&n.regularMarketPrice>0&&(w=n.regularMarketPrice),(!w||w===0)&&h&&h.close&&h.close.length>0)for(let y=h.close.length-1;y>=0;y--){const b=h.close[y];if(b!=null&&b>0){w=b;break}}if((!w||w===0)&&(w=n.chartPreviousClose||n.close||0),(!w||w===0)&&(w=g||n.close||0),!w||w===0)throw new Error("Invalid data format: no valid price data");let p=0,C=0;g&&g>0&&(p=w-g,C=p/g*100);const N=ya(n,!0);let u=0;if(n.regularMarketVolume&&n.regularMarketVolume>0)u=n.regularMarketVolume;else if(h&&h.volume&&h.volume.length>0)for(let y=h.volume.length-1;y>=0;y--){const b=h.volume[y];if(b!=null&&b>0){u=b;break}}return{symbol:t,price:w,change:p,changePercent:C,previousClose:g,marketState:N,volume:u}}catch(r){console.error(`Error fetching ${t}:`,r);const s=De()?"REGULAR":"CLOSED";return{symbol:t,price:null,change:0,changePercent:0,previousClose:0,marketState:s,volume:0,error:"Failed to fetch data. Please try again."}}};function ka({id:t,timezone:r,city:s,country:i}){const{attributes:o,listeners:a,setNodeRef:l,transform:c,transition:n,isDragging:h}=ut({id:t}),g={transform:ht.Transform.toString(c),transition:n,opacity:h?.5:1},[w,p]=d.useState(new Date);d.useEffect(()=>{const m=setInterval(()=>{p(new Date)},1e3);return()=>clearInterval(m)},[]);const N=new Intl.DateTimeFormat("en-US",{timeZone:r,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"short",year:"numeric"}).formatToParts(w),u=N.find(m=>m.type==="hour").value+":"+N.find(m=>m.type==="minute").value+":"+N.find(m=>m.type==="second").value+" "+N.find(m=>m.type==="dayPeriod").value,y=N.find(m=>m.type==="month").value+" "+N.find(m=>m.type==="day").value+", "+N.find(m=>m.type==="year").value,b=N.find(m=>m.type==="month").value,k=parseInt(N.find(m=>m.type==="day").value),T=parseInt(N.find(m=>m.type==="year").value),Y={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12}[b]||1,F=new Date(T,Y-1,k),_=kr(F),X=jr(_);return e.jsx("div",{ref:l,style:g,className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...o,...a,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:i}),e.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 font-mono",children:u}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:y}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:X.number}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:X.title})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:X.description})]})]})})}function Lt({id:t,children:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l,isDragging:c}=ut({id:t}),n={transform:ht.Transform.toString(a),transition:l,opacity:c?.5:1};return e.jsxs("div",{ref:o,style:n,className:"relative mb-8",children:[e.jsx("div",{...s,...i,className:"absolute -top-2 left-0 right-0 h-8 cursor-move touch-none flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity z-10 group",children:e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Drag to reorder section"})]})}),e.jsx("div",{className:"pt-2",children:r})]})}function ja({volume:t,symbol:r}){if(!t||t===0)return null;const s=i=>i>=1e9?`${(i/1e9).toFixed(2)}B`:i>=1e6?`${(i/1e6).toFixed(2)}M`:i>=1e3?`${(i/1e3).toFixed(2)}K`:i.toLocaleString();return e.jsxs("div",{className:"absolute z-50 w-56 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-200 bottom-full left-1/2 transform -translate-x-1/2 mb-3",children:[e.jsxs("div",{className:"text-xs font-semibold mb-2 text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:[r," Volume"]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:s(t)}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total shares traded"}),e.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-px",children:[e.jsx("div",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-white dark:border-t-gray-800"}),e.jsx("div",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-gray-200 dark:border-t-gray-700 absolute top-[1px]"})]})]})}function va({id:t,symbol:r,data:s,loading:i,onRemove:o}){const{attributes:a,listeners:l,setNodeRef:c,transform:n,transition:h,isDragging:g}=ut({id:t}),w={transform:ht.Transform.toString(n),transition:h,opacity:g?.5:1};if(i)return e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...l,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-200 border-t-blue-600"}),o&&e.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading..."})]});if(s?.error||s?.price===null)return e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...l,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 rounded",children:"Error"}),o&&e.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:s?.error||"Unable to fetch data"})]});if(!s)return e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...l,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),o&&e.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No data available"})]});const p=s.change>=0,N=r==="DXY"||r==="VIX"?"":"$";let u="Closed",y="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300";return s.marketState==="REGULAR"?(u="Open",y="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"):s.marketState==="PRE"||s.marketState==="PREPRE"?(u="Pre-Market",y="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400"):s.marketState==="POST"||s.marketState==="POSTPOST"?(u="After Hours",y="bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400"):s.marketState==="CLOSED"?(u="Closed",y="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"):De()?(u="Open",y="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"):(u="Closed",y="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"),e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...a,...l,children:[s&&s.volume>0&&e.jsx(ja,{volume:s.volume,symbol:r}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${y}`,children:u}),o&&e.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:[N,s.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-lg font-semibold ${p?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:s.change!==0?`${p?"+":""}${N}${Math.abs(s.change).toFixed(2)}`:`${N}0.00`}),e.jsx("span",{className:`text-lg font-semibold ${p?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:s.changePercent!==0?`(${p?"+":""}${Math.abs(s.changePercent).toFixed(2)}%)`:"(0.00%)"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Previous Close"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[N,(s.previousClose||s.price-s.change).toFixed(2)]})]})})]})}function wa(){const t=[{display:"QQQ",api:"QQQ"},{display:"SPY",api:"SPY"},{display:"DXY",api:"DX-Y.NYB"},{display:"VIX",api:"^VIX"}],r=[{id:"clock-ny",timezone:"America/New_York",city:"New York",country:"United States"},{id:"clock-london",timezone:"Europe/London",city:"London",country:"United Kingdom"},{id:"clock-tokyo",timezone:"Asia/Tokyo",city:"Tokyo",country:"Japan"},{id:"clock-sydney",timezone:"Australia/Sydney",city:"Sydney",country:"Australia"}],s=["world-clocks","market","todo-list"],[i,o]=d.useState(()=>{try{const M=localStorage.getItem("dashboardSymbols");if(M){const P=JSON.parse(M);if(Array.isArray(P)&&P.length>0)return P}}catch(M){console.error("Error loading symbols from localStorage:",M)}return t}),[a,l]=d.useState(()=>{try{const M=localStorage.getItem("dashboardWorldClocks");if(M){const P=JSON.parse(M);if(Array.isArray(P)&&P.length>0)return P}}catch(M){console.error("Error loading world clocks from localStorage:",M)}return r}),[c,n]=d.useState(()=>{try{const M=localStorage.getItem("dashboardSectionOrder");if(M){const P=JSON.parse(M);if(Array.isArray(P)&&P.length>0)return P}}catch(M){console.error("Error loading section order from localStorage:",M)}return s}),[h,g]=d.useState({}),[w,p]=d.useState(!0),[C,N]=d.useState(null),[u,y]=d.useState(""),[b,k]=d.useState(!1),T=xr(dt(br,{activationConstraint:{distance:8}}),dt(pr,{coordinateGetter:mr}));d.useEffect(()=>{localStorage.setItem("dashboardWorldClocks",JSON.stringify(a))},[a]),d.useEffect(()=>{localStorage.setItem("dashboardSectionOrder",JSON.stringify(c))},[c]),d.useEffect(()=>{localStorage.setItem("dashboardSymbols",JSON.stringify(i))},[i]);const H=async()=>{p(!0);try{const M=new Promise((W,S)=>setTimeout(()=>S(new Error("Request timeout")),15e3)),P=i.map(W=>Ct(W.api).then(S=>({...S,displaySymbol:W.display})).catch(S=>({symbol:W.display,displaySymbol:W.display,price:null,change:0,changePercent:0,previousClose:0,marketState:De()?"REGULAR":"CLOSED",error:"Failed to fetch data. Please try again."}))),L=await Promise.race([Promise.all(P),M]),I={};L.forEach((W,S)=>{const E=i[S].display;I[E]={...W,symbol:E}}),g(I),N(new Date)}catch(M){console.error("Error loading stock data:",M);const P={};i.forEach(L=>{h[L.display]||(P[L.display]={symbol:L.display,price:null,change:0,changePercent:0,previousClose:0,marketState:De()?"REGULAR":"CLOSED",error:"Failed to fetch data. Please try again."})}),g(L=>({...L,...P}))}finally{p(!1)}};d.useEffect(()=>{H();const M=setInterval(H,3e4);return()=>clearInterval(M)},[i.length]);const Y=async()=>{const M=u.trim().toUpperCase();if(M){if(i.some(P=>P.display===M||P.api===M)){alert("Symbol already exists"),y("");return}k(!0);try{const P=await Ct(M);if(P.error||P.price===null){alert(`Invalid symbol: ${M}. Please check the symbol and try again.`),k(!1);return}const L={display:M,api:M};o([...i,L]),y("");const I=await Ct(M);g(W=>({...W,[M]:{...I,symbol:M}}))}catch(P){console.error("Error adding symbol:",P),alert(`Failed to add symbol: ${M}. Please check the symbol and try again.`)}finally{k(!1)}}},F=M=>{if(i.length<=1){alert("You must have at least one symbol on the dashboard");return}o(i.filter(P=>P.display!==M)),g(P=>{const L={...P};return delete L[M],L})},_=M=>{M.key==="Enter"&&!b&&Y()},X=M=>{const{active:P,over:L}=M;L&&P.id!==L.id&&l(I=>{const W=I.findIndex(E=>E.id===P.id),S=I.findIndex(E=>E.id===L.id);return it(I,W,S)})},m=M=>{const{active:P,over:L}=M;L&&P.id!==L.id&&o(I=>{const W=I.findIndex(E=>E.display===P.id),S=I.findIndex(E=>E.display===L.id);return it(I,W,S)})},A=M=>{const{active:P,over:L}=M;L&&P.id!==L.id&&n(I=>{const W=I.indexOf(P.id),S=I.indexOf(L.id);return it(I,W,S)})},V=M=>{switch(M){case"world-clocks":return e.jsx(Lt,{id:M,children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"World Clocks"}),e.jsx(ot,{sensors:T,collisionDetection:nt,onDragEnd:X,children:e.jsx(lt,{items:a.map(P=>P.id),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(P=>e.jsx(ka,{id:P.id,timezone:P.timezone,city:P.city,country:P.country},P.id))})})})]})},M);case"market":return e.jsx(Lt,{id:M,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Market"}),e.jsxs("div",{className:"flex items-center gap-4",children:[C&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last updated: ",C.toLocaleTimeString("en-US",{timeZone:"America/New_York"})]}),e.jsxs("button",{type:"button",onClick:H,disabled:w,className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:`w-4 h-4 ${w?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:P=>y(P.target.value.toUpperCase()),onKeyPress:_,placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",disabled:b,className:"flex-1 px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:Y,disabled:b||!u.trim(),className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Symbol"]})})]}),e.jsx(ot,{sensors:T,collisionDetection:nt,onDragEnd:m,children:e.jsx(lt,{items:i.map(P=>P.display),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(P=>e.jsx(va,{id:P.display,symbol:P.display,data:h[P.display]||null,loading:w&&!h[P.display],onRemove:i.length>1?()=>F(P.display):null},P.display))})})})]})},M);case"todo-list":return e.jsx(Lt,{id:M,children:e.jsx(Na,{})},M);default:return null}};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time market data and world clocks"})]}),e.jsx(ot,{sensors:T,collisionDetection:nt,onDragEnd:A,children:e.jsx(lt,{items:c,strategy:Xr,children:c.map(M=>V(M))})})]})}function Na(){const[t,r]=d.useState([]),[s,i]=d.useState(""),[o,a]=d.useState(null),[l,c]=d.useState("");d.useEffect(()=>{const b=localStorage.getItem("dashboardTodos");if(b)try{const k=JSON.parse(b),T=new Date().toDateString(),H=k.filter(Y=>new Date(Y.createdAt).toDateString()===T);r(H),H.length!==k.length&&localStorage.setItem("dashboardTodos",JSON.stringify(H))}catch(k){console.error("Error loading todos:",k)}},[]),d.useEffect(()=>{(t.length>0||localStorage.getItem("dashboardTodos"))&&localStorage.setItem("dashboardTodos",JSON.stringify(t))},[t]);const n=()=>{if(s.trim()){const b={id:Date.now(),text:s.trim(),completed:!1,createdAt:new Date().toISOString()};r([...t,b]),i("")}},h=b=>{r(t.map(k=>k.id===b?{...k,completed:!k.completed}:k))},g=b=>{r(t.filter(k=>k.id!==b))},w=b=>{a(b.id),c(b.text)},p=()=>{l.trim()&&(r(t.map(b=>b.id===o?{...b,text:l.trim()}:b)),a(null),c(""))},C=()=>{a(null),c("")},N=(b,k)=>{b.key==="Enter"?k():b.key==="Escape"&&k===C&&C()},u=t.filter(b=>b.completed).length,y=t.length;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Today's To-Do List"}),y>0&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[u," of ",y," completed"]})]}),y>0&&e.jsx("button",{type:"button",onClick:()=>r([]),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors",children:"Clear All"})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{type:"text",value:s,onChange:b=>i(b.target.value),onKeyPress:b=>N(b,n),placeholder:"Add a new task...",className:"flex-1 px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),e.jsxs("button",{type:"button",onClick:n,className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tasks for today. Add one above to get started!"})]}):e.jsx("div",{className:"space-y-2",children:t.map(b=>e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border transition-all ${b.completed?"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>h(b.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${b.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-green-500"}`,children:b.completed&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),o===b.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:k=>c(k.target.value),onKeyPress:k=>N(k,p),onKeyDown:k=>N(k,C),className:"flex-1 px-3 py-1 border-2 border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",autoFocus:!0}),e.jsx("button",{type:"button",onClick:p,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Save"}),e.jsx("button",{type:"button",onClick:C,className:"px-3 py-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`flex-1 text-gray-900 dark:text-white cursor-pointer ${b.completed?"line-through text-gray-500 dark:text-gray-400":""}`,onDoubleClick:()=>w(b),children:b.text}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>w(b),className:"p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:()=>g(b.id),className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},b.id))})]})}const at="d18ueuhr01qkcat4uip0d18ueuhr01qkcat4uipg",vr=()=>{try{const t=localStorage.getItem("apiKeys");if(t){const r=JSON.parse(t);return{finnhub:r.finnhub||at,fibhub:r.fibhub||at}}}catch(t){console.error("Error loading API keys from localStorage:",t)}return{finnhub:at,fibhub:at}},Sa=(t="general",r=null)=>{const i=vr().finnhub||"demo";if(r){const o=new Date,a=new Date(o);a.setDate(a.getDate()-7);const l=a.toISOString().split("T")[0],c=o.toISOString().split("T")[0];return`https://finnhub.io/api/v1/company-news?symbol=${r}&from=${l}&to=${c}&token=${i}`}return`https://finnhub.io/api/v1/news?category=${t}&token=${i}`},wr=async(t="general",r=null)=>{try{const s=Sa(t,r),i=new Promise((l,c)=>setTimeout(()=>c(new Error("Finnhub request timeout")),1e4));let o;try{const l=fetch(s,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});o=await Promise.race([l,i])}catch(l){if(l.message&&(l.message.includes("CORS")||l.message.includes("Failed to fetch"))){console.warn("Direct Finnhub fetch failed, trying CORS proxy...");const c=`https://api.allorigins.win/get?url=${encodeURIComponent(s)}`,n=fetch(c,{method:"GET",headers:{Accept:"application/json"}});if(o=await Promise.race([n,i]),!o.ok)throw new Error(`CORS proxy failed: ${o.status}`);const h=await o.json();if(!h||!h.contents)throw new Error("No contents from CORS proxy");const g=JSON.parse(h.contents);if(g&&typeof g=="object"&&g.error)throw new Error(g.error);return!g||Array.isArray(g)&&g.length===0?[]:Array.isArray(g)?g.map(w=>({id:w.id||`${w.headline}-${w.datetime}`,title:w.headline||w.title||"No title",summary:w.summary||w.description||"",source:w.source||"Unknown",url:w.url||w.link||"#",image:w.image||null,datetime:w.datetime*1e3||Date.now(),category:w.category||t,symbol:w.related||r||null,sentiment:w.sentiment||null,apiSource:"finnhub"})):[]}else throw l}if(!o.ok){if(o.status===429)throw new Error("Finnhub API rate limit exceeded. Please try again later.");if(o.status===401||o.status===403)throw new Error("Finnhub API key invalid. Please check your API key in Settings.");const l=await o.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch news: ${o.status} ${o.statusText}. ${l}`)}const a=await o.json();if(a&&typeof a=="object"&&a.error)throw new Error(a.error);return!a||Array.isArray(a)&&a.length===0?[]:Array.isArray(a)?a.map(l=>({id:l.id||`${l.headline}-${l.datetime}`,title:l.headline||l.title||"No title",summary:l.summary||l.description||"",source:l.source||"Unknown",url:l.url||l.link||"#",image:l.image||null,datetime:l.datetime*1e3||Date.now(),category:l.category||t,symbol:l.related||r||null,sentiment:l.sentiment||null,apiSource:"finnhub"})):[]}catch(s){return console.error("Error fetching news from Finnhub:",s),[]}},Ca=(t="general")=>{const r={general:"https://feeds.finance.yahoo.com/rss/2.0/headline",market:"https://feeds.finance.yahoo.com/rss/2.0/headline",stocks:"https://feeds.finance.yahoo.com/rss/2.0/headline",crypto:"https://feeds.finance.yahoo.com/rss/2.0/headline?s=YF",economy:"https://feeds.finance.yahoo.com/rss/2.0/headline"};return r[t]||r.general},La=(t="general",r=null)=>{const s=vr(),i=s.fibhub||s.finnhub||"demo";if(r){const o=new Date,a=new Date(o);a.setDate(a.getDate()-7);const l=a.toISOString().split("T")[0],c=o.toISOString().split("T")[0];return`https://api.fibhub.io/v1/company-news?symbol=${r}&from=${l}&to=${c}&token=${i}`}return`https://api.fibhub.io/v1/news?category=${t}&token=${i}`},Nr=async(t="general",r=null)=>{try{const s=La(t,r),i=new Promise((n,h)=>setTimeout(()=>h(new Error("Fibhub request timeout")),8e3)),o=fetch(s,{method:"GET",headers:{Accept:"application/json"},mode:"cors"}),a=await Promise.race([o,i]);if(!a.ok)return a.status!==404&&console.warn(`Fibhub API returned ${a.status}: ${a.statusText}`),[];const l=await a.json();if(!l)return[];let c=[];if(Array.isArray(l))c=l;else if(l.data&&Array.isArray(l.data))c=l.data;else if(l.news&&Array.isArray(l.news))c=l.news;else if(l.results&&Array.isArray(l.results))c=l.results;else if(l.headline||l.title)c=[l];else return[];return c.length===0?[]:c.map((n,h)=>{let g=Date.now();return n.datetime?typeof n.datetime=="number"?g=n.datetime<1e10?n.datetime*1e3:n.datetime:g=new Date(n.datetime).getTime()||Date.now():n.publishedAt?g=new Date(n.publishedAt).getTime()||Date.now():n.pubDate&&(g=new Date(n.pubDate).getTime()||Date.now()),{id:n.id||`${n.headline||n.title||"fibhub"}-${g}-${h}`,title:n.headline||n.title||"No title",summary:n.summary||n.description||n.content||"",source:n.source||n.publisher||"Fibhub",url:n.url||n.link||n.webUrl||"#",image:n.image||n.imageUrl||n.urlToImage||null,datetime:g,category:n.category||t,symbol:n.related||n.symbol||r||null,sentiment:n.sentiment||null,apiSource:"fibhub"}})}catch(s){return s.message&&!s.message.includes("timeout")&&!s.message.includes("Failed to fetch")&&console.warn("Fibhub fetch warning:",s.message),[]}},Ma=async(t="general")=>{try{const r=Ca(t),s=`https://api.allorigins.win/get?url=${encodeURIComponent(r)}`,i=new Promise((p,C)=>setTimeout(()=>C(new Error("Yahoo Finance request timeout")),1e4)),o=fetch(s,{method:"GET",headers:{Accept:"application/json"}}),a=await Promise.race([o,i]);if(!a.ok)throw new Error(`Failed to fetch Yahoo Finance news: ${a.status}`);const l=await a.json();if(!l||!l.contents)return console.warn("Yahoo Finance: No contents in response"),[];const n=new DOMParser().parseFromString(l.contents,"text/xml"),h=n.querySelector("parsererror");if(h)return console.error("Yahoo Finance RSS parsing error:",h.textContent),[];const g=n.querySelectorAll("item");if(!g||g.length===0)return console.warn("Yahoo Finance: No items found in RSS feed"),[];const w=[];return g.forEach((p,C)=>{try{const N=p.querySelector("title")?.textContent||"No title",u=p.querySelector("description")?.textContent||"",y=p.querySelector("link")?.textContent||"#",b=p.querySelector("pubDate")?.textContent||new Date().toISOString(),k=u.match(/<img[^>]+src="([^"]+)"/i),T=k?k[1]:null,H=u.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").trim().substring(0,300);w.push({id:`yahoo-${C}-${Date.now()}`,title:N.trim(),summary:H||"No description available",source:"Yahoo Finance",url:y.trim(),image:T,datetime:new Date(b).getTime()||Date.now(),category:t,symbol:null,sentiment:null,apiSource:"yahoo"})}catch(N){console.warn("Error parsing Yahoo Finance news item:",N)}}),w.length===0?(console.warn("Yahoo Finance: No valid news items parsed"),[]):w.slice(0,50)}catch(r){return console.error("Error fetching news from Yahoo Finance:",r),[]}},Sr=t=>{const r=new Set,s=[];for(const i of t){const o=i.title.toLowerCase().trim().substring(0,50),a=i.url||"",l=`${o}-${a}`;r.has(l)||(r.add(l),s.push(i))}return s},$t=async(t="general",r=null)=>{const s=[],i=[];try{const o=[];o.push(wr(t,r).then(h=>h&&h.length>0?(s.push("finnhub"),h):[]).catch(h=>(console.error("Finnhub fetch error:",h),i.push({source:"finnhub",error:h.message}),[]))),o.push(Nr(t,r).then(h=>h&&h.length>0?(s.push("fibhub"),h):[]).catch(h=>(console.warn("Fibhub fetch error (non-critical):",h.message),[]))),r||o.push(Ma(t).then(h=>h&&h.length>0?(s.push("yahoo"),h):[]).catch(h=>(console.error("Yahoo Finance fetch error:",h),i.push({source:"yahoo",error:h.message}),[])));const l=(await Promise.all(o)).flat(),c=Sr(l);c.sort((h,g)=>(g.datetime||0)-(h.datetime||0));const n=s.length>0?s.join("+"):"none";return{news:c,source:n,sources:s,errors:i.length>0?i:null}}catch(o){return console.error("Error fetching market news:",o),{news:[],source:"none",sources:[],errors:[{source:"unknown",error:o.message}]}}},Pa=async(t="general")=>{const s={all:"general",market:"general",stocks:"general",crypto:"crypto",economy:"general"}[t]||"general";return $t(s)},Aa=async t=>{try{if(!t||!t.trim())return{news:[],source:"none",sources:[]};const r=t.trim().toUpperCase(),i=/^[A-Z0-9]{1,5}$/.test(r);let o;if(i)try{const[c,n]=await Promise.all([wr("general",r).then(u=>u&&u.length>0?u:[]).catch(()=>[]),Nr("general",r).then(u=>u&&u.length>0?u:[]).catch(()=>[])]),h=await $t("general"),g=[...c,...n,...h.news||[]],w=Sr(g),p=t.toLowerCase(),C=w.filter(u=>u.title.toLowerCase().includes(p)||u.summary.toLowerCase().includes(p)||u.symbol&&u.symbol.toUpperCase().includes(r));C.sort((u,y)=>(y.datetime||0)-(u.datetime||0));const N=[];return c.length>0&&N.push("finnhub"),n.length>0&&N.push("fibhub"),h.sources&&h.sources.length>0&&N.push(...h.sources.filter(u=>!N.includes(u))),{news:C,source:N.length>0?N.join("+"):"none",sources:N,errors:h.errors}}catch(c){console.log("Company news search failed, falling back to general search:",c)}if(o=await $t("general"),!o.news||o.news.length===0)return{news:[],source:"none",sources:[]};const a=t.toLowerCase(),l=o.news.filter(c=>c.title.toLowerCase().includes(a)||c.summary.toLowerCase().includes(a)||c.symbol&&c.symbol.toUpperCase().includes(r));return l.sort((c,n)=>(n.datetime||0)-(c.datetime||0)),{news:l,source:o.source,sources:o.sources||[],errors:o.errors}}catch(r){return console.error("Error searching news:",r),{news:[],source:"none",sources:[],errors:[{source:"unknown",error:r.message}]}}};function Da(){const[t,r]=d.useState("all"),[s,i]=d.useState([]),[o,a]=d.useState(!0),[l,c]=d.useState(null),[n,h]=d.useState(""),[g,w]=d.useState(!1),[p,C]=d.useState(null),[N,u]=d.useState(null),[y,b]=d.useState([]),k=[{id:"all",label:"All News"},{id:"market",label:"Market News"},{id:"stocks",label:"Stocks"},{id:"crypto",label:"Crypto"},{id:"economy",label:"Economy"}],T=d.useCallback(async(m=t)=>{a(!0),c(null),w(!1);try{const A=await Pa(m);if(!A.news||A.news.length===0){if(A.errors&&A.errors.length>0){const V=A.errors.map(M=>`${M.source}: ${M.error}`).join(", ");c(`Failed to fetch news from all sources. ${V}. Please check your API keys in Settings.`)}else c("No news available at this time. Please try again later or check your API keys in Settings.");i([]),u(null),b([])}else{const V=(A.news||[]).sort((M,P)=>(P.datetime||0)-(M.datetime||0));i(V),u(A.source),b(A.sources||[]),C(new Date),c(null)}}catch(A){console.error("Error loading news:",A),c(A.message||"Failed to load news. Please check your API keys in Settings and try again."),i([]),u(null),b([])}finally{a(!1)}},[t]),H=d.useCallback(async m=>{if(!m||!m.trim()){T(t);return}w(!0),a(!0),c(null);try{const A=await Aa(m.trim());if(!A.news||A.news.length===0){if(A.errors&&A.errors.length>0){const V=A.errors.map(M=>`${M.source}: ${M.error}`).join(", ");c(`No news found for "${m}". ${V}. Please check your API keys in Settings.`)}else c(`No news found for "${m}". Please try a different search term or check your API keys in Settings.`);i([]),u(null),b([])}else{const V=(A.news||[]).sort((M,P)=>(P.datetime||0)-(M.datetime||0));i(V),u(A.source),b(A.sources||[]),C(new Date),c(null)}}catch(A){console.error("Error searching news:",A),c(A.message||`Failed to search news for "${m}". Please check your API keys in Settings and try again.`),i([]),u(null),b([])}finally{a(!1),w(!1)}},[T,t]),Y=m=>{r(m),h("")},F=()=>{n.trim()?H(n):T(t)},_=m=>{m.key==="Enter"&&H(n)};d.useEffect(()=>{n.trim()||T(t)},[t,T,n]);const X=m=>{if(!m)return"Unknown date";const A=new Date(m),M=new Date-A,P=Math.floor(M/6e4),L=Math.floor(M/36e5),I=Math.floor(M/864e5);return P<1?"Just now":P<60?`${P} minute${P>1?"s":""} ago`:L<24?`${L} hour${L>1?"s":""} ago`:I<7?`${I} day${I>1?"s":""} ago`:A.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"})};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"News"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Stay updated with the latest financial news and market updates"})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:n,onChange:m=>h(m.target.value),onKeyPress:_,placeholder:"Search news by keyword or symbol (e.g., AAPL, Bitcoin, Fed)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),n&&e.jsx("button",{type:"button",onClick:()=>{h(""),T(t)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("button",{type:"button",onClick:()=>H(n),disabled:o,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:o&&g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Searching..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(m=>e.jsx("button",{type:"button",onClick:()=>Y(m.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===m.id?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:m.label},m.id))})}),(p||N||y.length>0)&&e.jsxs("div",{className:"mb-4 flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[y.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:["Sources: ",y.map(m=>m==="finnhub"?"Finnhub":m==="yahoo"?"Yahoo Finance":m==="fibhub"?"Fibhub":m).join(" + ")]}),y.length>1&&e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs font-medium",children:"Combined"})]}),!y.length&&N&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:["Source: ",N==="finnhub"?"Finnhub":N==="yahoo"?"Yahoo Finance":N==="fibhub"?"Fibhub":N.includes("+")?N.split("+").map(m=>m==="finnhub"?"Finnhub":m==="yahoo"?"Yahoo Finance":m==="fibhub"?"Fibhub":m).join(" + "):"Unknown"]}),p&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Last updated: ",p.toLocaleTimeString("en-US",{timeZone:"America/New_York"})]})]}),e.jsxs("button",{type:"button",onClick:F,disabled:o,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${o?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]}),l&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:l}),e.jsx("button",{type:"button",onClick:F,className:"text-xs text-red-600 dark:text-red-300 mt-1 underline hover:no-underline",children:"Try again"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:o&&s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading news..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No news found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n?`No news found for "${n}". Try a different search term.`:"No news available for this category. Please try refreshing or selecting a different category."}),e.jsx("button",{type:"button",onClick:F,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh News"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(m=>e.jsx("article",{className:"border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.image&&e.jsx("div",{className:"flex-shrink-0 sm:w-32 sm:h-32 w-full h-48",children:e.jsx("img",{src:m.image,alt:m.title,className:"w-full h-full object-cover rounded-lg",onError:A=>{A.target.style.display="none"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:m.title})}),m.symbol&&e.jsx("span",{className:"flex-shrink-0 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:m.symbol})]}),m.summary&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 line-clamp-3",children:m.summary}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),m.source]}),m.apiSource&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${m.apiSource==="finnhub"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":m.apiSource==="fibhub"?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:m.apiSource==="finnhub"?"Finnhub":m.apiSource==="fibhub"?"Fibhub":"Yahoo Finance"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),X(m.datetime)]})]}),e.jsxs("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm flex items-center gap-1 transition-colors",children:["Read more",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})},m.id))})})]})}const Ve=[{name:"allorigins",getUrl:t=>`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`,parseResponse:t=>t,headers:{}},{name:"corsproxy.io",getUrl:t=>`https://corsproxy.io/?${encodeURIComponent(t)}`,parseResponse:t=>t,headers:{}},{name:"cors.sh",getUrl:t=>`https://cors.sh/${t}`,parseResponse:t=>t,headers:{}},{name:"crossorigin.me",getUrl:t=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(t)}`,parseResponse:t=>t,headers:{}},{name:"thingproxy",getUrl:t=>`https://thingproxy.freeboard.io/fetch/${t}`,parseResponse:t=>t,headers:{}}],Ze=["https://query1.finance.yahoo.com","https://query2.finance.yahoo.com"];let Mt=0,Pt=0;const Ue=new Map,Ea=3e4,$a=(t,r="1d",s="1d",i=0)=>`${Ze[i%Ze.length]}/v8/finance/chart/${t}?interval=${r}&range=${s}`,Ia=(t,r="1d",s="1d",i=0,o=0)=>{const a=$a(t,r,s,o);return Ve[i%Ve.length].getUrl(a)},It="d18ueuhr01qkcat4uip0d18ueuhr01qkcat4uipg",Cr=()=>{try{const t=localStorage.getItem("apiKeys");if(t){const r=JSON.parse(t);return{finnhub:r.finnhub||It,massive:r.massive||"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG"}}}catch(t){console.error("Error loading API keys from localStorage:",t)}return{finnhub:It,massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG"}},Fa=t=>{const s=Cr().finnhub||"demo";return`https://finnhub.io/api/v1/quote?symbol=${t}&token=${s}`},Bt=t=>{const r=Ue.get(t);return r&&Date.now()-r.timestamp<Ea?r.data:(Ue.delete(t),null)},Ot=(t,r)=>{if(Ue.set(t,{data:r,timestamp:Date.now()}),Ue.size>100){const s=[...Ue.entries()].sort((i,o)=>i[1].timestamp-o[1].timestamp)[0];s&&Ue.delete(s[0])}},Ta=async(t,r,s,i,o=0)=>{const a=Ia(t,r,s,i,o),l=Ve[i%Ve.length],c=new AbortController,n=setTimeout(()=>c.abort(),15e3);try{const h={Accept:"application/json",...l.headers},g=await fetch(a,{method:"GET",headers:h,signal:c.signal,mode:"cors"});if(clearTimeout(n),!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);const w=g.headers.get("content-type")||"";let p;const C=await g.text();try{p=JSON.parse(C)}catch{const u=C.match(/\{[\s\S]*\}/);if(u)try{p=JSON.parse(u[0])}catch{throw new Error("Response is not valid JSON")}else throw new Error("Response is not JSON")}return p.contents&&(p=typeof p.contents=="string"?JSON.parse(p.contents):p.contents),p=l.parseResponse(p),p}catch(h){throw clearTimeout(n),h}},Qe=async(t,r="1d",s="1d")=>{const i=`yahoo_${t}_${r}_${s}`,o=Bt(i);if(o)return o;const a=Ve.length*Ze.length;for(let l=0;l<a;l++){const c=(Mt+Math.floor(l/Ze.length))%Ve.length,n=(Pt+l)%Ze.length;try{const h=await Ta(t,r,s,c,n);if(!h)throw new Error("Empty response from API");if(!h.chart)throw new Error("Invalid response: missing chart data");if(!h.chart.result||!Array.isArray(h.chart.result)||h.chart.result.length===0)throw new Error("Invalid response: no result data");if(!h.chart.result[0])throw new Error("Invalid response: empty result array");c!==Mt&&(Mt=c),n!==Pt&&(Pt=n);const g={data:h,source:"yahoo"};return Ot(i,g),g}catch{}}throw new Error(`Failed to fetch Yahoo Finance data for ${t}`)},ct=async t=>{const r=`finnhub_${t}`,s=Bt(r);if(s)return s;let i=t;t==="DX-Y.NYB"||t==="DXY"?i="EURUSD":(t==="^VIX"||t==="VIX")&&(i="SPY");try{const o=Fa(i),a=new AbortController,l=setTimeout(()=>a.abort(),8e3),c=await fetch(o,{method:"GET",headers:{Accept:"application/json"},signal:a.signal});if(clearTimeout(l),!c.ok)throw new Error(`Finnhub HTTP ${c.status}`);const n=await c.json();if(!n||n.error)throw new Error(n.error||"Empty response from Finnhub API");if(n.c===0&&n.h===0&&n.l===0)throw new Error("Invalid symbol or no data available");if(n.c===null||n.c===void 0)throw new Error("Invalid response: missing price data");const h={data:n,source:"finnhub"};return Ot(r,h),h}catch(o){throw new Error(`Finnhub failed for ${t}: ${o.message}`)}},Lr=async(t,r="D",s=null,i=null)=>{const a=Cr().finnhub||It;let l=t;t==="DX-Y.NYB"||t==="DXY"?l="OANDA:EUR_USD":(t==="^VIX"||t==="VIX")&&(l="SPY");const c=Math.floor(Date.now()/1e3),n=s||c-720*60*60,h=i||c,g=`finnhub_candles_${l}_${r}_${n}_${h}`,w=Bt(g);if(w)return w;try{const p=`https://finnhub.io/api/v1/stock/candle?symbol=${l}&resolution=${r}&from=${n}&to=${h}&token=${a}`,C=new AbortController,N=setTimeout(()=>C.abort(),1e4),u=await fetch(p,{method:"GET",headers:{Accept:"application/json"},signal:C.signal});if(clearTimeout(N),!u.ok)throw new Error(`Finnhub Candles HTTP ${u.status}`);const y=await u.json();if(!y||y.s!=="ok"||!y.c||y.c.length===0)throw new Error("No candle data available from Finnhub");const b={data:y,source:"finnhub_candles"};return Ot(g,b),b}catch(p){throw new Error(`Finnhub Candles failed for ${t}: ${p.message}`)}},Ra=()=>{try{const t=localStorage.getItem("preferredApi");if(t&&["yahoo","finnhub","massive","auto"].includes(t))return t}catch(t){console.error("Error loading preferred API:",t)}return"auto"},ze=async(t,r="1d",s="1d",i=!1)=>{const o=Ra(),a=[];if(i)try{return await Qe(t,r,s)}catch(l){a.push(`Yahoo: ${l.message}`)}if(o==="yahoo")try{return await Qe(t,r,s)}catch(l){a.push(`Yahoo: ${l.message}`)}else if(o==="finnhub")try{return await ct(t)}catch(l){a.push(`Finnhub: ${l.message}`)}if(!i)try{return await ct(t)}catch(l){a.push(`Finnhub: ${l.message}`)}try{return await Qe(t,r,s)}catch(l){a.push(`Yahoo: ${l.message}`)}throw new Error(`All APIs failed for ${t}`)},za=(t,r)=>{if(!r?.chart?.result?.[0])throw new Error("Invalid data format from Yahoo Finance");const s=r.chart.result[0],i=s.meta;s.indicators?.quote?.[0];const o=i.regularMarketPrice||i.previousClose||0,a=i.previousClose||o,l=o-a,c=a?l/a*100:0,n=i.marketState==="REGULAR",h=n?Math.floor(Math.random()*200)+50:0;let g="operational";return n?Math.abs(c)>5&&(g="degraded"):g="paused",{id:t,name:`${i.shortName||t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:g,isUp:n,responseTime:h,avgResponseTime:h,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!n,price:o,change:l,changePercent:c,volume:i.regularMarketVolume||0,marketState:i.marketState,symbol:t,apiSource:"yahoo"}},Ba=(t,r)=>{if(!r||r.c===null||r.c===void 0)throw new Error("Invalid data format from Finnhub");const s=r.c||0,i=r.pc||s,o=s-i,a=i?o/i*100:0,l=r.t&&r.t>0,c=l?Math.floor(Math.random()*200)+50:0;let n="operational";return l?Math.abs(a)>5&&(n="degraded"):n="paused",{id:t,name:`${t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:n,isUp:l,responseTime:c,avgResponseTime:c,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!l,price:s,change:o,changePercent:a,volume:r.v||0,marketState:l?"REGULAR":"CLOSED",symbol:t,apiSource:"finnhub"}},Oa=(t,r)=>{if(!r||r.c===null||r.c===void 0)throw new Error("Invalid data format from Massive");const s=r.c||0,i=r.pc||s,o=s-i,a=i?o/i*100:0,l=r.t&&r.t>0,c=l?Math.floor(Math.random()*200)+50:0;let n="operational";return l?Math.abs(a)>5&&(n="degraded"):n="paused",{id:t,name:`${t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:n,isUp:l,responseTime:c,avgResponseTime:c,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!l,price:s,change:o,changePercent:a,volume:r.v||0,marketState:l?"REGULAR":"CLOSED",symbol:t,apiSource:"massive"}},jt=(t,r)=>r.source==="finnhub"?Ba(t,r.data):r.source==="massive"?Oa(t,r.data):za(t,r.data),Mr=async()=>{try{let t=["AAPL","GOOGL","MSFT","TSLA","AMZN"];try{const a=localStorage.getItem("defaultSymbols");if(a){const l=JSON.parse(a);Array.isArray(l)&&l.length>0&&(t=l)}}catch(a){console.error("Error loading default symbols from localStorage:",a)}let r=[];try{const a=localStorage.getItem("deletedMonitors");a&&(r=JSON.parse(a))}catch(a){console.error("Error loading deleted monitors:",a)}const i=t.filter(a=>!r.includes(a)).map(a=>ze(a,"1d","1d").then(l=>jt(a,l)).catch(l=>(console.error(`Failed to fetch ${a}:`,l),{id:a,name:`${a}`,url:`https://finance.yahoo.com/quote/${a}`,type:"http",status:"down",isUp:!1,responseTime:0,avgResponseTime:0,uptime:0,uptimePercent:0,lastCheck:new Date().toISOString(),paused:!1,symbol:a,apiSource:"none"})));return(await Promise.all(i)).filter(a=>a!==null)}catch(t){return console.error("Failed to fetch monitors:",t),[]}},Pr=async t=>{try{let r=t.symbol;if(!r&&t.url&&(r=t.url.split("/").pop()?.toUpperCase().replace(/[^A-Z]/g,"")),!r)throw new Error("Stock symbol is required");r=r.toUpperCase().trim();try{let o=[];const a=localStorage.getItem("deletedMonitors");a&&(o=JSON.parse(a)),o=o.filter(l=>l!==r),localStorage.setItem("deletedMonitors",JSON.stringify(o))}catch(o){console.error("Error updating deleted monitors:",o)}const s=await ze(r,"1d","1d"),i=jt(r,s);t.name&&(i.name=t.name);try{let o=["AAPL","GOOGL","MSFT","TSLA","AMZN"];const a=localStorage.getItem("defaultSymbols");if(a){const l=JSON.parse(a);Array.isArray(l)&&l.length>0&&(o=l)}o.includes(r)||(o.push(r),localStorage.setItem("defaultSymbols",JSON.stringify(o)))}catch(o){console.error("Error saving default symbols:",o)}return i}catch(r){throw console.error("Failed to create monitor:",r),r}},Ar=async(t,r)=>{try{const s=r.symbol||t,i=await ze(s,"1d","1d");return jt(s,i)}catch(s){throw console.error("Failed to update monitor:",s),s}},Ft=async t=>{try{let r=["AAPL","GOOGL","MSFT","TSLA","AMZN"];try{const o=localStorage.getItem("defaultSymbols");if(o){const a=JSON.parse(o);Array.isArray(a)&&a.length>0&&(r=a)}}catch(o){console.error("Error loading default symbols:",o)}let s=[];try{const o=localStorage.getItem("deletedMonitors");o&&(s=JSON.parse(o))}catch(o){console.error("Error loading deleted monitors:",o)}s.includes(t)||(s.push(t),localStorage.setItem("deletedMonitors",JSON.stringify(s)));const i=r.filter(o=>o!==t);return localStorage.setItem("defaultSymbols",JSON.stringify(i)),{success:!0}}catch(r){throw console.error("Error deleting monitor:",r),r}},Tt=async t=>{const r=await ze(t,"1d","1d");return jt(t,r)},Wt=async t=>{try{const r=await ze(t,"1m","1d");if(r.source==="finnhub")return[];const s=r.data;if(!s?.chart?.result?.[0])throw new Error("Invalid data format");const i=s.chart.result[0],o=i.timestamp||[],l=i.indicators?.quote?.[0]?.close||[];return o.map((c,n)=>({time:new Date(c*1e3).toISOString(),timestamp:new Date(c*1e3).toISOString(),value:l[n]||0,responseTime:l[n]||0}))}catch(r){return console.error("Failed to fetch chart data:",r),[]}},Dr=async t=>Wt(t),Er=async(t,r="response-time")=>r==="uptime"?Dr(t):Wt(t),Ht=async(t,r="1d")=>{let s="1d",i="1mo",o="D";r==="1H"||r==="1h"?(s="1h",i="1d",o="60"):(r==="1D"||r==="1d")&&(s="1d",i="1mo",o="D");try{const a=await Qe(t,s,i);if(a.source==="yahoo"){const l=a.data;if(!l?.chart?.result?.[0])throw new Error("Invalid data format from Yahoo Finance");const c=l.chart.result[0],n=c.timestamp||[],h=c.indicators?.quote?.[0];if(!h||n.length===0)throw new Error("No quote data available from Yahoo Finance");const g=h.close||[],w=h.open||[],p=h.high||[],C=h.low||[],N=h.volume||[];if(g.length===0)throw new Error("No historical data available");const u=c.meta,y=u?.regularMarketPrice||u?.previousClose||g[g.length-1]||0,b=[],k=Math.min(n.length,g.length);for(let T=0;T<k;T++){const H=n[T],Y=g[T];H&&Y!==null&&Y!==void 0&&!isNaN(Y)&&b.push({time:new Date(H*1e3).toISOString(),timestamp:H*1e3,open:w[T]!==null&&w[T]!==void 0?w[T]:Y,high:p[T]!==null&&p[T]!==void 0?p[T]:Y,low:C[T]!==null&&C[T]!==void 0?C[T]:Y,close:Y,volume:N[T]!==null&&N[T]!==void 0?N[T]:0})}if(b.length===0)throw new Error("No valid price data points found");return{symbol:t,currentPrice:y,data:b}}}catch(a){console.warn(`Yahoo Finance failed for ${t}, trying Finnhub candles:`,a.message)}try{const a=await Lr(t,o);if(a.source==="finnhub_candles"){const l=a.data,c=l.c||[],n=l.o||[],h=l.h||[],g=l.l||[],w=l.t||[],p=l.v||[];if(c.length===0)throw new Error("No candle data from Finnhub");const C=c[c.length-1]||0,N=[];for(let u=0;u<c.length;u++){const y=w[u],b=c[u];y&&b!==null&&b!==void 0&&!isNaN(b)&&N.push({time:new Date(y*1e3).toISOString(),timestamp:y*1e3,open:n[u]!==null&&n[u]!==void 0?n[u]:b,high:h[u]!==null&&h[u]!==void 0?h[u]:b,low:g[u]!==null&&g[u]!==void 0?g[u]:b,close:b,volume:p[u]!==null&&p[u]!==void 0?p[u]:0})}if(N.length===0)throw new Error("No valid price data from Finnhub candles");return{symbol:t,currentPrice:C,data:N}}}catch(a){console.warn(`Finnhub candles failed for ${t}:`,a.message)}try{const a=await ct(t);if(a.source==="finnhub"){const l=a.data;return{symbol:t,currentPrice:l.c||0,data:[{time:new Date().toISOString(),timestamp:Date.now(),open:l.o||l.c||0,high:l.h||l.c||0,low:l.l||l.c||0,close:l.c||0,volume:0}]}}}catch(a){console.error(`All APIs failed for ${t}:`,a.message)}throw new Error(`Failed to fetch chart data for ${t}. Please try again later.`)},Wa=Object.freeze(Object.defineProperty({__proto__:null,createMonitor:Pr,deleteMonitor:Ft,fetchFinnhub:ct,fetchFinnhubCandles:Lr,fetchMarketData:ze,fetchYahooFinance:Qe,getMonitorChartData:Er,getMonitorResponseTimeChart:Wt,getMonitorUptimeChart:Dr,getMonitors:Mr,getPriceChartData:Ht,togglePauseMonitor:Tt,updateMonitor:Ar},Symbol.toStringTag,{value:"Module"}));gt.register(xt,mt,pt,bt,ea,ft,yt,kt,zt,ta,ra);function Ha({chartType:t,candlestickData:r,chartData:s,symbol:i,currentInterval:o,lineChartOptions:a,candlestickChartOptions:l}){if(t==="candlestick")try{if(!r||!r.datasets||!r.datasets[0]||!r.datasets[0].data||r.datasets[0].data.length===0)throw new Error("Candlestick data not available");if(!r.datasets[0].data.every(n=>n&&typeof n=="object"&&"o"in n&&"h"in n&&"l"in n&&"c"in n&&!isNaN(Number(n.o))&&!isNaN(Number(n.h))&&!isNaN(Number(n.l))&&!isNaN(Number(n.c))))throw new Error("Invalid candlestick data structure");return e.jsx(sa,{type:"candlestick",data:r,options:l},`candlestick-${i}-${o}`)}catch(c){return console.error("Candlestick chart error:",c),s&&s.datasets&&s.datasets[0]?e.jsx(Xe,{data:s,options:a},`line-fallback-${i}-${o}`):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm",children:"Unable to display candlestick chart. Showing line chart instead."})})}return s&&s.datasets&&s.datasets[0]?e.jsx(Xe,{data:s,options:a},`line-${i}-${o}`):null}function Ua(){const[t,r]=d.useState("QQQ"),[s,i]=d.useState("1D"),[o,a]=d.useState(null),[l,c]=d.useState(null),[n,h]=d.useState(null),[g,w]=d.useState(!1),[p,C]=d.useState(null),[N,u]=d.useState(null),[y,b]=d.useState(null),[k,T]=d.useState([]),[H,Y]=d.useState(!1),[F,_]=d.useState("line"),X=d.useRef(null),m=d.useRef(null),A=d.useRef(null),V=d.useRef(null),M=d.useRef(null),P=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){return O.parsed.y!==null&&O.parsed.y!==void 0?`${O.dataset.label}: $${O.parsed.y.toFixed(2)}`:""}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O!=null&&!isNaN(O)?"$"+O.toFixed(2):""},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),L=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){const U=O.parsed.y;return U>=1e6?`Volume: ${(U/1e6).toFixed(2)}M`:U>=1e3?`Volume: ${(U/1e3).toFixed(2)}K`:`Volume: ${U}`}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O>=1e6?(O/1e6).toFixed(1)+"M":O>=1e3?(O/1e3).toFixed(1)+"K":O},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),I=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){const U=O.raw;return U&&typeof U=="object"&&"o"in U&&"h"in U&&"l"in U&&"c"in U?[`Open: $${U.o.toFixed(2)}`,`High: $${U.h.toFixed(2)}`,`Low: $${U.l.toFixed(2)}`,`Close: $${U.c.toFixed(2)}`]:""}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O!=null&&!isNaN(O)?"$"+O.toFixed(2):""},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),W=d.useCallback(async()=>{if(!t||!t.trim()){C("Please enter a stock symbol");return}const O=o;w(!0),C(null);try{const U=new Promise((oe,ie)=>setTimeout(()=>ie(new Error("Request timeout. Please try again.")),2e4)),de=Ht(t.toUpperCase().trim(),s),ae=await Promise.race([de,U]);if(!ae)throw new Error("No data received from API");if(!ae.data||!Array.isArray(ae.data))throw new Error("Invalid data format: data.data is not an array");if(ae.data.length===0)throw new Error("No chart data available for this symbol");const Z=ae.data.filter(oe=>{if(!oe||!oe.timestamp)return!1;const ie=oe.close;return ie!=null&&!isNaN(ie)&&ie>0});if(Z.length===0)throw new Error("No valid price data available. All data points are invalid.");Z.sort((oe,ie)=>oe.timestamp-ie.timestamp);const j=Z.map(oe=>{try{const ie=new Date(oe.timestamp);return isNaN(ie.getTime())?"":s==="1H"?ie.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"}):ie.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"America/New_York"})}catch{return""}}).filter(oe=>oe!==""),v=Z.map(oe=>{const ie=Number(oe.close);return isNaN(ie)?null:ie}).filter(oe=>oe!==null),D=Z.map(oe=>{const ie=Number(oe.volume)||0;return isNaN(ie)?0:ie}),z=Math.min(j.length,v.length,D.length),ee=j.slice(0,z),Q=v.slice(0,z),xe=D.slice(0,z);if(Q.length===0)throw new Error("No valid price data to display after processing");const f=Q[0],B=Q[Q.length-1],J=B-f,ve=f!==0?J/f*100:0,$e={labels:ee,datasets:[{label:`${t.toUpperCase()} Price`,data:Q,borderColor:J>=0?"rgb(34, 197, 94)":"rgb(239, 68, 68)",backgroundColor:J>=0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0,pointRadius:0,pointHoverRadius:4,borderWidth:2}],currentPrice:ae.currentPrice||B,change:J,changePercent:ve},Be={labels:ee,datasets:[{label:"Volume",data:xe,backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},ye=Z.slice(0,z).map((oe,ie)=>{const Ie=Number(oe.open)||Number(oe.close)||0,We=Number(oe.high)||Number(oe.close)||0,He=Number(oe.low)||Number(oe.close)||0,Le=Number(oe.close)||0;return{x:ie,o:Ie,h:We,l:He,c:Le}}),Ae={labels:ee,datasets:[{label:`${t.toUpperCase()} Candlestick`,data:ye}]};A.current=$e,V.current=Be,M.current=Ae,a($e),c(Be),h(Ae),b(s),u(new Date);const Oe=`${t.toUpperCase()}-${s}`;T(oe=>{const ie=oe.filter(We=>We!==Oe),Ie=[Oe,...ie].slice(0,5);return localStorage.setItem("tradingRecentSearches",JSON.stringify(Ie)),Ie})}catch(U){const de=U.message||"Failed to load chart data. Please check the symbol and try again.";C(de),O||(a(null),c(null),h(null))}finally{w(!1)}},[t,s]);d.useEffect(()=>{const O=localStorage.getItem("tradingRecentSearches");if(O)try{T(JSON.parse(O))}catch{}},[]),d.useEffect(()=>{t==="QQQ"&&!o&&W()},[]),d.useEffect(()=>{F==="candlestick"&&(!n||!n.datasets||!n.datasets[0]||!n.datasets[0].data||n.datasets[0].data.length===0)&&(console.warn("Candlestick data not available, resetting to line chart"),_("line"))},[F,n]);const S=()=>{t&&t.trim()&&(W(),Y(!1))},E=()=>{t&&t.trim()&&W()},R=O=>{O!==s&&(i(O),t&&t.trim()&&o&&setTimeout(()=>{W()},100))},se=O=>{const[U,de]=O.split("-");r(U),i(de),Y(!1),setTimeout(()=>{W()},100)},he=O=>{O.key==="Enter"&&S()};return d.useEffect(()=>()=>{X.current&&clearInterval(X.current)},[]),e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Charts"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time stock market data and analysis"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stock Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:m,type:"text",id:"symbol",value:t,onChange:O=>{const U=O.target.value.toUpperCase();r(U),Y(U.length===0&&k.length>0)},onKeyDown:he,onFocus:()=>{k.length>0&&!t&&Y(!0)},onBlur:()=>{setTimeout(()=>Y(!1),200)},placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),t&&e.jsx("button",{type:"button",onClick:()=>{r(""),Y(!1),m.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),H&&k.length>0&&!g&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recent Searches"}),k.map(O=>{const[U,de]=O.split("-");return e.jsxs("button",{type:"button",onClick:()=>se(O),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:U}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:de})]},O)})]})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Interval"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>R("1D"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="1D"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Day"}),e.jsx("button",{type:"button",onClick:()=>R("1H"),className:`px-6 py-2 rounded-md font-medium transition-all ${s==="1H"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Hour"})]})]}),e.jsx("div",{className:"w-full lg:w-auto",children:e.jsx("button",{type:"button",onClick:S,disabled:g||!t||!t.trim(),className:"w-full lg:w-auto px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})})]}),p&&e.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:p}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check the symbol and try again"})]})]})}),(o||g)&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Current Price"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:g&&!o?e.jsx("span",{className:"text-gray-400",children:"Loading..."}):`$${o?.currentPrice?.toFixed(2)||"N/A"}`})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${!o||o.change>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsx("p",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Change"}),e.jsx("p",{className:`text-xl font-bold ${!o||o.change>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:g&&!o?e.jsx("span",{className:"text-gray-400",children:"--"}):o?`${o.change>=0?"+":""}$${o.change.toFixed(2)}`:"--"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${!o||o.changePercent>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsx("p",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Change %"}),e.jsx("p",{className:`text-xl font-bold ${!o||o.changePercent>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:g&&!o?e.jsx("span",{className:"text-gray-400",children:"--"}):o?`${o.changePercent>=0?"+":""}${o.changePercent.toFixed(2)}%`:"--"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Interval"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:y||"N/A"})]})]}),(N||o)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:N?`Last updated: ${N.toLocaleString("en-US",{timeZone:"America/New_York"})}`:"Ready to load data"})]}),o&&e.jsxs("button",{type:"button",onClick:E,disabled:g,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${g?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Price Chart"}),t&&y&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.toUpperCase()," - ",y," interval"]})]}),o&&e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>{try{_("line")}catch(O){console.error("Error switching to line chart:",O)}},className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${F==="line"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Line"}),e.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation();try{if(n&&n.datasets&&n.datasets[0]&&n.datasets[0].data&&n.datasets[0].data.length>0){const U=n.datasets[0].data[0];U&&"o"in U&&"h"in U&&"l"in U&&"c"in U?_("candlestick"):(console.warn("Candlestick data structure invalid, staying on line chart"),_("line"))}else console.warn("Candlestick data not available, staying on line chart"),_("line")}catch(U){console.error("Error switching to candlestick chart:",U),_("line")}},disabled:!n||!n.datasets||!n.datasets[0]||!n.datasets[0].data||n.datasets[0].data.length===0,className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${F==="candlestick"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Candlestick"})]})]}),e.jsx("div",{className:"h-[500px] relative",children:o&&o.labels&&o.labels.length>0&&o.datasets&&o.datasets[0]&&o.datasets[0].data&&o.datasets[0].data.length>0?e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-800/90 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx(Ha,{chartType:F,candlestickData:n,chartData:o,symbol:t,currentInterval:y,lineChartOptions:P.current,candlestickChartOptions:I.current})]}):g?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading chart data..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:"No chart data available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please try searching again or check the symbol"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trading Volume"}),t&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.toUpperCase()," trading volume over time"]})]}),e.jsx("div",{className:"h-[350px] relative",children:l&&l.labels&&l.labels.length>0?e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-800/80 z-10 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:e.jsx(aa,{data:l,options:L.current})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No volume data available"})})})]})]})}const Ut="savedProjections",Vt=()=>{try{const t=localStorage.getItem(Ut);if(t)return JSON.parse(t)}catch(t){console.error("Error loading saved projections:",t)}return[]},Va=t=>{try{const r=Vt(),s={id:Date.now().toString(),...t,savedAt:new Date().toISOString()};return r.push(s),localStorage.setItem(Ut,JSON.stringify(r)),s}catch(r){throw console.error("Error saving projection:",r),r}},rr=t=>{try{const s=Vt().filter(i=>i.id!==t);return localStorage.setItem(Ut,JSON.stringify(s)),{success:!0}}catch(r){throw console.error("Error deleting projection:",r),r}};gt.register(xt,mt,pt,bt,ft,yt,kt,zt,fr);const Ee=[3,7,31,12,19,5,11,13,17,23,29,31],me=[11,13,17,29,31,47,59,61,97,101],$r=72n,_a=1n<<$r,ar=1n<<$r-2n,Rt=8n,Ir=256,At=12,sr=Math.PI*2,Ya=[3,7,31,12,19,5,11,13,17,23,29,31],Fr=["dub","kubt","k'anch","dub","kubt","k'anch"];function or(t,r,s){t=(t%s+s)%s;let i=1n;for(;r>0n;)r&1n&&(i=i*t%s),t=t*t%s,r>>=1n;return i}function nr(t,r){const s=t*t,i=r*r;return(s-i)/(s+i)}function Ga(t){const r=me.indexOf(t);if(r===-1)return nr(t,t-2);const s=t,i=r>0?me[r-1]:2;return nr(s,i)}function Ja(t){return t==="dub"?3:t==="kubt"?5:t==="k'anch"||t==="k'anchay"?7:typeof t=="number"?Math.pow(3,t)%3:3}function Ka(t){const s=t/432;return{phase:Math.log(s)/Math.log(2)*(Math.PI/2),magnitude:Math.sqrt(s)}}function qa(t,r){return Array.isArray(r)?r[t%r.length]:r}function Za(t,r,s,i,o=31){return ds(t,t,s,i,typeof r=="number"?r:o,o)}function Qa(t,r,s,i){const o=i.slice(0,3).reduce((h,g)=>h*g,1),a=Math.log(o)/Math.log(3),l=r/100,c=Math.pow(3,l),n=1+a/1e3;return t*c*n}function lr(t,r){const s=Math.pow(10,r);return Math.floor(t*s)/s}function Xa({lastPrice:t,depthPrime:r,omegaHz:s=432,triad:i=[2,5,7],decimals:o=8,lambdaSchedule:a=Fr,omegaSchedule:l=null,N:c=120}){const n=Ga(r),h=i.slice(0,3).reduce((C,N)=>C*N,1),g=Math.log(h)/Math.log(3);let w=1+.01*g+.001*(r%7);const p=[];for(let C=0;C<c;C++){const N=a[C%a.length],u=qa(C,l||s),y=Za(C,n,N,u,r);w=Qa(w,y,u,i);let b=0;for(let F=0;F<At;F++){const _=C*(sr/At)+F*sr/At,X=Ya[F]%360*(Math.PI/180),A=Ja(N)%3*(Math.PI/360),{phase:V}=Ka(u),P=Math.floor(F/3)%2===0?1:-1,L=(C+F)%2===0?1:-1,I=_+X+A+.5*V,W=Math.cos(I),S=Math.tanh(w/1e5),E=W*P*L*n*(1+.5*S);b+=E}const k=Math.log(r)/Math.log(2),T=Math.max(1,g),H=lr(b*k*.5*T,o),Y=lr(t+H,o);p.push({x:C,y:Y})}return p}function es(t,r){Tr(r,!1);const[s,i,o]=r,l=or(BigInt(i),BigInt(o),ar)+ar;return or(BigInt(t),l,_a)}function ts(t){const r=t>>Rt;return Number(r)/Number(1n<<64n)*2-1}function st(t){const r=t-1;let s=0;for(let i=0;i<Ee.length;i++){const o=r*(Math.PI*2/12)*Ee[i];s+=Math.cos(o)}return s/Ee.length}function Dt(t){return Math.trunc(t*Ir)}function rs(t){return t/Ir}const as=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571];function ss(t,r,s){if(!_t(t))throw new Error(`Depth must be a prime number, got: ${t}. Prime exponentiation towers require prime-based depth.`);const i=s.indexOf(t);if(i===-1)throw new Error(`Depth prime ${t} not found in PRIMES_500. Prime exponentiation towers must use primes from the hardcoded list.`);const o=[],a=Math.floor(r/2);for(let l=-a;l<=a&&!(o.length>=r);l++){const c=Math.max(0,Math.min(s.length-3,i+l)),n=[s[c],s[c+1],s[c+2]];try{Tr(n,!1),o.push(n)}catch(h){throw console.error(`Invalid triadic set generated: ${JSON.stringify(n)}`,h),new Error(`Failed to generate valid triadic set: ${h.message}`)}}return o}function _t(t){if(t<2)return!1;if(t===2)return!0;if(t%2===0)return!1;for(let r=3;r*r<=t;r+=2)if(t%r===0)return!1;return!0}const ir=[12,15];function Tr(t,r=!1){if(!Array.isArray(t)||t.length!==3)throw new Error(`Triadic set must be array of exactly 3 elements, got: ${JSON.stringify(t)}`);for(const s of t){if(!Number.isInteger(s)||s<2)throw new Error(`Triadic set values must be integers >= 2, got: ${JSON.stringify(t)}`);if(!_t(s)&&!(r&&ir.includes(s)))throw new Error(`Triadic set contains non-prime value ${s} which is not an explicitly allowed coprime. Triadic sets for prime exponentiation towers must contain primes. Allowed coprimes (if explicitly chosen): ${ir.join(", ")}. Got: ${JSON.stringify(t)}`)}return!0}function os(t){if(t<0||t>=Ee.length)return 0;let r=0;for(let s=0;s<=t;s++)_t(Ee[s])&&r++;return r}function ns(t,r){if(!r||r.length===0)return 1;const s=r.reduce((a,l)=>a+l,0)/r.length,i=r.reduce((a,l)=>a+Math.pow(l-s,2),0)/r.length,o=Math.log2(Math.max(1,i))+1;return Math.max(1,o*(t+1)/12)}function ls(t,r,s){const i=os(r),o=ns(r,s);return Math.log2(Math.max(1,i)/Math.max(1,o))}function is(t){return t==="dub"?3:t==="kubt"?5:t==="k'anch"||t==="k'anchay"?7:typeof t=="number"?Math.pow(3,t)%3:3}function ds(t,r,s,i,o,a=31){const l=(1+Math.sqrt(5))/2,c=Math.PI,n=r*c*l,h=t*2*c/12,g=is(s),w=g>0?g:1,p=Math.log(w)/Math.log(3),N=(i||144e3)/432;let u=0;if(o&&typeof o=="object"&&o.p&&o.q)u=o.p*o.p-o.q*o.q;else if(typeof o=="number"){const y=me.indexOf(o),b=o,k=y>0?me[y-1]:2;u=b*b-k*k}else{const y=a||31,b=me.indexOf(y),k=y,T=b>0?me[b-1]:2;u=k*k-T*T}return n+h+p+N+u}function cs(t,r){if(r<0||r>=Ee.length)return 0;const s=Ee[r],i=(t-1)*2*Math.PI/12/Math.log(3),o=Math.pow(3,i),a=(t-1)*2*Math.PI/12*s;return o*Math.cos(a)}function us(t,r,s,i,o=.01,a=31,l=432,c=!0,n=!1){if(t.length<2)return{lines:[]};const h=t[t.length-1],g=[];for(let w=0;w<i.length;w++){const p=i[w],C=es(s,p),N=ts(C),u=n?l+w*96:l,y=8;try{const k=Xa({lastPrice:h,depthPrime:a,omegaHz:u,triad:p,decimals:y,lambdaSchedule:c?Fr:["dub"],omegaSchedule:n?[432,528,432,528]:null,N:r}).map(F=>F.y),T=k.map(Dt);let H=0,Y=0;for(let F=1;F<k.length;F++){const _=st(F),X=st(F-1);if((_>0&&X<=0||_<0&&X>=0)&&H++,F>1&&F<k.length-1){const m=k[F-1],A=k[F],V=k[F+1];(A>m&&A>V||A<m&&A<V)&&Y++}}g.push({triad:p,base:s,aQ8:(C>>Rt).toString(),pointsQ8:T,points:k,zeroCrossings:H,turningPoints:Y,omega:u,depthPrime:a})}catch(b){console.error(`Failed to compute crystalline projection for triad ${p}:`,b);let k=h;const T=[];let H=0,Y=0;for(let F=1;F<=r;F++){const _=st(F),X=o*N*_;k=k*(1+X);const m=Dt(k);if(T.push(m),F>1){const A=st(F-1);(_>0&&A<=0||_<0&&A>=0)&&H++}}g.push({triad:p,base:s,aQ8:(C>>Rt).toString(),pointsQ8:T,points:T.map(rs),zeroCrossings:H,turningPoints:Y})}}return{symbol:null,lastPriceQ8:Dt(h),beta:o,horizon:r,lines:g}}function Et(t,r){if(t.length<2)return Array(r).fill(t[t.length-1]||0);const s=t.slice(-30),i=s.length;let o=0,a=0,l=0,c=0;s.forEach((w,p)=>{const C=p,N=w;o+=C,a+=N,l+=C*N,c+=C*C});const n=(i*l-o*a)/(i*c-o*o),h=(a-n*o)/i,g=[];for(let w=1;w<=r;w++){const p=h+n*(i+w-1);g.push(Math.max(0,p))}return g}function hs(t){try{const r=`stabilizedModel_${t.toUpperCase()}`,s=localStorage.getItem(r);if(s)return JSON.parse(s)}catch(r){console.error("Error loading stabilized model:",r)}return null}function dr(t,r=.9){const s=[210,0,40,90,140,260,300,20,170,200,280,320,45];return`hsla(${s[t%s.length]}, 85%, 60%, ${r})`}function gs(){const t=gr(),[r,s]=d.useState(""),[i,o]=d.useState("1D"),[a,l]=d.useState(null),[c,n]=d.useState(!1),[h,g]=d.useState(null),[w,p]=d.useState(null),[C,N]=d.useState(null),[u,y]=d.useState(20),[b,k]=d.useState(48),[T,H]=d.useState([]),[Y,F]=d.useState(!1),[_,X]=d.useState("primetetration"),[m,A]=d.useState(null),[V,M]=d.useState(!1),[P,L]=d.useState(null),[I,W]=d.useState(!1),[S,E]=d.useState(!1),[R,se]=d.useState(4),[he,O]=d.useState(me[4]||31),[U,de]=d.useState(3),[ae,Z]=d.useState(12),[j,v]=d.useState(null),[D,z]=d.useState(.01),[ee,Q]=d.useState(432),[xe,f]=d.useState(!1),[B,J]=d.useState(!0),[ve,$e]=d.useState(!1),[Be,ye]=d.useState(!1),[Ae,Oe]=d.useState(!1),[oe,ie]=d.useState(null),Ie=d.useRef(null),We=d.useRef(null),He=d.useRef(null),Le=d.useRef(null),Fe=d.useRef(null),Te=d.useRef(null),_e=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(x){return x.parsed.y!==null&&x.parsed.y!==void 0?`${x.dataset.label}: $${x.parsed.y.toFixed(2)}`:""}}},zoom:{zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0,mode:"xy",modifierKey:null,threshold:10},limits:{x:{min:"original",max:"original"},y:{min:"original",max:"original"}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{maxTicksLimit:20,font:{size:11},autoSkip:!0}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(x){return x!=null&&!isNaN(x)?"$"+x.toFixed(2):""},font:{size:11}},min:void 0,max:void 0}}}),pe=d.useCallback(async()=>{if(!r||!r.trim()){g("Please enter a stock symbol");return}const x=a;n(!0),g(null);try{const te=new Promise(($,G)=>setTimeout(()=>G(new Error("Request timeout. Please try again.")),2e4)),q=Ht(r.toUpperCase().trim(),i),ce=await Promise.race([q,te]);if(!ce)throw new Error("No data received from API");if(!ce.data||!Array.isArray(ce.data))throw new Error("Invalid data format: data.data is not an array");if(ce.data.length===0)throw new Error("No chart data available for this symbol");const ge=ce.data.filter($=>{if(!$||!$.timestamp)return!1;const G=$.close;return G!=null&&!isNaN(G)&&G>0});if(ge.length===0)throw new Error("No valid price data available. All data points are invalid.");ge.sort(($,G)=>$.timestamp-G.timestamp);const be=ge.map($=>Number($.close));He.current=be;const Ye=ge.map($=>{try{const G=new Date($.timestamp);return isNaN(G.getTime())?"":i==="1H"?G.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"}):G.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"America/New_York"})}catch{return""}}).filter($=>$!==""),Ur=hs(r.toUpperCase().trim());let ne=[],Ps=Ur,le=u;_==="primetetration"&&b&&(i==="1H"?le=b:i==="1D"||i==="1d"?le=Math.ceil(b/24):le=u),le=Math.max(1,Math.min(1e3,le||u||20));const Ne=be[be.length-1];if(_==="primetetration")try{const $=me[R]||31,G=ss($,ae,as),K=us(be,le,U,G,D,$,ee,B,xe);if(K.symbol=r.toUpperCase().trim(),v(K),K.lines&&K.lines.length>0&&K.lines[0].points){if(ne=K.lines[0].points,ne.length!==le)if(console.warn(`Projected prices length (${ne.length}) doesn't match stepsToUse (${le})`),ne.length<le){const ue=ne[ne.length-1]||Ne;for(;ne.length<le;)ne.push(ue)}else ne=ne.slice(0,le)}else ne=Et(be,le)}catch($){console.error("Prime Tetration projection failed, falling back to simple:",$),ne=Et(be,le),v(null)}else ne=Et(be,le);if(_!=="primetetration"&&v(null),!Array.isArray(ne)||ne.length===0)ne=Array(le).fill(Ne);else if(ne.length!==le)if(console.warn(`Final projectedPrices length (${ne.length}) doesn't match stepsToUse (${le}), adjusting...`),ne.length<le){const $=ne[ne.length-1]||Ne;for(;ne.length<le;)ne.push($)}else ne=ne.slice(0,le);const As=Array.from({length:12},($,G)=>ls(be.length,G,be)).reduce(($,G)=>$+G,0)/12,Ds=Array.from({length:12},($,G)=>Math.abs(cs(be.length,G))).reduce(($,G)=>$+G,0)/12;A(_==="primetetration"&&j?{depthPrime:me[R]||31,base:U,projectionCount:ae,beta:D,horizon:le,phi:Ee,lines:j.lines?j.lines.length:0}:null);const vt=[];for(let $=1;$<=le;$++)vt.push(`Step ${$}`);const Ge=Array.isArray(Ye)?Ye:[],Je=Array.isArray(vt)?vt:[],re=Array.isArray(be)?be:[],ke=Array.isArray(ne)?ne:[];if(Ge.length!==re.length){console.warn("Historical labels and prices length mismatch:",Ge.length,re.length);const $=Math.min(Ge.length,re.length);Ge.splice($),re.splice($)}if(Je.length!==ke.length){console.warn("Projected labels and prices length mismatch:",Je.length,ke.length);const $=Math.min(Je.length,ke.length);Je.splice($),ke.splice($)}const je=[...Ge,...Je],Se=[...re,...ke];if(je.length!==Se.length){console.warn("Labels and prices length mismatch:",je.length,Se.length);const $=Math.min(je.length,Se.length);je.splice($),Se.splice($)}const wt=re[0]||0,Jt=ke.length>0?ke[ke.length-1]:Ne,Kt=Ne-wt,Vr=wt!==0?Kt/wt*100:0,qt=Jt-Ne;let et=0;Ne!==0&&Ne>0&&(et=qt/Ne*100,et=Math.max(-1e3,Math.min(1e3,et)));const _r=Math.max(0,Jt);if(ke.length>0&&re.length>0){const $=re[re.length-1],G=ke[0];Math.abs(G-$)/$>.02&&(ke[0]=$+(G-$)*.3,Se[re.length]=ke[0])}const Ce=je.map(($,G)=>{if(G<re.length){const K=Se[G];return K!=null&&!isNaN(K)&&K>0?Number(K):null}if(G===re.length&&re.length>0){const K=re[re.length-1],ue=Se[G];return ue!=null&&!isNaN(ue)&&ue>0?K*.8+Number(ue)*.2:K}return null}),fe=je.map(($,G)=>{if(G<re.length)return null;if(G===re.length&&re.length>0){const K=re[re.length-1],ue=Se[G];return ue!=null&&!isNaN(ue)&&ue>0?K*.8+Number(ue)*.2:K}if(G<Se.length){const K=Se[G];return K!=null&&!isNaN(K)&&K>0?Number(K):null}return null}),Zt=Ce.some($=>$!=null),Qt=fe.some($=>$!=null);if(!Zt&&!Qt)throw new Error("No valid chart data available. All data points are null or invalid.");const Pe=re.length,Yr=Ce[Pe]||fe[Pe];console.log("Chart Data Debug:",{labelsLength:je.length,pricesLength:Se.length,historicalLength:re.length,projectedLength:ke.length,historicalDataPoints:Ce.filter($=>$!=null).length,projectedDataPoints:fe.filter($=>$!=null).length,firstHistorical:Ce[0],lastHistorical:Ce[re.length-1],connectionIndex:Pe,connectionPrice:Yr,firstProjected:fe[Pe],secondProjected:fe[Pe+1],lastProjected:fe[fe.length-1],hasHistoricalData:Zt,hasProjectedData:Qt,sampleHistorical:Ce.slice(Math.max(0,re.length-5),re.length+1),sampleProjected:fe.slice(Pe,Pe+5),projectedOscillations:fe.slice(Pe,Pe+10).filter($=>$!==null).map(($,G,K)=>G===0?0:K[G]-K[G-1])});const Gr=Ce.filter($=>$!=null&&!isNaN($)).length,Jr=fe.filter($=>$!=null&&!isNaN($)).length;if(Gr===0&&Jr===0)throw new Error("No valid data points available for chart. All values are null or invalid.");for(;Ce.length<je.length;)Ce.push(null);for(;fe.length<je.length;)fe.push(null);const Nt=[{label:`${r.toUpperCase()} Historical`,data:Ce.slice(0,je.length),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!1,pointRadius:2,pointHoverRadius:6,borderWidth:2,spanGaps:!1,showLine:!0,stepped:!1}];_==="primetetration"&&j&&j.lines&&j.lines.length>0?j.lines.forEach(($,G)=>{let K=$.points||[];if(K.length!==le)if(console.warn(`Line ${G} points length (${K.length}) doesn't match stepsToUse (${le})`),K.length<le){const tt=K[K.length-1]||Ne;for(;K.length<le;)K.push(tt)}else K=K.slice(0,le);const ue=je.map((tt,er)=>{if(er<re.length)return null;const rt=er-re.length;if(rt>=0&&rt<K.length){if(rt===0&&re.length>0)return re[re.length-1]*.8+K[0]*.2;const Ke=K[rt];return Ke!=null&&!isNaN(Ke)&&Ke>0?Number(Ke):null}return null});Nt.push({label:`Triad [${$.triad.join("-")}]`,data:ue,borderColor:dr(G,.9),backgroundColor:dr(G,.18),fill:!1,borderWidth:2,pointRadius:0,tension:.4,spanGaps:!1,showLine:!0,stepped:!1})}):Nt.push({label:`${r.toUpperCase()} Projected (Prime Tetration)`,data:fe.slice(0,je.length),borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",borderDash:[5,5],tension:.4,fill:!1,pointRadius:2,pointHoverRadius:6,borderWidth:2,spanGaps:!1,showLine:!0,stepped:!1});const Me={labels:je,datasets:Nt,currentPrice:ce.currentPrice||Ne,change:Kt,changePercent:Vr,projectedPrice:_r,projectedChange:qt,projectedChangePercent:et};console.log("Final Chart Data:",{labelsCount:Me.labels.length,datasetsCount:Me.datasets.length,historicalDataCount:Me.datasets[0].data.length,projectedDataCount:Me.datasets[1].data.length,historicalValid:Me.datasets[0].data.filter($=>$!==null).length,projectedValid:Me.datasets[1].data.filter($=>$!==null).length,firstFewHistorical:Me.datasets[0].data.slice(0,5),firstFewProjected:Me.datasets[1].data.slice(re.length,re.length+5)});const St=[...Ce,...fe].filter($=>$!=null&&!isNaN($)&&typeof $=="number"&&$>0);if(St.length>0){const $=Math.min(...St),G=Math.max(...St),K=G-$,ue=Math.max(K*.05,$*.01);Fe.current=Math.max(0,$-ue),Te.current=G+ue,_e.current.scales.y.min=Fe.current,_e.current.scales.y.max=Te.current}We.current=Me,l(Me),N(i),p(new Date);const Xt=`${r.toUpperCase()}-${i}`;H($=>{const G=$.filter(ue=>ue!==Xt),K=[Xt,...G].slice(0,5);return localStorage.setItem("projectionRecentSearches",JSON.stringify(K)),K})}catch(te){const q=te.message||"Failed to load chart data. Please check the symbol and try again.";g(q),x||l(null)}finally{n(!1)}},[r,i,u,_,R,U,ae,D]);d.useEffect(()=>{if(t.state?.loadProjection){const x=t.state.loadProjection;if(Oe(!0),ie(x.id||null),s(x.symbol||""),o(x.interval||"1D"),X(x.projectionModel||"primetetration"),y(x.projectionSteps||20),k(x.projectionHours||48),x.projectionModel==="primetetration"){de(x.base||3),Z(x.projectionCount||12);const te=x.primeDepthIndex!==void 0?x.primeDepthIndex:4;se(te),O(me[te]||31),Q(x.omegaHz||432),J(x.useLambdaSchedule!==void 0?x.useLambdaSchedule:!0),f(x.useOmegaSchedule||!1)}if(x.chartData&&(x.chartData.historicalPrices&&Array.isArray(x.chartData.historicalPrices)&&(He.current=x.chartData.historicalPrices),x.chartData.labels&&x.chartData.datasets)){const te={labels:x.chartData.labels||[],datasets:(x.chartData.datasets||[]).map(ce=>({...ce,data:Array.isArray(ce.data)?ce.data.map(ge=>ge!=null?Number(ge):null):[]})),currentPrice:x.chartData.currentPrice!==void 0?Number(x.chartData.currentPrice):null,change:x.chartData.change!==void 0?Number(x.chartData.change):null,changePercent:x.chartData.changePercent!==void 0?Number(x.chartData.changePercent):null,projectedPrice:x.chartData.projectedPrice!==void 0?Number(x.chartData.projectedPrice):null,projectedChange:x.chartData.projectedChange!==void 0?Number(x.chartData.projectedChange):null,projectedChangePercent:x.chartData.projectedChangePercent!==void 0?Number(x.chartData.projectedChangePercent):null},q=te.datasets.flatMap(ce=>(ce.data||[]).filter(ge=>ge!=null&&!isNaN(ge)&&typeof ge=="number"&&ge>0));if(q.length>0){const ce=Math.min(...q),ge=Math.max(...q),be=ge-ce,Ye=Math.max(be*.05,ce*.01);Fe.current=Math.max(0,ce-Ye),Te.current=ge+Ye,_e.current.scales.y.min=Fe.current,_e.current.scales.y.max=Te.current}l(te),We.current=te}x.snapshotData&&x.projectionModel==="primetetration"&&v(x.snapshotData),window.history.replaceState({},document.title),setTimeout(()=>{Oe(!1)},5e3)}},[t.state]),d.useEffect(()=>{const x=localStorage.getItem("projectionRecentSearches");if(x)try{H(JSON.parse(x))}catch{}},[]);const Yt=()=>{r?.trim()?(F(!1),pe()):g("Please enter a stock symbol")},zr=()=>{r&&r.trim()&&pe()},Br=()=>{if(!r||!r.trim()){g("Please enter a stock symbol first");return}if(!a&&!j){g("No projection data to save. Please load chart data first.");return}$e(!0),ye(!1);try{const x={symbol:r.toUpperCase().trim(),projectionModel:_,interval:i,projectionSteps:u,projectionHours:b,base:U,projectionCount:ae,primeDepth:me[R]||31,primeDepthIndex:R,omegaHz:ee,useLambdaSchedule:B,useOmegaSchedule:xe,beta:D,snapshotData:j?JSON.parse(JSON.stringify(j)):null,chartData:a?JSON.parse(JSON.stringify({labels:a.labels||[],datasets:a.datasets?a.datasets.map(q=>({label:q.label||"",data:Array.isArray(q.data)?q.data.map(ce=>ce!=null?Number(ce):null):[],borderColor:q.borderColor||"rgb(59, 130, 246)",backgroundColor:q.backgroundColor||"rgba(59, 130, 246, 0.1)",borderWidth:q.borderWidth||2,borderDash:q.borderDash||void 0,tension:q.tension!==void 0?q.tension:.4,fill:q.fill!==void 0?q.fill:!1,pointRadius:q.pointRadius!==void 0?q.pointRadius:2,pointHoverRadius:q.pointHoverRadius!==void 0?q.pointHoverRadius:6,spanGaps:q.spanGaps!==void 0?q.spanGaps:!1,showLine:q.showLine!==void 0?q.showLine:!0,stepped:q.stepped!==void 0?q.stepped:!1})):[],currentPrice:a.currentPrice!==void 0?Number(a.currentPrice):null,change:a.change!==void 0?Number(a.change):null,changePercent:a.changePercent!==void 0?Number(a.changePercent):null,projectedPrice:a.projectedPrice!==void 0?Number(a.projectedPrice):null,projectedChange:a.projectedChange!==void 0?Number(a.projectedChange):null,projectedChangePercent:a.projectedChangePercent!==void 0?Number(a.projectedChangePercent):null,historicalPrices:He.current?He.current.map(q=>Number(q)):[]})):null,savedAt:new Date().toISOString()};Va(x),ye(!0),setTimeout(()=>ye(!1),3e3)}catch(x){console.error("Error saving projection:",x),g("Failed to save projection: "+x.message)}finally{$e(!1)}},Gt=x=>{x!==i&&(o(x),r&&r.trim()&&a&&setTimeout(()=>{pe()},100))},Or=x=>{const[te,q]=x.split("-");s(te),o(q),F(!1),setTimeout(()=>{pe()},100)},Wr=x=>{x.key==="Enter"&&Yt()},Hr=()=>{if(Le.current){let x=null;Le.current.chartInstance?x=Le.current.chartInstance:Le.current.chart?x=Le.current.chart:Le.current&&(x=Le.current),x&&(typeof x.resetZoom=="function"&&x.resetZoom(),Fe.current!==null&&Te.current!==null&&(x.scales&&x.scales.y?(x.scales.y.options.min=Fe.current,x.scales.y.options.max=Te.current,x.update("none")):x.options&&x.options.scales&&x.options.scales.y&&(x.options.scales.y.min=Fe.current,x.options.scales.y.max=Te.current,x.update("none"))))}};return d.useEffect(()=>()=>{},[]),e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Price Projection"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Prime Tetration Projections"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stock Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:Ie,type:"text",id:"symbol",value:r,onChange:x=>{const te=x.target.value.toUpperCase();s(te),F(te.length===0&&T.length>0)},onKeyDown:Wr,onFocus:()=>{T.length>0&&!r&&F(!0)},onBlur:()=>{setTimeout(()=>F(!1),200)},placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),r&&e.jsx("button",{type:"button",onClick:()=>{s(""),F(!1),Ie.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),Y&&T.length>0&&!c&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",style:{zIndex:10},children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recent Searches"}),T.map(x=>{const[te,q]=x.split("-");return e.jsxs("button",{type:"button",onClick:()=>Or(x),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:te}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:q})]},x)})]})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Interval"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>Gt("1D"),className:`px-6 py-2 rounded-md font-medium transition-all ${i==="1D"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Day"}),e.jsx("button",{type:"button",onClick:()=>Gt("1H"),className:`px-6 py-2 rounded-md font-medium transition-all ${i==="1H"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Hour"})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{htmlFor:"projectionSteps",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Projection Steps"}),e.jsxs("select",{id:"projectionSteps",value:u,onChange:x=>{const te=parseInt(x.target.value);y(te),a&&setTimeout(()=>pe(),100)},className:"w-full lg:w-32 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",children:[e.jsx("option",{value:10,children:"10 Steps"}),e.jsx("option",{value:20,children:"20 Steps"}),e.jsx("option",{value:40,children:"40 Steps"}),e.jsx("option",{value:60,children:"60 Steps"})]})]}),e.jsx("div",{className:"w-full lg:w-auto",children:e.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation(),Yt()},disabled:c||!r||!r.trim(),className:"w-full lg:w-auto px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 relative z-0",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})})]}),e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Projection Model Configuration"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Configure your projection parameters"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Projection Model"}),e.jsx("div",{className:"w-full px-4 py-3 border-2 border-purple-500 dark:border-purple-400 rounded-lg bg-purple-50 dark:bg-purple-900/20 transition-all text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Prime Tetration Projections"})]})})]}),_==="primetetration"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Core Parameters"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h5",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Seed, Frequency & Schedules"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Base (seed)"}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U===3,onChange:()=>{de(U===3?2:3),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:U===3?"3 (preferred)":"2 (Enigma-style)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Î© (Omega Hz)"}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ee===528,onChange:()=>{Q(ee===432?528:432),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),e.jsxs("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:[ee," Hz"]})]})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("label",{className:"inline-flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:B,onChange:x=>{J(x.target.checked),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:"Use Î» Schedule (dub, kubt, k'anch)"})]}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:xe,onChange:x=>{f(x.target.checked),a&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Use Î© Schedule (vary frequencies)"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"projectionCount",className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Projections Count"}),e.jsx("input",{type:"number",id:"projectionCount",min:"1",max:"50",step:"1",value:ae,onChange:x=>{const te=x.target.value;if(te==="")return;const q=parseInt(te,10);!isNaN(q)&&q>=1&&q<=50&&(Z(q),a&&setTimeout(()=>pe(),100))},onBlur:x=>{const te=x.target.value;if(te===""||isNaN(parseInt(te,10)))Z(12),a&&setTimeout(()=>pe(),100);else{const q=parseInt(te,10);q<1?(Z(1),a&&setTimeout(()=>pe(),100)):q>50&&(Z(50),a&&setTimeout(()=>pe(),100))}},className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all text-sm font-medium bg-white",placeholder:"Enter number (1-50)"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Range: 1-50 projections"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Prime Depth"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:me.map(x=>{const te=me[R]===x;return e.jsx("button",{type:"button",onClick:()=>{const q=me.indexOf(x);se(q),O(x),a&&setTimeout(()=>pe(),100)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${te?"bg-purple-600 text-white shadow-md ring-2 ring-purple-400 dark:ring-purple-500":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-300 dark:border-gray-600 hover:border-purple-400 dark:hover:border-purple-500 hover:text-purple-600 dark:hover:text-purple-400"}`,children:x},x)})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Selected: ",me[R]||31]})]})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Be?e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Projection saved successfully!"]}):"Save this projection configuration to view it later on the Data page"})}),e.jsx("button",{onClick:Br,disabled:ve||!r||!r.trim()||!a&&!j,className:"px-6 py-2.5 bg-gradient-to-r from-green-600 to-green-700 text-white text-sm font-semibold rounded-lg hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-md hover:shadow-lg transition-all flex items-center gap-2",title:!r||!r.trim()?"Enter a stock symbol first":!a&&!j?"Load chart data first":"Save projection to Data page",children:ve?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"Save Projection"})]})})]})]})]}),Ae&&e.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Projection loaded successfully! You can now edit the parameters and save changes."}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 mt-1",children:'All saved data has been restored. Modify any settings and click "Save Projection" to update.'})]}),e.jsx("button",{onClick:()=>Oe(!1),className:"ml-2 text-green-500 hover:text-green-700 dark:hover:text-green-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),h&&e.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:h}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check the symbol and try again"})]})]})}),a&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Price Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-5 border border-blue-200 dark:border-blue-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Current Price"}),e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:a?.currentPrice!==void 0&&a.currentPrice!==null?`$${a.currentPrice.toFixed(2)}`:e.jsx("span",{className:"text-gray-400",children:"N/A"})})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${a&&a.change>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Historical Change"}),a&&e.jsx("svg",{className:`w-4 h-4 ${a.change>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.change>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${a.change>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a?.change!==void 0&&a.change!==null?`${a.change>=0?"+":""}$${Math.abs(a.change).toFixed(2)}`:e.jsx("span",{className:"text-gray-400",children:"--"})}),a?.changePercent!==void 0&&a.changePercent!==null&&e.jsxs("p",{className:`text-xs mt-1 ${a.changePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a.changePercent>=0?"+":"",a.changePercent.toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-5 border border-purple-200 dark:border-purple-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Projected Price"}),e.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:a?.projectedPrice!==void 0&&a.projectedPrice!==null&&a.projectedPrice>0?(()=>{const x=a.projectedPrice;return x>=1e3?`$${x.toFixed(2)}`:x>=1?`$${x.toFixed(2)}`:`$${x.toFixed(4)}`})():e.jsx("span",{className:"text-gray-400",children:"N/A"})})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${a&&a.projectedChange>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Projected Change"}),a&&e.jsx("svg",{className:`w-4 h-4 ${a.projectedChange>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.projectedChange>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${a.projectedChange>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a?.projectedChange!==void 0&&a.projectedChange!==null?(()=>{const x=a.projectedChange;return Math.abs(x)>=1e3?`${x>=0?"+":""}$${Math.abs(x).toFixed(2)}`:Math.abs(x)>=1?`${x>=0?"+":""}$${Math.abs(x).toFixed(2)}`:`${x>=0?"+":""}$${Math.abs(x).toFixed(4)}`})():e.jsx("span",{className:"text-gray-400",children:"--"})}),a?.projectedChangePercent!==void 0&&a.projectedChangePercent!==null&&e.jsx("p",{className:`text-xs mt-1 ${a.projectedChangePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:(()=>{const x=a.projectedChangePercent;return Math.abs(x)>=1e3?`${x>=0?"+":""}${x.toFixed(0)}%`:Math.abs(x)>=100?`${x>=0?"+":""}${x.toFixed(1)}%`:`${x>=0?"+":""}${x.toFixed(2)}%`})()})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${a&&a.projectedChangePercent>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Change %"}),a&&e.jsx("svg",{className:`w-4 h-4 ${a.projectedChangePercent>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.projectedChangePercent>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${a.projectedChangePercent>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a?.projectedChangePercent!==void 0&&a.projectedChangePercent!==null?(()=>{const x=a.projectedChangePercent;return Math.abs(x)>=1e3?`${x>=0?"+":""}${x.toFixed(0)}%`:Math.abs(x)>=100?`${x>=0?"+":""}${x.toFixed(1)}%`:`${x>=0?"+":""}${x.toFixed(2)}%`})():e.jsx("span",{className:"text-gray-400",children:"--"})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Projected"})]})]})]}),m&&e.jsxs("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>E(!S),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Prime Tetration Parameters"})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${S?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),S&&e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/30",children:e.jsx("div",{className:"flex flex-col gap-4",children:_==="primetetration"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Depth Prime:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:m.depthPrime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Base:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:m.base})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Lines:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:m.lines})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Beta:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:m.beta})]})]}),m.phi&&Array.isArray(m.phi)&&e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Full Ï_d: [3,7,31,12,19,5,11,13,17,23,29,31]"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"+8 bits truncation active"})]})}),j&&j.lines&&j.lines.length>0&&e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Oscillation Stats:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.lines.slice(0,6).map((x,te)=>e.jsxs("div",{className:"text-xs font-mono text-gray-900 dark:text-white bg-purple-100 dark:bg-purple-900/30 px-3 py-2 rounded flex flex-col gap-1",children:[e.jsxs("span",{className:"font-semibold",children:["L",te+1,"[",x.triad.join("-"),"]"]}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["zc=",x.zeroCrossings,", tp=",x.turningPoints]})]},te))})]})})]}):null})})]}),(w||a)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:w?`Last updated: ${w.toLocaleString("en-US",{timeZone:"America/New_York"})}`:"Ready to load data"})]}),a&&e.jsxs("button",{type:"button",onClick:zr,disabled:c,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${c?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Price Projection Chart"}),r&&C&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[r.toUpperCase()," - ",C," interval - ",u," step projection"]})]}),a&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Historical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500 border-2 border-dashed border-purple-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Projected"})]})]}),e.jsxs("button",{type:"button",onClick:Hr,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"Reset zoom and pan",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Zoom"]})]})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>M(!V),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"About Prime Tetration Projections"})]}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform ${V?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),V&&e.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:"Prime Tetration Projections use the full crystalline 12-dimensional lattice with triadic prime exponentiation towers. Each projection line represents a different prime triad [p1,p2,p3] with amplitude A = base^(p2^p3) mod 2^72. The lattice oscillator Z(n) aggregates all 12 Ï_d dimensions without dimension sweeping. All calculations use Q8 fixed-point truncation (+8 guard bits)."})})]})]}),e.jsx("div",{className:"h-[600px] relative",children:a&&Array.isArray(a.labels)&&a.labels.length>0&&Array.isArray(a.datasets)&&a.datasets.length>0&&a.datasets[0]&&Array.isArray(a.datasets[0].data)&&a.datasets[0].data.some(x=>x!=null)?e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-800/90 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx(Xe,{ref:Le,data:{labels:Array.isArray(a.labels)?a.labels:[],datasets:Array.isArray(a.datasets)?a.datasets.map(x=>({...x,data:Array.isArray(x.data)?x.data:[]})):[]},options:{..._e.current,responsive:!0,maintainAspectRatio:!1},redraw:!0},`chart-${r}-${i}-${u}-${a.labels?.length||0}`)]}):c?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading chart data..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:"No chart data available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please try searching again or check the symbol"})]})})})]})]})}gt.register(xt,mt,pt,bt,ft,yt,kt,zt,fr);const cr=[{name:"Blue",bg:"from-blue-50 to-blue-100",border:"border-blue-200",dark:"dark:from-blue-900/20 dark:to-blue-800/20 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{name:"Green",bg:"from-green-50 to-green-100",border:"border-green-200",dark:"dark:from-green-900/20 dark:to-green-800/20 dark:border-green-800",text:"text-green-700 dark:text-green-300"},{name:"Purple",bg:"from-purple-50 to-purple-100",border:"border-purple-200",dark:"dark:from-purple-900/20 dark:to-purple-800/20 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{name:"Yellow",bg:"from-yellow-50 to-yellow-100",border:"border-yellow-200",dark:"dark:from-yellow-900/20 dark:to-yellow-800/20 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300"},{name:"Pink",bg:"from-pink-50 to-pink-100",border:"border-pink-200",dark:"dark:from-pink-900/20 dark:to-pink-800/20 dark:border-pink-800",text:"text-pink-700 dark:text-pink-300"},{name:"Indigo",bg:"from-indigo-50 to-indigo-100",border:"border-indigo-200",dark:"dark:from-indigo-900/20 dark:to-indigo-800/20 dark:border-indigo-800",text:"text-indigo-700 dark:text-indigo-300"}];function xs(){const[t,r]=d.useState([]),[s,i]=d.useState(null),[o,a]=d.useState(!1),[l,c]=d.useState(!1),[n,h]=d.useState(null),[g,w]=d.useState(!0),[p,C]=d.useState(null),[N,u]=d.useState(""),[y,b]=d.useState("date"),[k,T]=d.useState("all"),[H,Y]=d.useState("grid"),[F,_]=d.useState([]),[X,m]=d.useState(!0),A=oa(),V={responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(j){return j.parsed.y!==null&&j.parsed.y!==void 0?`${j.dataset.label}: $${j.parsed.y.toFixed(2)}`:""}}},zoom:{zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0,mode:"xy",modifierKey:null},limits:{x:{min:"original",max:"original"},y:{min:"original",max:"original"}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{maxTicksLimit:20,font:{size:11},autoSkip:!0}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(j){return j!=null&&!isNaN(j)?"$"+j.toFixed(2):""},font:{size:11}}}}};d.useEffect(()=>{M()},[]);const M=()=>{try{w(!0),C(null);const j=Vt();r(j||[])}catch(j){console.error("Error loading projections:",j),C("Failed to load projections")}finally{w(!1)}},P=d.useMemo(()=>{const j=new Set;return t.forEach(v=>{v.projectionModel&&j.add(v.projectionModel)}),Array.from(j).sort()},[t]),L=d.useMemo(()=>{let j=[...t];if(N){const v=N.toLowerCase();j=j.filter(D=>D.symbol?.toLowerCase().includes(v)||D.projectionModel?.toLowerCase().includes(v)||D.interval?.toLowerCase().includes(v))}return k!=="all"&&(j=j.filter(v=>v.projectionModel===k)),j.sort((v,D)=>{switch(y){case"symbol":return(v.symbol||"").localeCompare(D.symbol||"");case"model":return(v.projectionModel||"").localeCompare(D.projectionModel||"");case"date":default:return new Date(D.savedAt||0)-new Date(v.savedAt||0)}}),j},[t,N,k,y]),I=d.useMemo(()=>{const j=t.length,v={lattice:t.filter(Q=>Q.projectionModel==="lattice").length,primetetration:t.filter(Q=>Q.projectionModel==="primetetration").length,montecarlo:t.filter(Q=>Q.projectionModel==="montecarlo").length},D=t.filter(Q=>Q.chartData&&Q.chartData.labels&&Q.chartData.labels.length>0).length,z=j-D,ee=new Set(t.map(Q=>Q.symbol).filter(Boolean)).size;return{total:j,byModel:v,withCharts:D,withoutCharts:z,totalSymbols:ee}},[t]),W=j=>j?new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",S=j=>({lattice:"12-Fold Lattice",primetetration:"Prime Tetration",montecarlo:"Monte Carlo"})[j]||j||"Unknown",E=j=>cr[j%cr.length],R=j=>{i(j),a(!0)},se=j=>{h(j),c(!0)},he=()=>{if(n)try{rr(n.id),_(j=>j.filter(v=>v!==n.id)),M(),c(!1),h(null)}catch(j){console.error("Error deleting projection:",j),C("Failed to delete projection")}},O=()=>{if(F.length!==0&&window.confirm(`Are you sure you want to delete ${F.length} projection(s)?`))try{F.forEach(j=>{try{rr(j)}catch(v){console.error("Error deleting projection:",v)}}),_([]),M()}catch(j){console.error("Failed to delete projections:",j),C("Failed to delete projections")}},U=j=>{A("/projection",{state:{loadProjection:j}})},de=j=>{_(v=>v.includes(j)?v.filter(D=>D!==j):[...v,j])},ae=()=>{F.length===L.length?_([]):_(L.map(j=>j.id))},Z=()=>{const j=JSON.stringify(t,null,2),v=new Blob([j],{type:"application/json"}),D=URL.createObjectURL(v),z=document.createElement("a");z.href=D,z.download=`projections-${new Date().toISOString().split("T")[0]}.json`,z.click(),URL.revokeObjectURL(D)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Saved Projections"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and view your saved projection configurations and charts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{type:"button",onClick:()=>A("/projection"),className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Projection"]})})]}),X&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:I.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"12-Fold Lattice"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:I.byModel.lattice})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Prime Tetration"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:I.byModel.primetetration})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Monte Carlo"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:I.byModel.montecarlo})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"With Charts"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:I.withCharts})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl p-4 border border-pink-200 dark:border-pink-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-pink-700 dark:text-pink-300",children:"Filtered"}),e.jsx("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:L.length})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:N,onChange:j=>u(j.target.value),placeholder:"Search projections by symbol, model, or interval...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:k,onChange:j=>T(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Models"}),P.map(j=>e.jsx("option",{value:j,children:S(j)},j))]}),e.jsxs("select",{value:y,onChange:j=>b(j.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"symbol",children:"Sort by Symbol"}),e.jsx("option",{value:"model",children:"Sort by Model"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>Y("grid"),className:`p-2 rounded ${H==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>Y("list"),className:`p-2 rounded ${H==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("button",{type:"button",onClick:Z,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>m(!X),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:X?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),F.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[F.length," projection(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:O,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>_([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]})]})]}),p&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:p})})]}),e.jsx("button",{type:"button",onClick:()=>C(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),g&&t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading projections..."})]}):L.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:N||k!=="all"?"No projections found":"No projections saved"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:N||k!=="all"?"Try adjusting your search or filter criteria":"Save projections from the Projection page to view them here"}),!N&&k==="all"&&e.jsx("button",{type:"button",onClick:()=>A("/projection"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Projection Page"})]}):e.jsxs(e.Fragment,{children:[L.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:F.length===L.length&&L.length>0,onChange:ae,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",L.length,")"]})]}),e.jsx("div",{className:H==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:L.map((j,v)=>{const D=E(v);return e.jsxs("div",{className:`relative bg-gradient-to-br ${D.bg} ${D.dark} rounded-xl p-5 border ${D.border} ${D.dark} shadow-md hover:shadow-lg transition-all ${F.includes(j.id)?"ring-2 ring-blue-500":""}`,children:[H==="list"&&e.jsx("input",{type:"checkbox",checked:F.includes(j.id),onChange:()=>de(j.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:z=>z.stopPropagation()}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:j.symbol||"N/A"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:W(j.savedAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),R(j)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"View Projection",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),se(j)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Delete Projection",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Model:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:S(j.projectionModel)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Interval:"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:j.interval||"N/A"})]}),j.projectionModel==="primetetration"&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:["Base: ",j.base||3]}),e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:["Depth: ",j.primeDepth||"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/30 dark:border-gray-700/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),U(j)},className:"px-3 py-1 text-xs font-medium text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 rounded-lg transition-colors",children:"Load"}),e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),R(j)},className:"px-3 py-1 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:"View"})]}),H==="grid"&&e.jsx("input",{type:"checkbox",checked:F.includes(j.id),onChange:()=>de(j.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:z=>z.stopPropagation()})]})]},j.id)})}),L.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",L.length," of ",t.length," projections"]})]}),o&&s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>a(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4 max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",children:["Projection Details: ",s.symbol]}),s.chartData&&s.chartData.labels&&Array.isArray(s.chartData.labels)&&s.chartData.datasets&&Array.isArray(s.chartData.datasets)&&s.chartData.datasets.length>0?e.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Price Projection Chart"}),e.jsx("div",{className:"h-96 w-full",children:e.jsx(Xe,{data:{labels:s.chartData.labels||[],datasets:(s.chartData.datasets||[]).map(j=>({...j,data:Array.isArray(j.data)?j.data:[]}))},options:V})}),s.chartData.currentPrice&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Current Price"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["$",s.chartData.currentPrice.toFixed(2)]})]}),s.chartData.change!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Change"}),e.jsxs("p",{className:`text-sm font-bold ${s.chartData.change>=0?"text-green-600":"text-red-600"}`,children:[s.chartData.change>=0?"+":"","$",s.chartData.change.toFixed(2)]})]}),s.chartData.changePercent!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Change %"}),e.jsxs("p",{className:`text-sm font-bold ${s.chartData.changePercent>=0?"text-green-600":"text-red-600"}`,children:[s.chartData.changePercent>=0?"+":"",s.chartData.changePercent.toFixed(2),"%"]})]}),s.chartData.projectedPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Projected Price"}),e.jsxs("p",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["$",s.chartData.projectedPrice.toFixed(2)]})]})]})]}):e.jsx("div",{className:"mb-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Chart data not available for this projection. The chart may not have been saved with the projection."})]})}),e.jsx("div",{className:"mt-2 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Model"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:S(s.projectionModel)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Interval"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.interval||"N/A"})]}),s.projectionModel==="primetetration"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Base (seed)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.base||3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Prime Depth"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.primeDepth||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Projections Count"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.projectionCount||12})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Omega Hz"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[s.omegaHz||432," Hz"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Lambda Schedule"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.useLambdaSchedule?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Omega Schedule"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.useOmegaSchedule?"Enabled":"Disabled"})]})]}),s.projectionSteps&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Projection Steps"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:s.projectionSteps})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Saved At"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:W(s.savedAt)})]})]})})]})})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:()=>U(s),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Load Projection"}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Close"})]})]})]})}),l&&n&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>c(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Projection"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Are you sure you want to delete the projection for"," ",e.jsx("span",{className:"font-medium",children:n.symbol}),"? This action cannot be undone."]})})]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:he,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{c(!1),h(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})}gt.register(xt,mt,pt,bt,ft,yt,kt);function ms({monitorId:t}){const[r,s]=d.useState(null),[i,o]=d.useState(!0);d.useEffect(()=>{a();const l=setInterval(a,3e4);return()=>clearInterval(l)},[t]);const a=async()=>{try{const l=await Er(t,"response-time"),c=l.map(h=>{const g=h.time||h.timestamp;return new Date(g).toLocaleTimeString("en-US",{timeZone:"America/New_York"})}),n=l.map(h=>h.value||h.responseTime||0);s({labels:c,datasets:[{label:"Response Time (ms)",data:n,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]})}catch(l){console.error("Failed to load chart data:",l),o(!1)}finally{o(!1)}};return i||!r?e.jsx("div",{className:"h-48 flex items-center justify-center text-gray-500",children:"Loading chart..."}):e.jsx("div",{className:"h-48",children:e.jsx(Xe,{data:r,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})}function ps({monitor:t,onEdit:r,onDelete:s,onTogglePause:i,onSelect:o,selected:a}){const[l,c]=d.useState(!1),h=(()=>{if(t.paused)return{color:"gray",text:"Paused"};const p=t.responseTime||t.avgResponseTime||0;return!(t.status==="up"||t.isUp)||p===0?{color:"red",text:"Down"}:p<1e3?{color:"green",text:"Operational"}:p<5e3?{color:"yellow",text:"Degraded"}:{color:"red",text:"Down"}})(),g=h.color,w=h.text;return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow p-4 transition-all ${a?"ring-2 ring-blue-500 dark:ring-blue-400":""} ${o?"cursor-pointer hover:shadow-lg":""}`,onClick:o,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-white mb-1",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.url})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`inline-flex items-center gap-x-1.5 py-1 px-2 rounded-full text-xs font-medium ${g==="green"?"bg-green-100 text-green-800":g==="yellow"?"bg-yellow-100 text-yellow-800":g==="red"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${g==="green"?"bg-green-600":g==="yellow"?"bg-yellow-600":g==="red"?"bg-red-600":"bg-gray-600"}`}),w]})})]}),t.price!==void 0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Current Price"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["$",t.price.toFixed(2)]}),t.change!==void 0&&e.jsxs("p",{className:`text-xs font-semibold mt-1 ${t.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[t.change>=0?"+":"","$",t.change.toFixed(2)," (",t.changePercent>=0?"+":"",t.changePercent.toFixed(2),"%)"]})]}),t.volume&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Volume"}),e.jsx("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200",children:t.volume.toLocaleString()})]}),t.marketState&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Market Status"}),e.jsx("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 capitalize",children:t.marketState==="REGULAR"?"Open":t.marketState.toLowerCase()})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Response Time"}),e.jsxs("p",{className:"text-base font-semibold text-gray-800 dark:text-white",children:[t.responseTime||t.avgResponseTime||0,"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Uptime"}),e.jsxs("p",{className:"text-base font-semibold text-gray-800 dark:text-white",children:[t.uptime||t.uptimePercent||0,"%"]})]})]}),t.lastCheck&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Last Check"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300",children:new Date(t.lastCheck).toLocaleString("en-US",{timeZone:"America/New_York"})})]})]}),t.lastCheck&&t.price===void 0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Last Check"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300",children:new Date(t.lastCheck).toLocaleString("en-US",{timeZone:"America/New_York"})})]}),l&&e.jsx("div",{className:"mb-4",children:e.jsx(ms,{monitorId:t.id})}),e.jsxs("div",{className:"flex gap-2 flex-wrap",onClick:p=>p.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),c(!l)},className:"flex-1 min-w-[100px] py-1.5 px-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:l?"Hide Chart":"Show Chart"}),e.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(t.id)},className:"py-1.5 px-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:t.paused?"Resume":"Pause"}),e.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(t)},className:"py-1.5 px-2 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"Edit"}),e.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),s(t.id)},className:"py-1.5 px-2 text-xs font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Delete"})]})]})}function bs({isOpen:t,onClose:r,onSave:s,monitor:i}){const[o,a]=d.useState({name:"",symbol:"",url:"",type:"http"});d.useEffect(()=>{a(i?{name:i.name||"",symbol:i.symbol||i.id||"",url:i.url||"",type:i.type||"http"}:{name:"",symbol:"",url:"",type:"http"})},[i,t]);const l=n=>{n.preventDefault(),s(o)},c=n=>{n.target===n.currentTarget&&r()};return d.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs("div",{className:"fixed inset-0 z-[100] overflow-x-hidden overflow-y-auto",onClick:c,children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity"}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 w-full max-w-lg transform transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center py-4 px-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:i?"Edit Monitor":"Add Monitor"}),e.jsx("button",{type:"button",onClick:r,className:"flex justify-center items-center w-7 h-7 text-sm font-semibold rounded-full border border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Stock Symbol ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.symbol,onChange:n=>a({...o,symbol:n.target.value.toUpperCase()}),className:"py-2.5 px-3 block w-full border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"AAPL, GOOGL, MSFT, etc.",required:!0,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter a stock ticker symbol (e.g., AAPL, GOOGL, TSLA)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name (Optional)"}),e.jsx("input",{type:"text",value:o.name,onChange:n=>a({...o,name:n.target.value}),className:"py-2.5 px-3 block w-full border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Leave empty to use stock name"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Custom name for this monitor (optional)"})]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-3 py-4 px-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"py-2 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 shadow-sm hover:shadow-md transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),i?"Update Monitor":"Create Monitor"]})]})]})]})})]}):null}function fs(){const[t,r]=d.useState([]),[s,i]=d.useState(!0),[o,a]=d.useState(null),[l,c]=d.useState(!1),[n,h]=d.useState(null),[g,w]=d.useState("checking"),[p,C]=d.useState(""),[N,u]=d.useState("name"),[y,b]=d.useState("all"),[k,T]=d.useState("grid"),[H,Y]=d.useState([]),[F,_]=d.useState(!0),[X,m]=d.useState(null),[A,V]=d.useState(!0),[M,P]=d.useState(30),L=d.useCallback(async()=>{try{i(!0),a(null);const v=await Mr();r(v||[]),w("connected"),m(new Date)}catch(v){console.error("Failed to load monitors:",v),a(v.message||"Failed to load monitors"),w("disconnected")}finally{i(!1)}},[]);d.useEffect(()=>{L()},[L]),d.useEffect(()=>{if(!A)return;const v=setInterval(()=>{L()},M*1e3);return()=>clearInterval(v)},[A,M,L]);const I=d.useMemo(()=>{let v=[...t];if(p){const D=p.toLowerCase();v=v.filter(z=>z.name?.toLowerCase().includes(D)||z.symbol?.toLowerCase().includes(D)||z.id?.toLowerCase().includes(D))}return y!=="all"&&(v=v.filter(D=>{if(y==="operational"){const z=D.responseTime||D.avgResponseTime||0;return D.isUp&&z>0&&z<1e3}else if(y==="degraded"){const z=D.responseTime||D.avgResponseTime||0;return D.isUp&&z>=1e3&&z<5e3}else{if(y==="down")return!D.isUp||(D.responseTime||D.avgResponseTime||0)===0;if(y==="paused")return D.paused}return!0})),v.sort((D,z)=>{switch(N){case"price":return(z.price||0)-(D.price||0);case"change":return(z.changePercent||0)-(D.changePercent||0);case"status":const ee=D.paused?"paused":D.isUp?"operational":"down",Q=z.paused?"paused":z.isUp?"operational":"down";return ee.localeCompare(Q);case"name":default:return(D.name||D.id||"").localeCompare(z.name||z.id||"")}}),v},[t,p,y,N]),W=d.useMemo(()=>{const v=t.length,D=t.filter(f=>{const B=f.responseTime||f.avgResponseTime||0;return f.isUp&&B>0&&B<1e3&&!f.paused}).length,z=t.filter(f=>{const B=f.responseTime||f.avgResponseTime||0;return f.isUp&&B>=1e3&&B<5e3&&!f.paused}).length,ee=t.filter(f=>!f.isUp||(f.responseTime||f.avgResponseTime||0)===0||f.paused).length,Q=t.reduce((f,B)=>f+(B.price||0),0),xe=t.length>0?t.reduce((f,B)=>f+(B.changePercent||0),0)/t.length:0;return{total:v,operational:D,degraded:z,down:ee,totalValue:Q,avgChange:xe}},[t]),S=()=>{h(null),c(!0)},E=v=>{h(v),c(!0)},R=async v=>{try{n?await Ar(n.id,v):await Pr(v),c(!1),h(null),await L()}catch(D){console.error("Failed to save monitor:",D),a(D.message||"Failed to save monitor")}},se=async v=>{if(window.confirm("Are you sure you want to delete this monitor?"))try{await Ft(v),Y(D=>D.filter(z=>z!==v)),await L()}catch(D){console.error("Failed to delete monitor:",D),a(D.message||"Failed to delete monitor")}},he=async()=>{if(H.length!==0&&window.confirm(`Are you sure you want to delete ${H.length} monitor(s)?`))try{await Promise.all(H.map(v=>Ft(v))),Y([]),await L()}catch(v){console.error("Failed to delete monitors:",v),a(v.message||"Failed to delete monitors")}},O=async v=>{try{await Tt(v),await L()}catch(D){console.error("Failed to toggle pause:",D),a(D.message||"Failed to toggle pause")}},U=async v=>{if(H.length!==0)try{await Promise.all(H.map(D=>{const z=t.find(ee=>ee.id===D);return z&&z.paused!==v?Tt(D):Promise.resolve()})),await L()}catch(D){console.error("Failed to bulk pause/resume:",D),a(D.message||"Failed to bulk pause/resume")}},de=()=>{c(!1),h(null)},ae=v=>{Y(D=>D.includes(v)?D.filter(z=>z!==v):[...D,v])},Z=()=>{H.length===I.length?Y([]):Y(I.map(v=>v.id))},j=()=>{const v=JSON.stringify(t,null,2),D=new Blob([v],{type:"application/json"}),z=URL.createObjectURL(D),ee=document.createElement("a");ee.href=z,ee.download=`monitors-${new Date().toISOString().split("T")[0]}.json`,ee.click(),URL.revokeObjectURL(z)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"API Monitoring Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor stock prices, API status, and performance metrics in real-time"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${g==="connected"?"bg-green-500 animate-pulse":g==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:g==="connected"?"Connected":g==="disconnected"?"Disconnected":"Checking..."})]}),e.jsxs("button",{type:"button",onClick:S,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Monitor"]})]})]}),F&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:W.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"Operational"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:W.operational})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Degraded"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:W.degraded})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-red-700 dark:text-red-300",children:"Down"}),e.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:W.down})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Total Value"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["$",(W.totalValue/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"Avg Change"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),e.jsxs("p",{className:`text-2xl font-bold ${W.avgChange>=0?"text-indigo-900 dark:text-indigo-100":"text-red-600 dark:text-red-400"}`,children:[W.avgChange>=0?"+":"",W.avgChange.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:p,onChange:v=>C(v.target.value),placeholder:"Search monitors by name or symbol...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:y,onChange:v=>b(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"operational",children:"Operational"}),e.jsx("option",{value:"degraded",children:"Degraded"}),e.jsx("option",{value:"down",children:"Down"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:N,onChange:v=>u(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price",children:"Sort by Price"}),e.jsx("option",{value:"change",children:"Sort by Change"}),e.jsx("option",{value:"status",children:"Sort by Status"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>T("grid"),className:`p-2 rounded ${k==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>T("list"),className:`p-2 rounded ${k==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:L,disabled:s,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Refresh Now",children:e.jsx("svg",{className:`w-5 h-5 ${s?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:v=>V(v.target.checked),className:"rounded"}),e.jsx("span",{children:"Auto"})]})]}),e.jsxs("button",{type:"button",onClick:j,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>_(!F),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:F?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),H.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[H.length," monitor(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-3 py-1.5 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:"Resume All"}),e.jsx("button",{type:"button",onClick:()=>U(!0),className:"px-3 py-1.5 text-sm font-medium text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 rounded-lg transition-colors",children:"Pause All"}),e.jsx("button",{type:"button",onClick:he,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>Y([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]}),X&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:["Last refreshed: ",X.toLocaleTimeString("en-US",{timeZone:"America/New_York"}),A&&` â¢ Auto-refresh every ${M}s`]})]})]}),o&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:o})})]}),e.jsx("button",{type:"button",onClick:()=>a(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s&&t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading monitors..."})]}):I.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:p||y!=="all"?"No monitors found":"No monitors yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:p||y!=="all"?"Try adjusting your search or filter criteria":"Get started by adding your first stock monitor"}),!p&&y==="all"&&e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Monitor"})]}):e.jsxs(e.Fragment,{children:[I.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:H.length===I.length&&I.length>0,onChange:Z,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",I.length,")"]})]}),e.jsx("div",{className:k==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:I.map(v=>e.jsxs("div",{className:"relative",children:[k==="list"&&e.jsx("input",{type:"checkbox",checked:H.includes(v.id),onChange:()=>ae(v.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(ps,{monitor:v,onEdit:E,onDelete:se,onTogglePause:O,onSelect:k==="list"?()=>ae(v.id):null,selected:H.includes(v.id)})]},v.id))}),I.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",I.length," of ",t.length," monitors"]})]}),e.jsx(bs,{isOpen:l,onClose:de,onSave:R,monitor:n})]})}function ys({columns:t,rows:r,columnUnit:s,rowUnit:i,onColumnsChange:o,onRowsChange:a,onColumnUnitChange:l,onRowUnitChange:c}){return e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Columns"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:t,onChange:n=>o(parseInt(n.target.value)||1),className:"flex-1 py-2 px-3 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("select",{value:s,onChange:n=>l(n.target.value),className:"py-2 px-3 block border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"fr",children:"fr"}),e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"%",children:"%"}),e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"1fr",children:"1fr"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rows"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:r,onChange:n=>a(parseInt(n.target.value)||1),className:"flex-1 py-2 px-3 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("select",{value:i,onChange:n=>c(n.target.value),className:"py-2 px-3 block border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"fr",children:"fr"}),e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"%",children:"%"}),e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"1fr",children:"1fr"})]})]})]})]})}function ks({id:t,children:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l}=ut({id:t}),c={transform:ht.Transform.toString(a),transition:l};return e.jsx("div",{ref:o,style:c,...s,...i,className:"cursor-move",children:r})}function js({columns:t,rows:r,columnUnit:s,rowUnit:i,items:o,onItemsChange:a}){const l=xr(dt(br),dt(pr,{coordinateGetter:mr})),c=Array(t).fill(`1${s==="1fr"?"fr":s}`).join(" "),n=Array(r).fill(`1${i==="1fr"?"fr":i}`).join(" "),h=g=>{const{active:w,over:p}=g;if(w.id!==p.id){const C=o.findIndex(u=>u.id===w.id),N=o.findIndex(u=>u.id===p.id);a(it(o,C,N))}};return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:e.jsx("div",{className:"grid gap-2 min-h-[400px]",style:{gridTemplateColumns:c,gridTemplateRows:n},children:e.jsx(ot,{sensors:l,collisionDetection:nt,onDragEnd:h,children:e.jsx(lt,{items:o.map(g=>g.id),strategy:na,children:o.map(g=>e.jsx(ks,{id:g.id,children:e.jsx("div",{className:"bg-blue-500 text-white p-4 rounded-lg flex items-center justify-center font-semibold",children:g.label})},g.id))})})})})}function vs({columns:t,rows:r,columnUnit:s,rowUnit:i}){const[o,a]=d.useState(!1),l=Array(t).fill(`1${s==="1fr"?"fr":s}`).join(" "),c=Array(r).fill(`1${i==="1fr"?"fr":i}`).join(" "),n=`.grid-container {
  display: grid;
  grid-template-columns: ${l};
  grid-template-rows: ${c};
  gap: 1rem;
}`,h=async()=>{try{await navigator.clipboard.writeText(n),a(!0),setTimeout(()=>a(!1),2e3)}catch(g){console.error("Failed to copy:",g)}};return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Generated CSS"}),e.jsx("button",{type:"button",onClick:h,className:"py-1 px-3 text-sm font-medium text-blue-700 bg-blue-100 rounded-lg hover:bg-blue-200",children:o?"Copied!":"Copy"})]}),e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:e.jsx("code",{children:n})})]})}function ws(){const[t,r]=d.useState(3),[s,i]=d.useState(3),[o,a]=d.useState("fr"),[l,c]=d.useState("fr"),[n,h]=d.useState(()=>{const p=[];for(let C=1;C<=9;C++)p.push({id:`item-${C}`,label:`Item ${C}`});return p}),g=()=>{const p=`item-${Date.now()}`;h([...n,{id:p,label:`Item ${n.length+1}`}])},w=()=>{r(3),i(3),a("fr"),c("fr");const p=[];for(let C=1;C<=9;C++)p.push({id:`item-${C}`,label:`Item ${C}`});h(p)};return e.jsxs("div",{children:[e.jsx(ys,{columns:t,rows:s,columnUnit:o,rowUnit:l,onColumnsChange:r,onRowsChange:i,onColumnUnitChange:a,onRowUnitChange:c}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("button",{type:"button",onClick:g,className:"py-2 px-4 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Add Item"}),e.jsx("button",{type:"button",onClick:w,className:"py-2 px-4 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Reset"})]}),e.jsx(js,{columns:t,rows:s,columnUnit:o,rowUnit:l,items:n,onItemsChange:h}),e.jsx(vs,{columns:t,rows:s,columnUnit:o,rowUnit:l})]})}function Ns(){const[t,r]=d.useState(()=>{const S=localStorage.getItem("darkMode");return S?JSON.parse(S):!1}),[s,i]=d.useState({finnhub:"demo",massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG",fibhub:""}),[o,a]=d.useState(()=>{const S=localStorage.getItem("refreshInterval");return S?parseInt(S,10):30}),[l,c]=d.useState(()=>{const S=localStorage.getItem("defaultSymbols");return S?JSON.parse(S):["AAPL","GOOGL","MSFT","TSLA","AMZN"]}),[n,h]=d.useState(""),[g,w]=d.useState(()=>{const S=localStorage.getItem("notificationSettings");return S?JSON.parse(S):{priceAlerts:!0,apiStatusAlerts:!0,errorAlerts:!0,soundEnabled:!1}}),[p,C]=d.useState(()=>{const S=localStorage.getItem("generalSettings");return S?JSON.parse(S):{autoRefresh:!0,showTooltips:!0,compactMode:!1}}),[N,u]=d.useState("appearance"),[y,b]=d.useState({message:"",type:""}),[k,T]=d.useState({finnhub:!1,massive:!1,fibhub:!1}),[H,Y]=d.useState(!1);d.useEffect(()=>{const S=localStorage.getItem("apiKeys");if(S)try{const E=JSON.parse(S);i({...s,...E})}catch(E){console.error("Error loading API keys:",E)}},[]),d.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(t)),_("Dark mode updated","success")},[t]);const F=d.useCallback((S,E,R)=>{try{localStorage.setItem(S,typeof E=="object"?JSON.stringify(E):E),_(R||"Settings saved","success"),Y(!1)}catch(se){_("Failed to save settings","error"),console.error("Save error:",se)}},[]),_=(S,E)=>{b({message:S,type:E}),setTimeout(()=>{b({message:"",type:""})},3e3)},X=(S,E)=>{i({...s,[S]:E}),Y(!0)},m=()=>{F("apiKeys",s,"API keys saved successfully")},A=S=>{const E=parseInt(S,10)||30;a(Math.max(5,Math.min(300,E))),F("refreshInterval",E.toString(),"Refresh interval updated")},V=()=>{const S=n.toUpperCase().trim();if(S&&!l.includes(S)&&S.length<=10){const E=[...l,S];c(E),h(""),F("defaultSymbols",E,"Symbol added")}},M=S=>{const E=l.filter(R=>R!==S);c(E),F("defaultSymbols",E,"Symbol removed")},P=(S,E)=>{const R={...g,[S]:E};w(R),F("notificationSettings",R,"Notification settings updated")},L=(S,E)=>{const R={...p,[S]:E};C(R),F("generalSettings",R,"General settings updated")},I=()=>{window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(localStorage.removeItem("apiKeys"),localStorage.removeItem("refreshInterval"),localStorage.removeItem("defaultSymbols"),localStorage.removeItem("notificationSettings"),localStorage.removeItem("generalSettings"),i({finnhub:"demo",massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG",fibhub:""}),a(30),c(["AAPL","GOOGL","MSFT","TSLA","AMZN"]),w({priceAlerts:!0,apiStatusAlerts:!0,errorAlerts:!0,soundEnabled:!1}),C({autoRefresh:!0,showTooltips:!0,compactMode:!1}),_("All settings reset to defaults","success"),Y(!1))},W=[{id:"appearance",label:"Appearance"},{id:"api",label:"API Keys"},{id:"data",label:"Data & Refresh"},{id:"notifications",label:"Notifications"},{id:"general",label:"General"},{id:"tools",label:"Tools"}];return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your application preferences and configuration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[H&&e.jsxs("span",{className:"text-sm text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Unsaved changes"]}),e.jsxs("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset All"]})]})]}),y.message&&e.jsx("div",{className:`rounded-lg p-4 mb-4 border ${y.type==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[y.type==="success"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-medium",children:y.message})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:W.map(S=>e.jsx("button",{onClick:()=>u(S.id),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${N===S.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:S.label},S.id))})})]}),e.jsxs("div",{className:"mt-6",children:[N==="appearance"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Appearance Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customize the look and feel of the application"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Dark Mode"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:"Recommended"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Switch between light and dark theme for better viewing experience"})]}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,role:"switch","aria-checked":t,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${t?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Theme Tip"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:"Dark mode reduces eye strain in low-light environments and can help save battery on OLED displays."})]})]})})]})]}),N==="api"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"API Keys"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your API keys for different data sources. Keys are stored locally in your browser."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Finnhub API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:k.finnhub?"text":"password",value:s.finnhub,onChange:S=>X("finnhub",S.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Finnhub API key"}),e.jsx("button",{type:"button",onClick:()=>T({...k,finnhub:!k.finnhub}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",title:k.finnhub?"Hide":"Show",children:k.finnhub?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("a",{href:"https://finnhub.io/register",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Get free API key"]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"â¢ Free tier: 60 calls/minute"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Massive API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:k.massive?"text":"password",value:s.massive,onChange:S=>X("massive",S.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Massive API key"}),e.jsx("button",{type:"button",onClick:()=>T({...k,massive:!k.massive}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:k.massive?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Optional backup API source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Fibhub API Key (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:k.fibhub?"text":"password",value:s.fibhub||"",onChange:S=>X("fibhub",S.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Fibhub API key (optional)"}),e.jsx("button",{type:"button",onClick:()=>T({...k,fibhub:!k.fibhub}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:k.fibhub?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"For news and additional data sources"})]}),H&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:m,className:"px-6 py-2.5 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save API Keys"]})})]})]}),N==="data"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Data Refresh"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure how often data is automatically refreshed"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:["Refresh Interval: ",e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:[o," seconds"]})]}),e.jsx("input",{type:"range",min:"5",max:"300",step:"5",value:o,onChange:S=>A(S.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-blue-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:"5s (Fast)"}),e.jsx("span",{children:"150s (Balanced)"}),e.jsx("span",{children:"300s (Slow)"})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[e.jsx("strong",{children:"Tip:"})," Lower intervals provide more real-time data but may consume more API quota. Recommended: 30-60 seconds for most use cases."]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Default Stock Symbols"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure default stock symbols to monitor automatically"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:S=>h(S.target.value.toUpperCase()),onKeyPress:S=>S.key==="Enter"&&V(),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter symbol (e.g., AAPL, TSLA)",maxLength:"10"}),e.jsx("button",{onClick:V,disabled:!n.trim()||l.includes(n.toUpperCase().trim()),className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Add"})]}),l.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(S=>e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-semibold",children:S}),e.jsx("button",{onClick:()=>M(S),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},S))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{children:"No symbols added yet"})]})]})]})]}),N==="notifications"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure what notifications you want to receive"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"priceAlerts",label:"Price Alerts",desc:"Get notified when prices reach your target levels"},{key:"apiStatusAlerts",label:"API Status Alerts",desc:"Get notified when API endpoints change status"},{key:"errorAlerts",label:"Error Alerts",desc:"Get notified when errors occur in the application"},{key:"soundEnabled",label:"Sound Notifications",desc:"Play sound when notifications appear"}].map(({key:S,label:E,desc:R})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white block mb-1",children:E}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R})]}),e.jsx("button",{type:"button",onClick:()=>P(S,!g[S]),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${g[S]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${g[S]?"translate-x-6":"translate-x-1"}`})})]},S))})]}),N==="general"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"General Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"General application preferences and behavior"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"autoRefresh",label:"Auto Refresh",desc:"Automatically refresh data at configured intervals"},{key:"showTooltips",label:"Show Tooltips",desc:"Display helpful tooltips throughout the application"},{key:"compactMode",label:"Compact Mode",desc:"Use a more compact layout to fit more information"}].map(({key:S,label:E,desc:R})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white block mb-1",children:E}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R})]}),e.jsx("button",{type:"button",onClick:()=>L(S,!p[S]),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${p[S]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${p[S]?"translate-x-6":"translate-x-1"}`})})]},S))})]}),N==="tools"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"CSS Grid Generator"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create dynamic layouts by configuring your grid columns and rows, then drag elements to position them."})]}),e.jsx(ws,{})]})]})]})}const ur=[{ratio:0,label:"0.0"},{ratio:.5,label:"0.5"},{ratio:1,label:"1.0"},{ratio:1.382,label:"1.382"},{ratio:1.618,label:"1.618"},{ratio:2,label:"2.0"},{ratio:2.382,label:"2.382"},{ratio:2.618,label:"2.618"},{ratio:3,label:"3.0"},{ratio:3.382,label:"3.382"},{ratio:3.618,label:"3.618"},{ratio:4.24,label:"4.24"},{ratio:5.08,label:"5.08"},{ratio:6.86,label:"6.86"},{ratio:11.01,label:"11.01"}],hr=[{ratio:-11.01,label:"-11.01"},{ratio:-6.86,label:"-6.86"},{ratio:-5.08,label:"-5.08"},{ratio:-4.24,label:"-4.24"},{ratio:-3.618,label:"-3.618"},{ratio:-3.382,label:"-3.382"},{ratio:-3,label:"-3.0"},{ratio:-2.618,label:"-2.618"},{ratio:-2.382,label:"-2.382"},{ratio:-2,label:"-2.0"},{ratio:-1.618,label:"-1.618"},{ratio:-1.382,label:"-1.382"},{ratio:-1,label:"-1.0"},{ratio:-.5,label:"-0.5"}];function Ss(){const[t,r]=d.useState("AAPL"),[s,i]=d.useState(2),[o,a]=d.useState(!1),[l,c]=d.useState(null),[n,h]=d.useState(null),[g,w]=d.useState(!1),[p,C]=d.useState(!1),N=d.useRef(null),u=d.useRef(null),y=async(m,A,V)=>{try{const L=await ze(m,"1d",A==="ytd"?"ytd":"1y",!0);if(L.source!=="yahoo")throw new Error("Historical chart data is required for Fibonacci calculations. Yahoo Finance API is currently unavailable. Please try again later or check your internet connection.");const I=L.data;if(!I||!I.chart||!I.chart.result||I.chart.result.length===0)throw new Error("No data available for this symbol");const W=I.chart.result[0],S=W.meta,E=W.indicators?.quote?.[0],R=W.timestamp;if(!E)throw new Error("No quote data available for this symbol");if(!R||R.length===0)throw new Error("No timestamp data available");let se,he,O;if(V==="first_day"){const Z=new Date().getFullYear(),j=[];for(let Q=0;Q<R.length;Q++){const xe=new Date(R[Q]*1e3);xe.getFullYear()===Z&&j.push({index:Q,date:xe,timestamp:R[Q],high:E.high[Q],low:E.low[Q],open:E.open[Q],close:E.close[Q]})}if(j.length===0)throw new Error("No data available for current year");j.sort((Q,xe)=>Q.timestamp-xe.timestamp);const v=j[0];if(v.high===null||v.low===null||v.open===null||v.close===null)throw new Error("Invalid data for first trading day");const D=v.close>v.open;D?(se=v.high,he=v.low):(se=v.low,he=v.high);const z=v.date,ee=D?"BULLISH":"BEARISH";O=`First Trading Day: ${z.toLocaleDateString()} (${ee} - Open: ${v.open.toFixed(2)}, High: ${v.high.toFixed(2)}, Low: ${v.low.toFixed(2)}, Close: ${v.close.toFixed(2)})`,console.log("First trading day anchor:",{date:z.toLocaleDateString(),dateTime:z.toLocaleString(),candleType:ee,actualHigh:v.high,actualLow:v.low,open:v.open,close:v.close,fibonacciHigh:se,fibonacciLow:he,note:D?"0=Low, 1=High":"0=High, 1=Low",totalCandlesInYear:j.length})}const U=E.close.filter(Z=>Z!==null),de=U[U.length-1],ae=[];for(let Z=0;Z<R.length;Z++)if(E.open[Z]!==null&&E.high[Z]!==null&&E.low[Z]!==null&&E.close[Z]!==null){const j=Math.floor(Number(R[Z])),v=Number(E.open[Z]),D=Number(E.high[Z]),z=Number(E.low[Z]),ee=Number(E.close[Z]);!isNaN(v)&&!isNaN(D)&&!isNaN(z)&&!isNaN(ee)&&v>0&&D>0&&z>0&&ee>0&&j>0&&D>=z&&D>=Math.max(v,ee)&&z<=Math.min(v,ee)&&ae.push({time:j,open:v,high:D,low:z,close:ee})}if(ae.sort((Z,j)=>Z.time-j.time),console.log("Chart data prepared:",{totalCandles:ae.length,firstCandle:ae[0],lastCandle:ae[ae.length-1],sampleData:ae.slice(0,3)}),ae.length===0)throw new Error("No valid chart data points found. Please check the symbol and try again.");return{symbol:S.symbol,current:de,high:se,low:he,currency:S.currency||"USD",timestamps:R,quotes:E,anchorInfo:O,chartData:ae}}catch(M){throw console.error("Error fetching market data:",M),console.error("Error stack:",M.stack),new Error(M.message||"Unable to fetch market data. Please verify the symbol and try again.")}},b=async()=>{const m=t.trim().toUpperCase();if(!m){c("Please enter a valid symbol");return}a(!0),c(null),w(!1);try{console.log("Fetching data for:",m,"ytd","Anchor: first_day","Precision:",s);const A=await y(m,"ytd","first_day");console.log("Data received:",A),h(A),w(!0)}catch(A){console.error("Error in fetchDataAndCalculate:",A),c(A.message||"Unable to fetch market data. Please verify the symbol and try again.")}finally{a(!1)}},k=(m,A,V=2)=>{if(!m||!A||m<=A)return[];const M=m-A,P=[];return ur.forEach(L=>{const I=L.ratio===0||L.ratio===1,W=A+M*L.ratio;P.push({y:W,borderColor:"#3B82F6",strokeDashArray:I?0:[5,5],borderWidth:I?2:1,opacity:I?1:.7,label:{borderColor:"#3B82F6",style:{color:"#fff",background:"#3B82F6",fontSize:"11px",fontWeight:600},text:`${L.label} (${W.toFixed(V)})`,position:"right"}})}),hr.forEach(L=>{const I=A+M*L.ratio;P.push({y:I,borderColor:"#EF4444",strokeDashArray:[5,5],borderWidth:1,opacity:.7,label:{borderColor:"#EF4444",style:{color:"#fff",background:"#EF4444",fontSize:"11px",fontWeight:600},text:`${L.label} (${I.toFixed(V)})`,position:"right"}})}),P},T=(m,A,V,M=2)=>{if(!N.current||!m||m.length===0)return console.error("Chart container ref is null or no data"),!1;if(u.current){try{u.current.destroy()}catch(R){console.warn("Error destroying existing chart:",R)}u.current=null}const P=N.current,L=document.documentElement.classList.contains("dark"),I=P.clientWidth||P.offsetWidth||800,W=P.clientHeight||P.offsetHeight||600,S=m.map(R=>({x:R.time*1e3,y:[R.open,R.high,R.low,R.close]})),E=A&&V?k(A,V,M):[];console.log("Fibonacci annotations calculated:",{count:E.length,high:A,low:V,range:A-V,sample:E.slice(0,3)}),E.length>0&&(console.log("First annotation structure:",JSON.stringify(E[0],null,2)),console.log("Last annotation structure:",JSON.stringify(E[E.length-1],null,2)));try{const R={series:[{name:"Price",data:S}],chart:{type:"candlestick",width:I,height:W,toolbar:{show:!0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0,type:"x",autoScaleYaxis:!0}},plotOptions:{candlestick:{colors:{upward:"#22C55E",downward:"#EF4444"}}},xaxis:{type:"datetime",labels:{show:!0,style:{colors:L?"#9ca3af":"#6b7280",fontSize:"12px",fontFamily:"Inter, ui-sans-serif",fontWeight:400},datetimeUTC:!1,format:"MMM dd"},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:L?"#9ca3af":"#6b7280",fontSize:"12px",fontFamily:"Inter, ui-sans-serif",fontWeight:400}}},grid:{borderColor:L?"#374151":"#e5e7eb",strokeDashArray:2},...E.length>0&&{annotations:{yaxis:E}},tooltip:{enabled:!0,theme:L?"dark":"light",custom:function({seriesIndex:he,dataPointIndex:O,w:U}){const de=U.globals.initialSeries[he].data[O],Z=new Date(de.x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),[j,v,D,z]=de.y,ee=2;return`
              <div class="px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg">
                <div class="text-xs font-semibold text-gray-900 dark:text-white mb-1">${Z}</div>
                <div class="text-xs text-gray-600 dark:text-gray-400">
                  <div>Open: <span class="font-semibold">${j.toFixed(ee)}</span></div>
                  <div>High: <span class="font-semibold text-green-600">${v.toFixed(ee)}</span></div>
                  <div>Low: <span class="font-semibold text-red-600">${D.toFixed(ee)}</span></div>
                  <div>Close: <span class="font-semibold">${z.toFixed(ee)}</span></div>
                </div>
              </div>
            `}}},se=new la(P,R);return u.current=se,se.render().then(()=>{console.log("ApexCharts rendered successfully with",E.length,"Fibonacci annotations"),E.length>0&&console.log("First annotation:",E[0])}).catch(he=>{console.error("Error rendering ApexCharts:",he)}),console.log("ApexCharts inline candles chart initialized successfully"),!0}catch(R){return console.error("Error initializing ApexCharts:",R),!1}},H=(m,A,V,M=2)=>{if(!Array.isArray(m)||m.length===0)return console.warn("No price data to show"),!1;const P=m.map(L=>{let I;if(typeof L.time=="number")I=Math.floor(L.time);else if(typeof L.time=="string"){const se=new Date(L.time);if(I=Math.floor(se.getTime()/1e3),isNaN(I))return null}else if(L.timestamp)I=Math.floor(Number(L.timestamp));else return null;const W=Number(L.open),S=Number(L.high),E=Number(L.low),R=Number(L.close);return isNaN(W)||isNaN(S)||isNaN(E)||isNaN(R)||W<=0||S<=0||E<=0||R<=0||I<=0||S<E||S<Math.max(W,R)||E>Math.min(W,R)?null:{time:I,open:W,high:S,low:E,close:R}}).filter(L=>L!==null).sort((L,I)=>L.time-I.time);return P.length===0?(console.error("No valid price data after formatting"),!1):T(P,A,V,M)},Y=(m,A)=>{const V=m-A,M=ur.map(L=>({...L,price:A+V*L.ratio})),P=hr.map(L=>({...L,price:A+V*L.ratio}));return{positiveLevels:M,negativeLevels:P}},F=m=>{m.key==="Enter"&&b()};d.useEffect(()=>{if(!g||!n||!n.chartData||!Array.isArray(n.chartData)||n.chartData.length===0){if(u.current){try{u.current.destroy()}catch{}u.current=null}C(!1);return}let m=!0,A=null,V=0;const M=20,P=()=>{if(!m)return;if(V++,V>M){console.error("Max retries reached for chart initialization"),C(!1);return}if(!N.current){console.log("Container not ready, retrying...",V),A=setTimeout(P,100);return}const L=N.current,I=L.clientWidth||L.offsetWidth,W=L.clientHeight||L.offsetHeight;if(!I||I===0||!W||W===0){console.log("Container has no dimensions, retrying...",{containerWidth:I,containerHeight:W,retryCount:V}),A=setTimeout(P,100);return}console.log("Container ready, initializing chart...",{containerWidth:I,containerHeight:W}),n.chartData&&n.chartData.length>0&&(console.log("Updating chart with",n.chartData.length,"data points"),H(n.chartData,n.high,n.low,s)?(C(!0),console.log("Chart ready and displayed with Fibonacci levels")):(console.error("Failed to update chart with data"),C(!1)))};return A=setTimeout(P,50),()=>{m=!1,A&&clearTimeout(A)}},[g,n?.chartData?.length,n?.high,n?.low,s]),d.useEffect(()=>{let m=!0;const A=setTimeout(()=>{m&&t&&b()},500);return()=>{m=!1,clearTimeout(A)}},[]),d.useEffect(()=>()=>{if(u.current){try{u.current.destroy()}catch(m){console.warn("Error destroying chart on unmount:",m)}u.current=null}},[]);const{positiveLevels:_=[],negativeLevels:X=[]}=n?Y(n.high,n.low):{};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"ð Fibonacci Retracement Calculator"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Calculate Fibonacci levels with real-time market data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Market Data Input"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Symbol (Stock/Crypto)"}),e.jsx("input",{type:"text",id:"symbol",value:t,onChange:m=>r(m.target.value),onKeyPress:F,placeholder:"e.g., AAPL, TSLA, BTC-USD",className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800 transition-colors"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Period"}),e.jsx("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-2 border-blue-500 dark:border-blue-400 rounded-lg text-center text-base font-semibold text-blue-600 dark:text-blue-400",children:"Year to Date (YTD)"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fibonacci Anchor"}),e.jsx("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-2 border-blue-500 dark:border-blue-400 rounded-lg text-center text-base font-semibold text-blue-600 dark:text-blue-400",children:"First Trading Day of Year"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Decimal Precision"}),e.jsx("div",{className:"flex gap-2",children:[2,3].map(m=>e.jsx("button",{className:`flex-1 px-4 py-2.5 rounded-lg font-semibold transition-all ${s===m?"bg-blue-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-300 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400"}`,onClick:()=>i(m),children:m},m))})]}),e.jsx("button",{className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-60 disabled:cursor-not-allowed mt-2",onClick:b,disabled:o,children:o?"Calculating...":"Calculate Fibonacci Levels"}),e.jsx("div",{className:"mt-5 p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded",children:e.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:[e.jsx("strong",{children:"How to use:"})," Enter a stock symbol (e.g., AAPL, GOOGL) or crypto symbol (e.g., BTC-USD, ETH-USD) and click calculate. Fibonacci levels will be anchored to the first trading day of the current year."]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Current Market Data"}),n&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg border border-gray-200 dark:border-gray-600 mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[n.symbol," - ",n.anchorInfo?.split("(")[0].trim()||"Period High/Low"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Current Price:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",n.current.toFixed(s)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Period High:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",n.high.toFixed(s)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Period Low:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",n.low.toFixed(s)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Range:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",(n.high-n.low).toFixed(s),"(",((n.high-n.low)/n.low*100).toFixed(2),"%)"]})]})]})]}),l&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 rounded text-sm mb-4",children:l}),o&&e.jsx("div",{className:"text-center py-6 text-blue-600 dark:text-blue-400 font-medium",children:"Fetching market data..."})]})]}),g&&n&&e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[450px_1fr] gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Fibonacci Extension Levels"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-3 text-sm",children:"ð Positive Levels"}),e.jsx("div",{className:"space-y-2",children:_.map((m,A)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:m.label}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:m.price.toFixed(s)})]},A))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-3 text-sm",children:"ð Negative Levels"}),e.jsx("div",{className:"space-y-2",children:X.map((m,A)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:m.label}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:m.price.toFixed(s)})]},A))})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded",children:e.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:[e.jsx("strong",{children:"Fibonacci Anchoring:"})," BULLISH candle: 0 = Low, 1 = High. BEARISH candle: 0 = High, 1 = Low. Levels extend from these anchor points."]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Price Chart"}),o&&e.jsx("div",{className:"text-center py-6 text-blue-600 dark:text-blue-400 font-medium",children:"Loading chart data..."}),l&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 rounded text-sm mb-4",children:l}),g&&n&&n.chartData&&e.jsx("div",{className:"w-full",children:e.jsx("div",{ref:N,id:"hs-sparklines-candles-chart",className:"w-full",style:{height:"600px",minHeight:"600px",position:"relative"},children:!p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 dark:text-gray-400 z-10 bg-white dark:bg-gray-800 rounded",style:{zIndex:10,pointerEvents:"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto mb-2"}),e.jsx("p",{children:"Initializing chart..."})]})})})})]})]})]})}const Re=[{name:"Blue",bg:"from-blue-50 to-blue-100",border:"border-blue-200",dark:"dark:from-blue-900/20 dark:to-blue-800/20 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{name:"Green",bg:"from-green-50 to-green-100",border:"border-green-200",dark:"dark:from-green-900/20 dark:to-green-800/20 dark:border-green-800",text:"text-green-700 dark:text-green-300"},{name:"Yellow",bg:"from-yellow-50 to-yellow-100",border:"border-yellow-200",dark:"dark:from-yellow-900/20 dark:to-yellow-800/20 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300"},{name:"Purple",bg:"from-purple-50 to-purple-100",border:"border-purple-200",dark:"dark:from-purple-900/20 dark:to-purple-800/20 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{name:"Pink",bg:"from-pink-50 to-pink-100",border:"border-pink-200",dark:"dark:from-pink-900/20 dark:to-pink-800/20 dark:border-pink-800",text:"text-pink-700 dark:text-pink-300"},{name:"Indigo",bg:"from-indigo-50 to-indigo-100",border:"border-indigo-200",dark:"dark:from-indigo-900/20 dark:to-indigo-800/20 dark:border-indigo-800",text:"text-indigo-700 dark:text-indigo-300"}];function Cs(){const[t,r]=d.useState(()=>{try{const f=localStorage.getItem("notes");if(f)return JSON.parse(f)}catch(f){console.error("Error loading notes:",f)}return[]}),[s,i]=d.useState(!1),[o,a]=d.useState(null),[l,c]=d.useState(!1),[n,h]=d.useState(null),[g,w]=d.useState(""),[p,C]=d.useState("date"),[N,u]=d.useState("all"),[y,b]=d.useState("grid"),[k,T]=d.useState([]),[H,Y]=d.useState(!0),[F,_]=d.useState(""),[X,m]=d.useState(""),[A,V]=d.useState([]),[M,P]=d.useState(""),[L,I]=d.useState(Re[0]),[W,S]=d.useState(null);d.useEffect(()=>{try{localStorage.setItem("notes",JSON.stringify(t)),S(new Date)}catch(f){console.error("Error saving notes:",f),a("Failed to save notes to local storage")}},[t]);const E=d.useMemo(()=>{const f=new Set;return t.forEach(B=>{B.tags&&Array.isArray(B.tags)&&B.tags.forEach(J=>f.add(J))}),Array.from(f).sort()},[t]),R=d.useMemo(()=>{let f=[...t];if(g){const B=g.toLowerCase();f=f.filter(J=>J.title?.toLowerCase().includes(B)||J.content?.toLowerCase().includes(B)||J.tags?.some(ve=>ve.toLowerCase().includes(B)))}return N!=="all"&&(f=f.filter(B=>B.tags&&B.tags.includes(N))),f.sort((B,J)=>{switch(p){case"title":return(B.title||"").localeCompare(J.title||"");case"color":return(B.color?.name||"").localeCompare(J.color?.name||"");case"date":default:return new Date(J.updatedAt||J.createdAt)-new Date(B.updatedAt||B.createdAt)}}),f},[t,g,N,p]),se=d.useMemo(()=>{const f=t.length,B={};Re.forEach(ye=>{B[ye.name]=t.filter(Ae=>Ae.color?.name===ye.name).length});const J=t.filter(ye=>ye.tags&&ye.tags.length>0).length,ve=f-J,$e=E.length,Be=f>0?t.reduce((ye,Ae)=>ye+(Ae.tags?.length||0),0)/f:0;return{total:f,byColor:B,withTags:J,withoutTags:ve,totalTags:$e,avgTagsPerNote:Be}},[t,E.length]),he=()=>{h(null),_(""),m(""),V([]),P(""),I(Re[0]),c(!0)},O=f=>{h(f),_(f.title||""),m(f.content||""),V(f.tags||[]),P(""),I(f.color||Re[0]),c(!0)},U=()=>{if(!F.trim()&&!X.trim()){a("Note must have at least a title or content");return}try{const f=new Date().toISOString();if(n)r(B=>B.map(J=>J.id===n.id?{...J,title:F.trim(),content:X.trim(),tags:A,color:L,updatedAt:f}:J));else{const B={id:Date.now().toString(),title:F.trim(),content:X.trim(),tags:A,color:L,createdAt:f,updatedAt:f};r(J=>[B,...J])}c(!1),h(null),a(null)}catch(f){console.error("Failed to save note:",f),a(f.message||"Failed to save note")}},de=f=>{if(window.confirm("Are you sure you want to delete this note?"))try{r(B=>B.filter(J=>J.id!==f)),T(B=>B.filter(J=>J!==f))}catch(B){console.error("Failed to delete note:",B),a(B.message||"Failed to delete note")}},ae=()=>{if(k.length!==0&&window.confirm(`Are you sure you want to delete ${k.length} note(s)?`))try{r(f=>f.filter(B=>!k.includes(B.id))),T([])}catch(f){console.error("Failed to delete notes:",f),a(f.message||"Failed to delete notes")}},Z=()=>{c(!1),h(null),_(""),m(""),V([]),P(""),I(Re[0]),a(null)},j=f=>{T(B=>B.includes(f)?B.filter(J=>J!==f):[...B,f])},v=()=>{k.length===R.length?T([]):T(R.map(f=>f.id))},D=()=>{const f=M.trim();f&&!A.includes(f)&&(V(B=>[...B,f]),P(""))},z=f=>{V(B=>B.filter(J=>J!==f))},ee=f=>{f.key==="Enter"&&(f.preventDefault(),D())},Q=()=>{const f=JSON.stringify(t,null,2),B=new Blob([f],{type:"application/json"}),J=URL.createObjectURL(B),ve=document.createElement("a");ve.href=J,ve.download=`notes-${new Date().toISOString().split("T")[0]}.json`,ve.click(),URL.revokeObjectURL(J)},xe=f=>f?new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, organize, and manage your notes with tags and colors"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:W?`Saved ${xe(W.toISOString())}`:"Ready"})]}),e.jsxs("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Note"]})]})]}),H&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total Notes"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:se.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"With Tags"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:se.withTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Total Tags"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:se.totalTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Avg Tags"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:se.avgTagsPerNote.toFixed(1)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"No Tags"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})]}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:se.withoutTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl p-4 border border-pink-200 dark:border-pink-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-pink-700 dark:text-pink-300",children:"Filtered"}),e.jsx("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:R.length})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:g,onChange:f=>w(f.target.value),placeholder:"Search notes by title, content, or tags...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:N,onChange:f=>u(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),E.map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsxs("select",{value:p,onChange:f=>C(f.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"color",children:"Sort by Color"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>b("grid"),className:`p-2 rounded ${y==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>b("list"),className:`p-2 rounded ${y==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("button",{type:"button",onClick:Q,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Notes",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>Y(!H),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:H?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),k.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.length," note(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:ae,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>T([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]})]})]}),o&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:o})})]}),e.jsx("button",{type:"button",onClick:()=>a(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),R.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:g||N!=="all"?"No notes found":"No notes yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:g||N!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first note"}),!g&&N==="all"&&e.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Note"})]}):e.jsxs(e.Fragment,{children:[R.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:k.length===R.length&&R.length>0,onChange:v,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",R.length,")"]})]}),e.jsx("div",{className:y==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:R.map(f=>{const B=f.color||Re[0];return e.jsxs("div",{className:`relative bg-gradient-to-br ${B.bg} ${B.dark} rounded-xl p-5 border ${B.border} ${B.dark} shadow-md hover:shadow-lg transition-all ${k.includes(f.id)?"ring-2 ring-blue-500":""}`,onClick:()=>O(f),children:[y==="list"&&e.jsx("input",{type:"checkbox",checked:k.includes(f.id),onChange:()=>j(f.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:J=>J.stopPropagation()}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 line-clamp-2",children:f.title||"Untitled Note"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:xe(f.updatedAt||f.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),O(f)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Edit Note",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),de(f.id)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Delete Note",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 line-clamp-4 whitespace-pre-wrap",children:f.content||"No content"}),f.tags&&f.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:f.tags.map(J=>e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:J},J))}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/30 dark:border-gray-700/30",children:[e.jsx("span",{className:`text-xs font-medium ${B.text}`,children:B.name}),y==="grid"&&e.jsx("input",{type:"checkbox",checked:k.includes(f.id),onChange:()=>j(f.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:J=>J.stopPropagation()})]})]},f.id)})}),R.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",R.length," of ",t.length," notes"]})]}),l&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Z}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Edit Note":"New Note"}),e.jsx("button",{type:"button",onClick:Z,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:F,onChange:f=>_(f.target.value),placeholder:"Enter note title...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content"}),e.jsx("textarea",{value:X,onChange:f=>m(f.target.value),placeholder:"Enter note content...",rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:A.map(f=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full",children:[f,e.jsx("button",{type:"button",onClick:()=>z(f),className:"hover:text-blue-900 dark:hover:text-blue-100",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},f))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:M,onChange:f=>P(f.target.value),onKeyPress:ee,placeholder:"Add a tag and press Enter...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Add"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Re.map(f=>e.jsx("button",{type:"button",onClick:()=>I(f),className:`p-3 rounded-lg border-2 transition-all ${L.name===f.name?"border-gray-900 dark:border-white ring-2 ring-blue-500":"border-gray-300 dark:border-gray-600"} bg-gradient-to-br ${f.bg} ${f.dark}`,title:f.name,children:e.jsx("div",{className:`w-full h-4 rounded ${f.bg} ${f.dark}`})},f.name))})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:U,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:n?"Update":"Create"}),e.jsx("button",{type:"button",onClick:Z,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})}function Ls(){const r=(()=>{if(typeof window>"u")return"/";const s=window.location.pathname,i=s.split("/").filter(Boolean);if(i.length>0&&i[0]==="trading"||s.startsWith("/trading"))return"/trading";const o=["news","trading","notes","projection","data","api","settings"];return i.length>0&&!o.includes(i[0])&&i[0]!=="index.html"?`/${i[0]}`:"/"})();return e.jsx(xa,{children:e.jsx(ia,{basename:r,children:e.jsx(da,{children:e.jsxs(we,{path:"/",element:e.jsx(fa,{}),children:[e.jsx(we,{index:!0,element:e.jsx(wa,{})}),e.jsx(we,{path:"news",element:e.jsx(Da,{})}),e.jsx(we,{path:"trading",element:e.jsx(Ua,{})}),e.jsx(we,{path:"notes",element:e.jsx(Cs,{})}),e.jsxs(we,{path:"projection",children:[e.jsx(we,{index:!0,element:e.jsx(gs,{})}),e.jsx(we,{path:"fib",element:e.jsx(Ss,{})})]}),e.jsx(we,{path:"data",element:e.jsx(xs,{})}),e.jsx(we,{path:"api",element:e.jsx(fs,{})}),e.jsx(we,{path:"settings",element:e.jsx(Ns,{})}),e.jsx(we,{path:"*",element:e.jsx(ca,{to:"/",replace:!0})})]})})})})}const Rr=document.getElementById("root");if(!Rr)throw new Error('Root element not found. Make sure there is a <div id="root"></div> in your HTML.');const Ms=ua.createRoot(Rr);Ms.render(e.jsx(d.StrictMode,{children:e.jsx(Ls,{})}));typeof window<"u"&&yr(()=>import("./preline-Cj2HLzEz.js").then(t=>t.p),[]).then(()=>{document.readyState==="complete"||document.readyState==="interactive"?window.HSStaticMethods&&typeof window.HSStaticMethods.autoInit=="function"&&window.HSStaticMethods.autoInit():document.addEventListener("DOMContentLoaded",()=>{window.HSStaticMethods&&typeof window.HSStaticMethods.autoInit=="function"&&window.HSStaticMethods.autoInit()})}).catch(()=>{});
