import{R as Yr,j as e,r as d,u as ur,L as Jr,N as qr,O as Kr,a as hr,b as it,D as st,c as ot,S as nt,v as Zr,d as lt,s as xr,K as gr,P as mr,e as dt,C as ct,f as ut,g as ht,h as xt,i as gt,k as mt,B as Qr,p as pt,l as bt,m as ft,n as zt,o as Xr,q as ea,t as ta,w as ra,x as Qe,y as pr,z as aa,A as sa,E as oa,F as na,G as la,H as we,I as ia,J as da}from"./vendor-CAE5IhR3.js";import"./preline-Cj2HLzEz.js";const ca=(function(){const r=typeof document<"u"&&document.createElement("link").relList;return r&&r.supports&&r.supports("modulepreload")?"modulepreload":"preload"})(),ua=function(t){return"/trading/dist/"+t},Qt={},br=function(r,a,l){let o=Promise.resolve();if(a&&a.length>0){let n=function(u){return Promise.all(u.map(x=>Promise.resolve(x).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");o=n(a.map(u=>{if(u=ua(u),u in Qt)return;Qt[u]=!0;const x=u.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${w}`))return;const f=document.createElement("link");if(f.rel=x?"stylesheet":ca,x||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),x)return new Promise((P,S)=>{f.addEventListener("load",P),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return r().catch(s)})};class ha extends Yr.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,a){this.setState({error:r,errorInfo:a})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null});const a=window.location.pathname.startsWith("/trading")?"/trading":"/";window.location.href=a};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-red-100 dark:bg-red-900/20 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or return to the home page."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Home"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Refresh Page"})]}),!1]})}):this.props.children}}function xa(){const[t,r]=d.useState({name:"John Doe",email:"john.doe@example.com",dob:"",phone:"",location:"",bio:""}),[a,l]=d.useState(!1),[o,s]=d.useState(!1),[i,c]=d.useState(t),n=d.useRef(null);d.useEffect(()=>{try{const h=localStorage.getItem("userProfile");if(h){const k=JSON.parse(h);r(k),c(k)}}catch(h){console.error("Error loading user profile:",h)}},[]),d.useEffect(()=>{(t.name!=="John Doe"||t.email!=="john.doe@example.com")&&localStorage.setItem("userProfile",JSON.stringify(t))},[t]),d.useEffect(()=>{const h=j=>{n.current&&!n.current.contains(j.target)&&(s(!1),l(!1))},k=j=>{j.key==="Escape"&&(s(!1),l(!1))};if(o)return document.addEventListener("mousedown",h),document.addEventListener("keydown",k),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",k),document.body.style.overflow=""}},[o]);const u=h=>{if(!h)return"JD";const k=h.trim().split(" ");return k.length>=2?(k[0][0]+k[k.length-1][0]).toUpperCase():h.substring(0,2).toUpperCase()},x=()=>{r(i),l(!1),s(!1)},w=()=>{c(t),l(!1)},f=()=>{s(!1),l(!1),c(t)},P=(h,k)=>{c(j=>({...j,[h]:k}))},S=h=>h?new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-x-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",onClick:()=>{s(!0),l(!1),c(t)},role:"button",tabIndex:0,"aria-label":"User profile",children:[e.jsx("div",{className:"relative inline-flex items-center justify-center w-10 h-10 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-2 ring-gray-300 dark:ring-gray-600",children:e.jsx("span",{className:"font-medium text-white text-sm",children:u(t.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email})]}),e.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]}),o&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",ref:n,children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm",onClick:()=>{s(!1),l(!1)},"aria-hidden":"true"}),e.jsx("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-6 w-full max-w-md max-h-[90vh] overflow-y-auto z-10 transform transition-all",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit Profile"}),e.jsx("button",{type:"button",onClick:f,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Close profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"relative inline-flex items-center justify-center w-20 h-20 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-4 ring-gray-200 dark:ring-gray-700",children:e.jsx("span",{className:"font-bold text-white text-2xl",children:u(i.name)})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:h=>P("name",h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:i.email,onChange:h=>P("email",h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"your.email@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",value:i.dob,onChange:h=>P("dob",h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",value:i.phone,onChange:h=>P("phone",h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:i.location,onChange:h=>P("location",h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),e.jsx("textarea",{value:i.bio,onChange:h=>P("bio",h.target.value),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Tell us about yourself..."})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:x,disabled:!i.name||!i.email,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:"Save Changes"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Profile"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l(!0),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors","aria-label":"Edit profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:f,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Close profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"relative inline-flex items-center justify-center w-20 h-20 overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 rounded-full ring-4 ring-gray-200 dark:ring-gray-700",children:e.jsx("span",{className:"font-bold text-white text-2xl",children:u(t.name)})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Full Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.name||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.email||"Not set"})]}),t.dob&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Date of Birth"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:S(t.dob)})]}),t.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.phone})]}),t.location&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Location"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mt-1",children:t.location})]}),t.bio&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Bio"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:t.bio})]})]})]})]})})]})]})}function fr(t){const r=t.getMonth()+1,a=t.getDate(),l=t.getFullYear(),o=r.toString().split("").reduce((n,u)=>n+parseInt(u),0),s=a.toString().split("").reduce((n,u)=>n+parseInt(u),0),i=l.toString().split("").reduce((n,u)=>n+parseInt(u),0);let c=o+s+i;for(;c>9&&c!==11&&c!==22&&c!==33;)c=c.toString().split("").reduce((n,u)=>n+parseInt(u),0);return c}function yr(t){const r={1:{number:1,title:"New Beginnings",description:"Leadership, initiative, and fresh starts tend to receive more focus. A day for taking action and starting new projects."},2:{number:2,title:"Cooperation",description:"Cooperation, diplomacy, and partnerships tend to receive more focus. A day for collaboration and building relationships."},3:{number:3,title:"Creativity & Communication",description:"Socializing and the arts tend to receive more focus. A day favorable for creative endeavors and effective communication."},4:{number:4,title:"Stability & Organization",description:"Practicality, stability, and organization tend to receive more focus. A day for building foundations and structure."},5:{number:5,title:"Change & Adventure",description:"Change, adventure, and freedom tend to receive more focus. A day for exploration and embracing new experiences."},6:{number:6,title:"Nurturing & Responsibility",description:"Nurturing, responsibility, and domesticity tend to receive more focus. A day for caring for others and home matters."},7:{number:7,title:"Introspection & Wisdom",description:"Introspection, wisdom, and seeking knowledge tend to receive more focus. A day for reflection and spiritual growth."},8:{number:8,title:"Abundance & Power",description:"Abundance, power, and manifestation tend to receive more focus. A day for achieving goals and material success."},9:{number:9,title:"Completion & Compassion",description:"Completion, humanitarianism, and compassion tend to receive more focus. A day for service to others and endings."},11:{number:11,title:"Intuition & Inspiration",description:"Intuition, inspiration, and spiritual insight tend to receive more focus. A master number day for higher awareness."},22:{number:22,title:"Master Builder",description:"Master building, practical idealism, and large-scale projects tend to receive more focus. A master number day for manifestation."},33:{number:33,title:"Master Teacher",description:"Master teaching, compassion, and healing tend to receive more focus. A master number day for service to humanity."}};return r[t]||r[1]}function ga({timezone:t="America/New_York",city:r="New York",country:a="United States",onRemove:l}){const[o,s]=d.useState(new Date);d.useEffect(()=>{const m=setInterval(()=>{s(new Date)},1e3);return()=>clearInterval(m)},[]);const c=new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"short",year:"numeric"}).formatToParts(o),n=c.find(m=>m.type==="hour").value+":"+c.find(m=>m.type==="minute").value+":"+c.find(m=>m.type==="second").value+" "+c.find(m=>m.type==="dayPeriod").value,u=c.find(m=>m.type==="month").value+" "+c.find(m=>m.type==="day").value+", "+c.find(m=>m.type==="year").value,x=c.find(m=>m.type==="month").value,w=parseInt(c.find(m=>m.type==="day").value),f=parseInt(c.find(m=>m.type==="year").value),S={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12}[x]||1,h=new Date(f,S-1,w),k=fr(h),j=yr(k);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border border-gray-200 dark:border-gray-700 relative",children:[l&&e.jsx("button",{type:"button",onClick:l,className:"absolute top-2 right-2 p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove clock",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:r}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:a}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1 font-mono",children:n}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:u}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:j.number}),e.jsx("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:j.title})]})})]})]})}const Ke=[{timezone:"America/New_York",city:"New York",country:"United States"},{timezone:"America/Los_Angeles",city:"Los Angeles",country:"United States"},{timezone:"America/Chicago",city:"Chicago",country:"United States"},{timezone:"Europe/London",city:"London",country:"United Kingdom"},{timezone:"Europe/Paris",city:"Paris",country:"France"},{timezone:"Europe/Berlin",city:"Berlin",country:"Germany"},{timezone:"Asia/Tokyo",city:"Tokyo",country:"Japan"},{timezone:"Asia/Shanghai",city:"Shanghai",country:"China"},{timezone:"Asia/Hong_Kong",city:"Hong Kong",country:"Hong Kong"},{timezone:"Asia/Dubai",city:"Dubai",country:"UAE"},{timezone:"Asia/Singapore",city:"Singapore",country:"Singapore"},{timezone:"Australia/Sydney",city:"Sydney",country:"Australia"},{timezone:"America/Toronto",city:"Toronto",country:"Canada"},{timezone:"America/Sao_Paulo",city:"SÃ£o Paulo",country:"Brazil"},{timezone:"America/Mexico_City",city:"Mexico City",country:"Mexico"}];function ma({isOpen:t,onClose:r}){const a=ur(),[l,o]=d.useState(()=>{const h=localStorage.getItem("darkMode");return h?JSON.parse(h):!1}),[s,i]=d.useState(()=>{try{const h=localStorage.getItem("sidebarClocks");if(h){const k=JSON.parse(h);if(Array.isArray(k)&&k.length>0)return k}}catch(h){console.error("Error loading clocks from localStorage:",h)}return[{timezone:"America/New_York",city:"New York",country:"United States",id:Date.now()}]}),[c,n]=d.useState(!1),[u,x]=d.useState(Ke[0].timezone);d.useEffect(()=>{l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(l))},[l]),d.useEffect(()=>{localStorage.setItem("sidebarClocks",JSON.stringify(s))},[s]);const w=()=>{const h=Ke.find(k=>k.timezone===u);if(h){if(s.some(m=>m.timezone===h.timezone)){alert("This clock is already added");return}const j={...h,id:Date.now()};i([...s,j]),n(!1),x(Ke[0].timezone)}},f=h=>{if(s.length<=1){alert("You must have at least one clock");return}i(s.filter(k=>k.id!==h))},P=()=>{o(!l)},S=[{path:"/",label:"Dashboard"},{path:"/news",label:"News"},{path:"/trading",label:"Charts"},{path:"/notes",label:"Notes"},{path:"/projection/fib",label:"FIB"},{path:"/projection",label:"Projection"},{path:"/data",label:"Data"},{path:"/api",label:"API"},{path:"/settings",label:"Settings"}];return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 z-[59] bg-gray-900 bg-opacity-50 lg:hidden",onClick:r,"aria-hidden":"true"}),e.jsx("div",{id:"application-sidebar",className:`fixed top-0 start-0 bottom-0 z-[60] w-64 bg-white dark:bg-gray-900 border-e border-gray-200 dark:border-gray-700 transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:end-auto lg:bottom-0 lg:z-[60] lg:block lg:border-e-0 ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Jr,{className:"flex-none text-xl font-semibold text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300 transition-colors",to:"/","aria-label":"Brand",children:"App"}),e.jsx("button",{type:"button",className:"lg:hidden text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",onClick:r,"aria-label":"Close sidebar",children:e.jsxs("svg",{className:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m18 6-12 12"}),e.jsx("path",{d:"m6 6 12 12"})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsx("nav",{className:"hs-accordion-group p-6 w-full","data-hs-accordion-always-open":!0,children:e.jsx("ul",{className:"space-y-1.5",children:S.map(h=>{let k=!1;return h.path==="/"?k=a.pathname==="/":h.path==="/projection"?k=a.pathname==="/projection":h.path==="/projection/fib"?k=a.pathname==="/projection/fib":k=a.pathname===h.path||a.pathname.startsWith(h.path+"/"),e.jsx("li",{children:e.jsx(qr,{to:h.path,onClick:()=>{window.innerWidth<1024&&r&&r()},className:`flex items-center gap-x-3.5 py-2 px-2.5 text-sm text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 ${k?"bg-gray-100 dark:bg-gray-800 font-semibold":""}`,children:e.jsx("span",{children:h.label})})},h.path)})})})}),e.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"p-4 space-y-3 max-h-[45vh] overflow-y-auto",children:[e.jsx("div",{className:"space-y-3",children:s.map(h=>e.jsx(ga,{timezone:h.timezone,city:h.city,country:h.country,onRemove:s.length>1?()=>f(h.id):null},h.id))}),c?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Timezone"}),e.jsx("select",{value:u,onChange:h=>x(h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Ke.map(h=>e.jsxs("option",{value:h.timezone,children:[h.city,", ",h.country]},h.timezone))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:w,className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Add"}),e.jsx("button",{type:"button",onClick:()=>{n(!1),x(Ke[0].timezone)},className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancel"})]})]}):e.jsxs("button",{type:"button",onClick:()=>n(!0),className:"w-full px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 border border-blue-200 dark:border-blue-700 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Clock"]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:l?"Dark Mode":"Light Mode"}),e.jsx("button",{type:"button",onClick:P,className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",role:"switch","aria-checked":l,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),e.jsx(xa,{})]})})]})})]})}function pa(){const[t,r]=d.useState(!1),a=()=>{r(!t)},l=()=>{r(!1)};return d.useEffect(()=>{const o=()=>{window.innerWidth>=1024&&r(!1)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),d.useEffect(()=>(t&&window.innerWidth<1024?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(ma,{isOpen:t,onClose:l}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 inset-x-0 z-20 bg-white dark:bg-gray-900 border-y border-gray-200 dark:border-gray-700 px-4 sm:px-6 md:px-8 lg:hidden",children:e.jsx("div",{className:"flex justify-between items-center gap-x-4",children:e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx("button",{type:"button",className:"text-gray-500 dark:text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:a,"aria-controls":"application-sidebar","aria-label":"Toggle navigation","aria-expanded":t,children:e.jsxs("svg",{className:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),e.jsx("line",{x1:"3",x2:"21",y1:"12",y2:"12"}),e.jsx("line",{x1:"3",x2:"21",y1:"18",y2:"18"})]})}),e.jsx("span",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"App"})]})})}),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(Kr,{})})]})]})}const De=()=>{const t=new Date,r=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),a=r.getDay(),l=r.getHours(),o=r.getMinutes(),s=l*60+o;return a===0||a===6?!1:s>=570&&s<960},ba=(t,r=!0)=>{if(t.marketState){const a=t.marketState.toUpperCase();if(a==="REGULAR")return"REGULAR";if(a==="PRE"||a==="PREPRE")return"PRE";if(a==="POST"||a==="POSTPOST")return"POST";if(a==="CLOSED")return"CLOSED"}return r?De()?"REGULAR":"CLOSED":"UNKNOWN"},Nt=async t=>{try{const r=De()?"5m":"1d",a=(De(),"1d"),{fetchMarketData:l}=await br(async()=>{const{fetchMarketData:k}=await Promise.resolve().then(()=>Oa);return{fetchMarketData:k}},void 0),o=await l(t,r,a);if(!o||!o.data)throw new Error("Invalid response format");const s=o.data;if(o.source==="finnhub"){const k=s.c||0,j=s.pc||k,m=k-j,H=j>0?m/j*100:0,B=De()?"REGULAR":"CLOSED";return{symbol:t,price:k,change:m,changePercent:H,previousClose:j,marketState:B,volume:s.v||0}}if(!s?.chart?.result?.[0])throw new Error("Invalid data format: missing chart result");const c=s.chart.result[0];if(!c.meta)throw new Error("Invalid data format: missing meta data");const n=c.meta,u=c.indicators?.quote?.[0],x=n.previousClose||n.close||0;let w=0;if(n.regularMarketPrice&&n.regularMarketPrice>0&&(w=n.regularMarketPrice),(!w||w===0)&&u&&u.close&&u.close.length>0)for(let k=u.close.length-1;k>=0;k--){const j=u.close[k];if(j!=null&&j>0){w=j;break}}if((!w||w===0)&&(w=n.chartPreviousClose||n.close||0),(!w||w===0)&&(w=x||n.close||0),!w||w===0)throw new Error("Invalid data format: no valid price data");let f=0,P=0;x&&x>0&&(f=w-x,P=f/x*100);const S=ba(n,!0);let h=0;if(n.regularMarketVolume&&n.regularMarketVolume>0)h=n.regularMarketVolume;else if(u&&u.volume&&u.volume.length>0)for(let k=u.volume.length-1;k>=0;k--){const j=u.volume[k];if(j!=null&&j>0){h=j;break}}return{symbol:t,price:w,change:f,changePercent:P,previousClose:x,marketState:S,volume:h}}catch(r){console.error(`Error fetching ${t}:`,r);const a=De()?"REGULAR":"CLOSED";return{symbol:t,price:null,change:0,changePercent:0,previousClose:0,marketState:a,volume:0,error:"Failed to fetch data. Please try again."}}};function fa({id:t,timezone:r,city:a,country:l}){const{attributes:o,listeners:s,setNodeRef:i,transform:c,transition:n,isDragging:u}=dt({id:t}),x={transform:ct.Transform.toString(c),transition:n,opacity:u?.5:1},[w,f]=d.useState(new Date);d.useEffect(()=>{const p=setInterval(()=>{f(new Date)},1e3);return()=>clearInterval(p)},[]);const S=new Intl.DateTimeFormat("en-US",{timeZone:r,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,day:"2-digit",month:"short",year:"numeric"}).formatToParts(w),h=S.find(p=>p.type==="hour").value+":"+S.find(p=>p.type==="minute").value+":"+S.find(p=>p.type==="second").value+" "+S.find(p=>p.type==="dayPeriod").value,k=S.find(p=>p.type==="month").value+" "+S.find(p=>p.type==="day").value+", "+S.find(p=>p.type==="year").value,j=S.find(p=>p.type==="month").value,m=parseInt(S.find(p=>p.type==="day").value),H=parseInt(S.find(p=>p.type==="year").value),K={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12}[j]||1,T=new Date(H,K-1,m),_=fr(T),X=yr(_);return e.jsx("div",{ref:i,style:x,className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...o,...s,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:l}),e.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 font-mono",children:h}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:k}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:X.number}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:X.title})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:X.description})]})]})})}function St({id:t,children:r}){const{attributes:a,listeners:l,setNodeRef:o,transform:s,transition:i,isDragging:c}=dt({id:t}),n={transform:ct.Transform.toString(s),transition:i,opacity:c?.5:1};return e.jsxs("div",{ref:o,style:n,className:"relative mb-8",children:[e.jsx("div",{...a,...l,className:"absolute -top-2 left-0 right-0 h-8 cursor-move touch-none flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity z-10 group",children:e.jsxs("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Drag to reorder section"})]})}),e.jsx("div",{className:"pt-2",children:r})]})}function ya({volume:t,symbol:r}){if(!t||t===0)return null;const a=l=>l>=1e9?`${(l/1e9).toFixed(2)}B`:l>=1e6?`${(l/1e6).toFixed(2)}M`:l>=1e3?`${(l/1e3).toFixed(2)}K`:l.toLocaleString();return e.jsxs("div",{className:"absolute z-50 w-56 p-4 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-200 bottom-full left-1/2 transform -translate-x-1/2 mb-3",children:[e.jsxs("div",{className:"text-xs font-semibold mb-2 text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:[r," Volume"]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:a(t)}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total shares traded"}),e.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-px",children:[e.jsx("div",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-white dark:border-t-gray-800"}),e.jsx("div",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[6px] border-transparent border-t-gray-200 dark:border-t-gray-700 absolute top-[1px]"})]})]})}function ka({id:t,symbol:r,data:a,loading:l,onRemove:o}){const{attributes:s,listeners:i,setNodeRef:c,transform:n,transition:u,isDragging:x}=dt({id:t}),w={transform:ct.Transform.toString(n),transition:u,opacity:x?.5:1};if(l)return e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...s,...i,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-200 border-t-blue-600"}),o&&e.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading..."})]});if(a?.error||a?.price===null)return e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...s,...i,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 rounded",children:"Error"}),o&&e.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:a?.error||"Unable to fetch data"})]});if(!a)return e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...s,...i,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r})]}),o&&e.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No data available"})]});const f=a.change>=0,S=r==="DXY"||r==="VIX"?"":"$";let h="Closed",k="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300";return a.marketState==="REGULAR"?(h="Open",k="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"):a.marketState==="PRE"||a.marketState==="PREPRE"?(h="Pre-Market",k="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400"):a.marketState==="POST"||a.marketState==="POSTPOST"?(h="After Hours",k="bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400"):a.marketState==="CLOSED"?(h="Closed",k="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"):De()?(h="Open",k="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"):(h="Closed",k="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"),e.jsxs("div",{ref:c,style:w,className:"relative group bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 cursor-move touch-none",...s,...i,children:[a&&a.volume>0&&e.jsx(ya,{volume:a.volume,symbol:r}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k}`,children:h}),o&&e.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),o()},className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:[S,a.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-lg font-semibold ${f?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:a.change!==0?`${f?"+":""}${S}${Math.abs(a.change).toFixed(2)}`:`${S}0.00`}),e.jsx("span",{className:`text-lg font-semibold ${f?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:a.changePercent!==0?`(${f?"+":""}${Math.abs(a.changePercent).toFixed(2)}%)`:"(0.00%)"})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Previous Close"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[S,(a.previousClose||a.price-a.change).toFixed(2)]})]})})]})}function ja(){const t=[{display:"QQQ",api:"QQQ"},{display:"SPY",api:"SPY"},{display:"DXY",api:"DX-Y.NYB"},{display:"VIX",api:"^VIX"}],r=[{id:"clock-ny",timezone:"America/New_York",city:"New York",country:"United States"},{id:"clock-london",timezone:"Europe/London",city:"London",country:"United Kingdom"},{id:"clock-tokyo",timezone:"Asia/Tokyo",city:"Tokyo",country:"Japan"},{id:"clock-sydney",timezone:"Australia/Sydney",city:"Sydney",country:"Australia"}],a=["world-clocks","market","todo-list"],[l,o]=d.useState(()=>{try{const L=localStorage.getItem("dashboardSymbols");if(L){const M=JSON.parse(L);if(Array.isArray(M)&&M.length>0)return M}}catch(L){console.error("Error loading symbols from localStorage:",L)}return t}),[s,i]=d.useState(()=>{try{const L=localStorage.getItem("dashboardWorldClocks");if(L){const M=JSON.parse(L);if(Array.isArray(M)&&M.length>0)return M}}catch(L){console.error("Error loading world clocks from localStorage:",L)}return r}),[c,n]=d.useState(()=>{try{const L=localStorage.getItem("dashboardSectionOrder");if(L){const M=JSON.parse(L);if(Array.isArray(M)&&M.length>0)return M}}catch(L){console.error("Error loading section order from localStorage:",L)}return a}),[u,x]=d.useState({}),[w,f]=d.useState(!0),[P,S]=d.useState(null),[h,k]=d.useState(""),[j,m]=d.useState(!1),H=hr(it(mr,{activationConstraint:{distance:8}}),it(gr,{coordinateGetter:xr}));d.useEffect(()=>{localStorage.setItem("dashboardWorldClocks",JSON.stringify(s))},[s]),d.useEffect(()=>{localStorage.setItem("dashboardSectionOrder",JSON.stringify(c))},[c]),d.useEffect(()=>{localStorage.setItem("dashboardSymbols",JSON.stringify(l))},[l]);const B=async()=>{f(!0);try{const L=new Promise((W,N)=>setTimeout(()=>N(new Error("Request timeout")),15e3)),M=l.map(W=>Nt(W.api).then(N=>({...N,displaySymbol:W.display})).catch(N=>({symbol:W.display,displaySymbol:W.display,price:null,change:0,changePercent:0,previousClose:0,marketState:De()?"REGULAR":"CLOSED",error:"Failed to fetch data. Please try again."}))),C=await Promise.race([Promise.all(M),L]),I={};C.forEach((W,N)=>{const E=l[N].display;I[E]={...W,symbol:E}}),x(I),S(new Date)}catch(L){console.error("Error loading stock data:",L);const M={};l.forEach(C=>{u[C.display]||(M[C.display]={symbol:C.display,price:null,change:0,changePercent:0,previousClose:0,marketState:De()?"REGULAR":"CLOSED",error:"Failed to fetch data. Please try again."})}),x(C=>({...C,...M}))}finally{f(!1)}};d.useEffect(()=>{B();const L=setInterval(B,3e4);return()=>clearInterval(L)},[l.length]);const K=async()=>{const L=h.trim().toUpperCase();if(L){if(l.some(M=>M.display===L||M.api===L)){alert("Symbol already exists"),k("");return}m(!0);try{const M=await Nt(L);if(M.error||M.price===null){alert(`Invalid symbol: ${L}. Please check the symbol and try again.`),m(!1);return}const C={display:L,api:L};o([...l,C]),k("");const I=await Nt(L);x(W=>({...W,[L]:{...I,symbol:L}}))}catch(M){console.error("Error adding symbol:",M),alert(`Failed to add symbol: ${L}. Please check the symbol and try again.`)}finally{m(!1)}}},T=L=>{if(l.length<=1){alert("You must have at least one symbol on the dashboard");return}o(l.filter(M=>M.display!==L)),x(M=>{const C={...M};return delete C[L],C})},_=L=>{L.key==="Enter"&&!j&&K()},X=L=>{const{active:M,over:C}=L;C&&M.id!==C.id&&i(I=>{const W=I.findIndex(E=>E.id===M.id),N=I.findIndex(E=>E.id===C.id);return lt(I,W,N)})},p=L=>{const{active:M,over:C}=L;C&&M.id!==C.id&&o(I=>{const W=I.findIndex(E=>E.display===M.id),N=I.findIndex(E=>E.display===C.id);return lt(I,W,N)})},A=L=>{const{active:M,over:C}=L;C&&M.id!==C.id&&n(I=>{const W=I.indexOf(M.id),N=I.indexOf(C.id);return lt(I,W,N)})},V=L=>{switch(L){case"world-clocks":return e.jsx(St,{id:L,children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"World Clocks"}),e.jsx(st,{sensors:H,collisionDetection:ot,onDragEnd:X,children:e.jsx(nt,{items:s.map(M=>M.id),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:s.map(M=>e.jsx(fa,{id:M.id,timezone:M.timezone,city:M.city,country:M.country},M.id))})})})]})},L);case"market":return e.jsx(St,{id:L,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Market"}),e.jsxs("div",{className:"flex items-center gap-4",children:[P&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last updated: ",P.toLocaleTimeString("en-US",{timeZone:"America/New_York"})]}),e.jsxs("button",{type:"button",onClick:B,disabled:w,className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:`w-4 h-4 ${w?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:M=>k(M.target.value.toUpperCase()),onKeyPress:_,placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",disabled:j,className:"flex-1 px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("button",{type:"button",onClick:K,disabled:j||!h.trim(),className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Symbol"]})})]}),e.jsx(st,{sensors:H,collisionDetection:ot,onDragEnd:p,children:e.jsx(nt,{items:l.map(M=>M.display),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map(M=>e.jsx(ka,{id:M.display,symbol:M.display,data:u[M.display]||null,loading:w&&!u[M.display],onRemove:l.length>1?()=>T(M.display):null},M.display))})})})]})},L);case"todo-list":return e.jsx(St,{id:L,children:e.jsx(va,{})},L);default:return null}};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time market data and world clocks"})]}),e.jsx(st,{sensors:H,collisionDetection:ot,onDragEnd:A,children:e.jsx(nt,{items:c,strategy:Zr,children:c.map(L=>V(L))})})]})}function va(){const[t,r]=d.useState([]),[a,l]=d.useState(""),[o,s]=d.useState(null),[i,c]=d.useState("");d.useEffect(()=>{const j=localStorage.getItem("dashboardTodos");if(j)try{const m=JSON.parse(j),H=new Date().toDateString(),B=m.filter(K=>new Date(K.createdAt).toDateString()===H);r(B),B.length!==m.length&&localStorage.setItem("dashboardTodos",JSON.stringify(B))}catch(m){console.error("Error loading todos:",m)}},[]),d.useEffect(()=>{(t.length>0||localStorage.getItem("dashboardTodos"))&&localStorage.setItem("dashboardTodos",JSON.stringify(t))},[t]);const n=()=>{if(a.trim()){const j={id:Date.now(),text:a.trim(),completed:!1,createdAt:new Date().toISOString()};r([...t,j]),l("")}},u=j=>{r(t.map(m=>m.id===j?{...m,completed:!m.completed}:m))},x=j=>{r(t.filter(m=>m.id!==j))},w=j=>{s(j.id),c(j.text)},f=()=>{i.trim()&&(r(t.map(j=>j.id===o?{...j,text:i.trim()}:j)),s(null),c(""))},P=()=>{s(null),c("")},S=(j,m)=>{j.key==="Enter"?m():j.key==="Escape"&&m===P&&P()},h=t.filter(j=>j.completed).length,k=t.length;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Today's To-Do List"}),k>0&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[h," of ",k," completed"]})]}),k>0&&e.jsx("button",{type:"button",onClick:()=>r([]),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors",children:"Clear All"})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{type:"text",value:a,onChange:j=>l(j.target.value),onKeyPress:j=>S(j,n),placeholder:"Add a new task...",className:"flex-1 px-4 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),e.jsxs("button",{type:"button",onClick:n,className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tasks for today. Add one above to get started!"})]}):e.jsx("div",{className:"space-y-2",children:t.map(j=>e.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border transition-all ${j.completed?"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>u(j.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${j.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-green-500"}`,children:j.completed&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),o===j.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:m=>c(m.target.value),onKeyPress:m=>S(m,f),onKeyDown:m=>S(m,P),className:"flex-1 px-3 py-1 border-2 border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",autoFocus:!0}),e.jsx("button",{type:"button",onClick:f,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Save"}),e.jsx("button",{type:"button",onClick:P,className:"px-3 py-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`flex-1 text-gray-900 dark:text-white cursor-pointer ${j.completed?"line-through text-gray-500 dark:text-gray-400":""}`,onDoubleClick:()=>w(j),children:j.text}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>w(j),className:"p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:()=>x(j.id),className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},j.id))})]})}const rt="d18ueuhr01qkcat4uip0d18ueuhr01qkcat4uipg",kr=()=>{try{const t=localStorage.getItem("apiKeys");if(t){const r=JSON.parse(t);return{finnhub:r.finnhub||rt,fibhub:r.fibhub||rt}}}catch(t){console.error("Error loading API keys from localStorage:",t)}return{finnhub:rt,fibhub:rt}},wa=(t="general",r=null)=>{const l=kr().finnhub||"demo";if(r){const o=new Date,s=new Date(o);s.setDate(s.getDate()-7);const i=s.toISOString().split("T")[0],c=o.toISOString().split("T")[0];return`https://finnhub.io/api/v1/company-news?symbol=${r}&from=${i}&to=${c}&token=${l}`}return`https://finnhub.io/api/v1/news?category=${t}&token=${l}`},jr=async(t="general",r=null)=>{try{const a=wa(t,r),l=new Promise((i,c)=>setTimeout(()=>c(new Error("Finnhub request timeout")),1e4));let o;try{const i=fetch(a,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});o=await Promise.race([i,l])}catch(i){if(i.message&&(i.message.includes("CORS")||i.message.includes("Failed to fetch"))){console.warn("Direct Finnhub fetch failed, trying CORS proxy...");const c=`https://api.allorigins.win/get?url=${encodeURIComponent(a)}`,n=fetch(c,{method:"GET",headers:{Accept:"application/json"}});if(o=await Promise.race([n,l]),!o.ok)throw new Error(`CORS proxy failed: ${o.status}`);const u=await o.json();if(!u||!u.contents)throw new Error("No contents from CORS proxy");const x=JSON.parse(u.contents);if(x&&typeof x=="object"&&x.error)throw new Error(x.error);return!x||Array.isArray(x)&&x.length===0?[]:Array.isArray(x)?x.map(w=>({id:w.id||`${w.headline}-${w.datetime}`,title:w.headline||w.title||"No title",summary:w.summary||w.description||"",source:w.source||"Unknown",url:w.url||w.link||"#",image:w.image||null,datetime:w.datetime*1e3||Date.now(),category:w.category||t,symbol:w.related||r||null,sentiment:w.sentiment||null,apiSource:"finnhub"})):[]}else throw i}if(!o.ok){if(o.status===429)throw new Error("Finnhub API rate limit exceeded. Please try again later.");if(o.status===401||o.status===403)throw new Error("Finnhub API key invalid. Please check your API key in Settings.");const i=await o.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch news: ${o.status} ${o.statusText}. ${i}`)}const s=await o.json();if(s&&typeof s=="object"&&s.error)throw new Error(s.error);return!s||Array.isArray(s)&&s.length===0?[]:Array.isArray(s)?s.map(i=>({id:i.id||`${i.headline}-${i.datetime}`,title:i.headline||i.title||"No title",summary:i.summary||i.description||"",source:i.source||"Unknown",url:i.url||i.link||"#",image:i.image||null,datetime:i.datetime*1e3||Date.now(),category:i.category||t,symbol:i.related||r||null,sentiment:i.sentiment||null,apiSource:"finnhub"})):[]}catch(a){return console.error("Error fetching news from Finnhub:",a),[]}},Na=(t="general")=>{const r={general:"https://feeds.finance.yahoo.com/rss/2.0/headline",market:"https://feeds.finance.yahoo.com/rss/2.0/headline",stocks:"https://feeds.finance.yahoo.com/rss/2.0/headline",crypto:"https://feeds.finance.yahoo.com/rss/2.0/headline?s=YF",economy:"https://feeds.finance.yahoo.com/rss/2.0/headline"};return r[t]||r.general},Sa=(t="general",r=null)=>{const a=kr(),l=a.fibhub||a.finnhub||"demo";if(r){const o=new Date,s=new Date(o);s.setDate(s.getDate()-7);const i=s.toISOString().split("T")[0],c=o.toISOString().split("T")[0];return`https://api.fibhub.io/v1/company-news?symbol=${r}&from=${i}&to=${c}&token=${l}`}return`https://api.fibhub.io/v1/news?category=${t}&token=${l}`},vr=async(t="general",r=null)=>{try{const a=Sa(t,r),l=new Promise((n,u)=>setTimeout(()=>u(new Error("Fibhub request timeout")),8e3)),o=fetch(a,{method:"GET",headers:{Accept:"application/json"},mode:"cors"}),s=await Promise.race([o,l]);if(!s.ok)return s.status!==404&&console.warn(`Fibhub API returned ${s.status}: ${s.statusText}`),[];const i=await s.json();if(!i)return[];let c=[];if(Array.isArray(i))c=i;else if(i.data&&Array.isArray(i.data))c=i.data;else if(i.news&&Array.isArray(i.news))c=i.news;else if(i.results&&Array.isArray(i.results))c=i.results;else if(i.headline||i.title)c=[i];else return[];return c.length===0?[]:c.map((n,u)=>{let x=Date.now();return n.datetime?typeof n.datetime=="number"?x=n.datetime<1e10?n.datetime*1e3:n.datetime:x=new Date(n.datetime).getTime()||Date.now():n.publishedAt?x=new Date(n.publishedAt).getTime()||Date.now():n.pubDate&&(x=new Date(n.pubDate).getTime()||Date.now()),{id:n.id||`${n.headline||n.title||"fibhub"}-${x}-${u}`,title:n.headline||n.title||"No title",summary:n.summary||n.description||n.content||"",source:n.source||n.publisher||"Fibhub",url:n.url||n.link||n.webUrl||"#",image:n.image||n.imageUrl||n.urlToImage||null,datetime:x,category:n.category||t,symbol:n.related||n.symbol||r||null,sentiment:n.sentiment||null,apiSource:"fibhub"}})}catch(a){return a.message&&!a.message.includes("timeout")&&!a.message.includes("Failed to fetch")&&console.warn("Fibhub fetch warning:",a.message),[]}},Ca=async(t="general")=>{try{const r=Na(t),a=`https://api.allorigins.win/get?url=${encodeURIComponent(r)}`,l=new Promise((f,P)=>setTimeout(()=>P(new Error("Yahoo Finance request timeout")),1e4)),o=fetch(a,{method:"GET",headers:{Accept:"application/json"}}),s=await Promise.race([o,l]);if(!s.ok)throw new Error(`Failed to fetch Yahoo Finance news: ${s.status}`);const i=await s.json();if(!i||!i.contents)return console.warn("Yahoo Finance: No contents in response"),[];const n=new DOMParser().parseFromString(i.contents,"text/xml"),u=n.querySelector("parsererror");if(u)return console.error("Yahoo Finance RSS parsing error:",u.textContent),[];const x=n.querySelectorAll("item");if(!x||x.length===0)return console.warn("Yahoo Finance: No items found in RSS feed"),[];const w=[];return x.forEach((f,P)=>{try{const S=f.querySelector("title")?.textContent||"No title",h=f.querySelector("description")?.textContent||"",k=f.querySelector("link")?.textContent||"#",j=f.querySelector("pubDate")?.textContent||new Date().toISOString(),m=h.match(/<img[^>]+src="([^"]+)"/i),H=m?m[1]:null,B=h.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").trim().substring(0,300);w.push({id:`yahoo-${P}-${Date.now()}`,title:S.trim(),summary:B||"No description available",source:"Yahoo Finance",url:k.trim(),image:H,datetime:new Date(j).getTime()||Date.now(),category:t,symbol:null,sentiment:null,apiSource:"yahoo"})}catch(S){console.warn("Error parsing Yahoo Finance news item:",S)}}),w.length===0?(console.warn("Yahoo Finance: No valid news items parsed"),[]):w.slice(0,50)}catch(r){return console.error("Error fetching news from Yahoo Finance:",r),[]}},wr=t=>{const r=new Set,a=[];for(const l of t){const o=l.title.toLowerCase().trim().substring(0,50),s=l.url||"",i=`${o}-${s}`;r.has(i)||(r.add(i),a.push(l))}return a},Dt=async(t="general",r=null)=>{const a=[],l=[];try{const o=[];o.push(jr(t,r).then(u=>u&&u.length>0?(a.push("finnhub"),u):[]).catch(u=>(console.error("Finnhub fetch error:",u),l.push({source:"finnhub",error:u.message}),[]))),o.push(vr(t,r).then(u=>u&&u.length>0?(a.push("fibhub"),u):[]).catch(u=>(console.warn("Fibhub fetch error (non-critical):",u.message),[]))),r||o.push(Ca(t).then(u=>u&&u.length>0?(a.push("yahoo"),u):[]).catch(u=>(console.error("Yahoo Finance fetch error:",u),l.push({source:"yahoo",error:u.message}),[])));const i=(await Promise.all(o)).flat(),c=wr(i);c.sort((u,x)=>(x.datetime||0)-(u.datetime||0));const n=a.length>0?a.join("+"):"none";return{news:c,source:n,sources:a,errors:l.length>0?l:null}}catch(o){return console.error("Error fetching market news:",o),{news:[],source:"none",sources:[],errors:[{source:"unknown",error:o.message}]}}},La=async(t="general")=>{const a={all:"general",market:"general",stocks:"general",crypto:"crypto",economy:"general"}[t]||"general";return Dt(a)},Ma=async t=>{try{if(!t||!t.trim())return{news:[],source:"none",sources:[]};const r=t.trim().toUpperCase(),l=/^[A-Z0-9]{1,5}$/.test(r);let o;if(l)try{const[c,n]=await Promise.all([jr("general",r).then(h=>h&&h.length>0?h:[]).catch(()=>[]),vr("general",r).then(h=>h&&h.length>0?h:[]).catch(()=>[])]),u=await Dt("general"),x=[...c,...n,...u.news||[]],w=wr(x),f=t.toLowerCase(),P=w.filter(h=>h.title.toLowerCase().includes(f)||h.summary.toLowerCase().includes(f)||h.symbol&&h.symbol.toUpperCase().includes(r));P.sort((h,k)=>(k.datetime||0)-(h.datetime||0));const S=[];return c.length>0&&S.push("finnhub"),n.length>0&&S.push("fibhub"),u.sources&&u.sources.length>0&&S.push(...u.sources.filter(h=>!S.includes(h))),{news:P,source:S.length>0?S.join("+"):"none",sources:S,errors:u.errors}}catch(c){console.log("Company news search failed, falling back to general search:",c)}if(o=await Dt("general"),!o.news||o.news.length===0)return{news:[],source:"none",sources:[]};const s=t.toLowerCase(),i=o.news.filter(c=>c.title.toLowerCase().includes(s)||c.summary.toLowerCase().includes(s)||c.symbol&&c.symbol.toUpperCase().includes(r));return i.sort((c,n)=>(n.datetime||0)-(c.datetime||0)),{news:i,source:o.source,sources:o.sources||[],errors:o.errors}}catch(r){return console.error("Error searching news:",r),{news:[],source:"none",sources:[],errors:[{source:"unknown",error:r.message}]}}};function Pa(){const[t,r]=d.useState("all"),[a,l]=d.useState([]),[o,s]=d.useState(!0),[i,c]=d.useState(null),[n,u]=d.useState(""),[x,w]=d.useState(!1),[f,P]=d.useState(null),[S,h]=d.useState(null),[k,j]=d.useState([]),m=[{id:"all",label:"All News"},{id:"market",label:"Market News"},{id:"stocks",label:"Stocks"},{id:"crypto",label:"Crypto"},{id:"economy",label:"Economy"}],H=d.useCallback(async(p=t)=>{s(!0),c(null),w(!1);try{const A=await La(p);if(!A.news||A.news.length===0){if(A.errors&&A.errors.length>0){const V=A.errors.map(L=>`${L.source}: ${L.error}`).join(", ");c(`Failed to fetch news from all sources. ${V}. Please check your API keys in Settings.`)}else c("No news available at this time. Please try again later or check your API keys in Settings.");l([]),h(null),j([])}else{const V=(A.news||[]).sort((L,M)=>(M.datetime||0)-(L.datetime||0));l(V),h(A.source),j(A.sources||[]),P(new Date),c(null)}}catch(A){console.error("Error loading news:",A),c(A.message||"Failed to load news. Please check your API keys in Settings and try again."),l([]),h(null),j([])}finally{s(!1)}},[t]),B=d.useCallback(async p=>{if(!p||!p.trim()){H(t);return}w(!0),s(!0),c(null);try{const A=await Ma(p.trim());if(!A.news||A.news.length===0){if(A.errors&&A.errors.length>0){const V=A.errors.map(L=>`${L.source}: ${L.error}`).join(", ");c(`No news found for "${p}". ${V}. Please check your API keys in Settings.`)}else c(`No news found for "${p}". Please try a different search term or check your API keys in Settings.`);l([]),h(null),j([])}else{const V=(A.news||[]).sort((L,M)=>(M.datetime||0)-(L.datetime||0));l(V),h(A.source),j(A.sources||[]),P(new Date),c(null)}}catch(A){console.error("Error searching news:",A),c(A.message||`Failed to search news for "${p}". Please check your API keys in Settings and try again.`),l([]),h(null),j([])}finally{s(!1),w(!1)}},[H,t]),K=p=>{r(p),u("")},T=()=>{n.trim()?B(n):H(t)},_=p=>{p.key==="Enter"&&B(n)};d.useEffect(()=>{n.trim()||H(t)},[t,H,n]);const X=p=>{if(!p)return"Unknown date";const A=new Date(p),L=new Date-A,M=Math.floor(L/6e4),C=Math.floor(L/36e5),I=Math.floor(L/864e5);return M<1?"Just now":M<60?`${M} minute${M>1?"s":""} ago`:C<24?`${C} hour${C>1?"s":""} ago`:I<7?`${I} day${I>1?"s":""} ago`:A.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"})};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"News"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Stay updated with the latest financial news and market updates"})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:n,onChange:p=>u(p.target.value),onKeyPress:_,placeholder:"Search news by keyword or symbol (e.g., AAPL, Bitcoin, Fed)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),n&&e.jsx("button",{type:"button",onClick:()=>{u(""),H(t)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("button",{type:"button",onClick:()=>B(n),disabled:o,className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:o&&x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Searching..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(p=>e.jsx("button",{type:"button",onClick:()=>K(p.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===p.id?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:p.label},p.id))})}),(f||S||k.length>0)&&e.jsxs("div",{className:"mb-4 flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[k.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:["Sources: ",k.map(p=>p==="finnhub"?"Finnhub":p==="yahoo"?"Yahoo Finance":p==="fibhub"?"Fibhub":p).join(" + ")]}),k.length>1&&e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded text-xs font-medium",children:"Combined"})]}),!k.length&&S&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:["Source: ",S==="finnhub"?"Finnhub":S==="yahoo"?"Yahoo Finance":S==="fibhub"?"Fibhub":S.includes("+")?S.split("+").map(p=>p==="finnhub"?"Finnhub":p==="yahoo"?"Yahoo Finance":p==="fibhub"?"Fibhub":p).join(" + "):"Unknown"]}),f&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Last updated: ",f.toLocaleTimeString("en-US",{timeZone:"America/New_York"})]})]}),e.jsxs("button",{type:"button",onClick:T,disabled:o,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${o?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]}),i&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:i}),e.jsx("button",{type:"button",onClick:T,className:"text-xs text-red-600 dark:text-red-300 mt-1 underline hover:no-underline",children:"Try again"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:o&&a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading news..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No news found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n?`No news found for "${n}". Try a different search term.`:"No news available for this category. Please try refreshing or selecting a different category."}),e.jsx("button",{type:"button",onClick:T,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh News"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(p=>e.jsx("article",{className:"border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.image&&e.jsx("div",{className:"flex-shrink-0 sm:w-32 sm:h-32 w-full h-48",children:e.jsx("img",{src:p.image,alt:p.title,className:"w-full h-full object-cover rounded-lg",onError:A=>{A.target.style.display="none"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:p.title})}),p.symbol&&e.jsx("span",{className:"flex-shrink-0 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs font-medium",children:p.symbol})]}),p.summary&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 line-clamp-3",children:p.summary}),e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),p.source]}),p.apiSource&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${p.apiSource==="finnhub"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":p.apiSource==="fibhub"?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:p.apiSource==="finnhub"?"Finnhub":p.apiSource==="fibhub"?"Fibhub":"Yahoo Finance"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),X(p.datetime)]})]}),e.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm flex items-center gap-1 transition-colors",children:["Read more",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})},p.id))})})]})}const Ve=[{name:"corsproxy.io",getUrl:t=>`https://corsproxy.io/?${encodeURIComponent(t)}`,parseResponse:t=>t,headers:{}},{name:"cors-anywhere-heroku",getUrl:t=>`https://cors-anywhere.herokuapp.com/${t}`,parseResponse:t=>t,headers:{"X-Requested-With":"XMLHttpRequest"}},{name:"thingproxy",getUrl:t=>`https://thingproxy.freeboard.io/fetch/${t}`,parseResponse:t=>t,headers:{}}],Ze=["https://query1.finance.yahoo.com","https://query2.finance.yahoo.com"];let Ct=0,Lt=0;const Ue=new Map,Aa=3e4,Da=(t,r="1d",a="1d",l=0)=>`${Ze[l%Ze.length]}/v8/finance/chart/${t}?interval=${r}&range=${a}`,Ea=(t,r="1d",a="1d",l=0,o=0)=>{const s=Da(t,r,a,o);return Ve[l%Ve.length].getUrl(s)},Xt="d18ueuhr01qkcat4uip0d18ueuhr01qkcat4uipg",$a=()=>{try{const t=localStorage.getItem("apiKeys");if(t){const r=JSON.parse(t);return{finnhub:r.finnhub||Xt,massive:r.massive||"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG"}}}catch(t){console.error("Error loading API keys from localStorage:",t)}return{finnhub:Xt,massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG"}},Ia=t=>{const a=$a().finnhub||"demo";return`https://finnhub.io/api/v1/quote?symbol=${t}&token=${a}`},Nr=t=>{const r=Ue.get(t);return r&&Date.now()-r.timestamp<Aa?r.data:(Ue.delete(t),null)},Sr=(t,r)=>{if(Ue.set(t,{data:r,timestamp:Date.now()}),Ue.size>100){const a=[...Ue.entries()].sort((l,o)=>l[1].timestamp-o[1].timestamp)[0];a&&Ue.delete(a[0])}},Ta=async(t,r,a,l,o=0)=>{const s=Ea(t,r,a,l,o),i=Ve[l%Ve.length],c=new AbortController,n=setTimeout(()=>c.abort(),8e3);try{const u={Accept:"application/json",...i.headers},x=await fetch(s,{method:"GET",headers:u,signal:c.signal,mode:"cors"});if(clearTimeout(n),!x.ok)throw new Error(`HTTP ${x.status}: ${x.statusText}`);const w=x.headers.get("content-type")||"";let f;if(w.includes("application/json"))f=await x.json();else{const P=await x.text();try{f=JSON.parse(P)}catch{throw new Error("Response is not JSON")}}return f.contents&&(f=typeof f.contents=="string"?JSON.parse(f.contents):f.contents),f=i.parseResponse(f),f}catch(u){throw clearTimeout(n),u}},Et=async(t,r="1d",a="1d")=>{const l=`yahoo_${t}_${r}_${a}`,o=Nr(l);if(o)return o;const s=Ve.length*Ze.length;for(let i=0;i<s;i++){const c=(Ct+Math.floor(i/Ze.length))%Ve.length,n=(Lt+i)%Ze.length;try{const u=await Ta(t,r,a,c,n);if(!u)throw new Error("Empty response from API");if(!u.chart)throw new Error("Invalid response: missing chart data");if(!u.chart.result||!Array.isArray(u.chart.result)||u.chart.result.length===0)throw new Error("Invalid response: no result data");if(!u.chart.result[0])throw new Error("Invalid response: empty result array");c!==Ct&&(Ct=c),n!==Lt&&(Lt=n);const x={data:u,source:"yahoo"};return Sr(l,x),x}catch{}}throw new Error(`Failed to fetch Yahoo Finance data for ${t}`)},$t=async t=>{const r=`finnhub_${t}`,a=Nr(r);if(a)return a;let l=t;t==="DX-Y.NYB"||t==="DXY"?l="EURUSD":(t==="^VIX"||t==="VIX")&&(l="SPY");try{const o=Ia(l),s=new AbortController,i=setTimeout(()=>s.abort(),8e3),c=await fetch(o,{method:"GET",headers:{Accept:"application/json"},signal:s.signal});if(clearTimeout(i),!c.ok)throw new Error(`Finnhub HTTP ${c.status}`);const n=await c.json();if(!n||n.error)throw new Error(n.error||"Empty response from Finnhub API");if(n.c===0&&n.h===0&&n.l===0)throw new Error("Invalid symbol or no data available");if(n.c===null||n.c===void 0)throw new Error("Invalid response: missing price data");const u={data:n,source:"finnhub"};return Sr(r,u),u}catch(o){throw new Error(`Finnhub failed for ${t}: ${o.message}`)}},Fa=()=>{try{const t=localStorage.getItem("preferredApi");if(t&&["yahoo","finnhub","massive","auto"].includes(t))return t}catch(t){console.error("Error loading preferred API:",t)}return"auto"},$e=async(t,r="1d",a="1d")=>{const l=Fa(),o=[];if(l==="yahoo")try{return await Et(t,r,a)}catch(s){o.push(`Yahoo: ${s.message}`)}else if(l==="finnhub")try{return await $t(t)}catch(s){o.push(`Finnhub: ${s.message}`)}try{return await $t(t)}catch(s){o.push(`Finnhub: ${s.message}`)}try{return await Et(t,r,a)}catch(s){o.push(`Yahoo: ${s.message}`)}throw new Error(`All APIs failed for ${t}`)},za=(t,r)=>{if(!r?.chart?.result?.[0])throw new Error("Invalid data format from Yahoo Finance");const a=r.chart.result[0],l=a.meta;a.indicators?.quote?.[0];const o=l.regularMarketPrice||l.previousClose||0,s=l.previousClose||o,i=o-s,c=s?i/s*100:0,n=l.marketState==="REGULAR",u=n?Math.floor(Math.random()*200)+50:0;let x="operational";return n?Math.abs(c)>5&&(x="degraded"):x="paused",{id:t,name:`${l.shortName||t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:x,isUp:n,responseTime:u,avgResponseTime:u,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!n,price:o,change:i,changePercent:c,volume:l.regularMarketVolume||0,marketState:l.marketState,symbol:t,apiSource:"yahoo"}},Ra=(t,r)=>{if(!r||r.c===null||r.c===void 0)throw new Error("Invalid data format from Finnhub");const a=r.c||0,l=r.pc||a,o=a-l,s=l?o/l*100:0,i=r.t&&r.t>0,c=i?Math.floor(Math.random()*200)+50:0;let n="operational";return i?Math.abs(s)>5&&(n="degraded"):n="paused",{id:t,name:`${t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:n,isUp:i,responseTime:c,avgResponseTime:c,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!i,price:a,change:o,changePercent:s,volume:r.v||0,marketState:i?"REGULAR":"CLOSED",symbol:t,apiSource:"finnhub"}},Ba=(t,r)=>{if(!r||r.c===null||r.c===void 0)throw new Error("Invalid data format from Massive");const a=r.c||0,l=r.pc||a,o=a-l,s=l?o/l*100:0,i=r.t&&r.t>0,c=i?Math.floor(Math.random()*200)+50:0;let n="operational";return i?Math.abs(s)>5&&(n="degraded"):n="paused",{id:t,name:`${t} (${t})`,url:`https://finance.yahoo.com/quote/${t}`,type:"http",status:n,isUp:i,responseTime:c,avgResponseTime:c,uptime:99.9,uptimePercent:99.9,lastCheck:new Date().toISOString(),paused:!i,price:a,change:o,changePercent:s,volume:r.v||0,marketState:i?"REGULAR":"CLOSED",symbol:t,apiSource:"massive"}},yt=(t,r)=>r.source==="finnhub"?Ra(t,r.data):r.source==="massive"?Ba(t,r.data):za(t,r.data),Cr=async()=>{try{let t=["AAPL","GOOGL","MSFT","TSLA","AMZN"];try{const s=localStorage.getItem("defaultSymbols");if(s){const i=JSON.parse(s);Array.isArray(i)&&i.length>0&&(t=i)}}catch(s){console.error("Error loading default symbols from localStorage:",s)}let r=[];try{const s=localStorage.getItem("deletedMonitors");s&&(r=JSON.parse(s))}catch(s){console.error("Error loading deleted monitors:",s)}const l=t.filter(s=>!r.includes(s)).map(s=>$e(s,"1d","1d").then(i=>yt(s,i)).catch(i=>(console.error(`Failed to fetch ${s}:`,i),{id:s,name:`${s}`,url:`https://finance.yahoo.com/quote/${s}`,type:"http",status:"down",isUp:!1,responseTime:0,avgResponseTime:0,uptime:0,uptimePercent:0,lastCheck:new Date().toISOString(),paused:!1,symbol:s,apiSource:"none"})));return(await Promise.all(l)).filter(s=>s!==null)}catch(t){return console.error("Failed to fetch monitors:",t),[]}},Lr=async t=>{try{let r=t.symbol;if(!r&&t.url&&(r=t.url.split("/").pop()?.toUpperCase().replace(/[^A-Z]/g,"")),!r)throw new Error("Stock symbol is required");r=r.toUpperCase().trim();try{let o=[];const s=localStorage.getItem("deletedMonitors");s&&(o=JSON.parse(s)),o=o.filter(i=>i!==r),localStorage.setItem("deletedMonitors",JSON.stringify(o))}catch(o){console.error("Error updating deleted monitors:",o)}const a=await $e(r,"1d","1d"),l=yt(r,a);t.name&&(l.name=t.name);try{let o=["AAPL","GOOGL","MSFT","TSLA","AMZN"];const s=localStorage.getItem("defaultSymbols");if(s){const i=JSON.parse(s);Array.isArray(i)&&i.length>0&&(o=i)}o.includes(r)||(o.push(r),localStorage.setItem("defaultSymbols",JSON.stringify(o)))}catch(o){console.error("Error saving default symbols:",o)}return l}catch(r){throw console.error("Failed to create monitor:",r),r}},Mr=async(t,r)=>{try{const a=r.symbol||t,l=await $e(a,"1d","1d");return yt(a,l)}catch(a){throw console.error("Failed to update monitor:",a),a}},It=async t=>{try{let r=["AAPL","GOOGL","MSFT","TSLA","AMZN"];try{const o=localStorage.getItem("defaultSymbols");if(o){const s=JSON.parse(o);Array.isArray(s)&&s.length>0&&(r=s)}}catch(o){console.error("Error loading default symbols:",o)}let a=[];try{const o=localStorage.getItem("deletedMonitors");o&&(a=JSON.parse(o))}catch(o){console.error("Error loading deleted monitors:",o)}a.includes(t)||(a.push(t),localStorage.setItem("deletedMonitors",JSON.stringify(a)));const l=r.filter(o=>o!==t);return localStorage.setItem("defaultSymbols",JSON.stringify(l)),{success:!0}}catch(r){throw console.error("Error deleting monitor:",r),r}},Tt=async t=>{const r=await $e(t,"1d","1d");return yt(t,r)},Rt=async t=>{try{const r=await $e(t,"1m","1d");if(r.source==="finnhub")return[];const a=r.data;if(!a?.chart?.result?.[0])throw new Error("Invalid data format");const l=a.chart.result[0],o=l.timestamp||[],i=l.indicators?.quote?.[0]?.close||[];return o.map((c,n)=>({time:new Date(c*1e3).toISOString(),timestamp:new Date(c*1e3).toISOString(),value:i[n]||0,responseTime:i[n]||0}))}catch(r){return console.error("Failed to fetch chart data:",r),[]}},Pr=async t=>Rt(t),Ar=async(t,r="response-time")=>r==="uptime"?Pr(t):Rt(t),Bt=async(t,r="1d")=>{try{let a="1d",l="1mo";r==="1H"||r==="1h"?(a="1h",l="1d"):(r==="1D"||r==="1d")&&(a="1d",l="1mo");const o=await $e(t,a,l);if(o.source==="finnhub"){const m=o.data;return{symbol:t,currentPrice:m.c||0,data:[{time:new Date().toISOString(),timestamp:Date.now(),open:m.o||m.c||0,high:m.h||m.c||0,low:m.l||m.c||0,close:m.c||0,volume:m.v||0}]}}const s=o.data;if(!s?.chart?.result?.[0])throw new Error("Invalid data format from API");const i=s.chart.result[0],c=i.timestamp||[],n=i.indicators?.quote?.[0];if(!n)throw new Error("No quote data available");const u=n.close||[],x=n.open||[],w=n.high||[],f=n.low||[],P=n.volume||[];if(c.length===0||u.length===0)throw new Error("No historical data available for this symbol");const S=i.meta,h=S?.regularMarketPrice||S?.previousClose||u[u.length-1]||0,k=[],j=Math.min(c.length,u.length);for(let m=0;m<j;m++){const H=c[m],B=u[m];H&&B!==null&&B!==void 0&&!isNaN(B)&&k.push({time:new Date(H*1e3).toISOString(),timestamp:H*1e3,open:x[m]!==null&&x[m]!==void 0?x[m]:B,high:w[m]!==null&&w[m]!==void 0?w[m]:B,low:f[m]!==null&&f[m]!==void 0?f[m]:B,close:B,volume:P[m]!==null&&P[m]!==void 0?P[m]:0})}if(k.length===0)throw new Error("No valid price data points found");return{symbol:t,currentPrice:h,data:k}}catch(a){throw console.error("Failed to fetch price chart data:",a),a}},Oa=Object.freeze(Object.defineProperty({__proto__:null,createMonitor:Lr,deleteMonitor:It,fetchFinnhub:$t,fetchMarketData:$e,fetchYahooFinance:Et,getMonitorChartData:Ar,getMonitorResponseTimeChart:Rt,getMonitorUptimeChart:Pr,getMonitors:Cr,getPriceChartData:Bt,togglePauseMonitor:Tt,updateMonitor:Mr},Symbol.toStringTag,{value:"Module"}));ut.register(ht,xt,gt,mt,Qr,pt,bt,ft,zt,Xr,ea);function Wa({chartType:t,candlestickData:r,chartData:a,symbol:l,currentInterval:o,lineChartOptions:s,candlestickChartOptions:i}){if(t==="candlestick")try{if(!r||!r.datasets||!r.datasets[0]||!r.datasets[0].data||r.datasets[0].data.length===0)throw new Error("Candlestick data not available");if(!r.datasets[0].data.every(n=>n&&typeof n=="object"&&"o"in n&&"h"in n&&"l"in n&&"c"in n&&!isNaN(Number(n.o))&&!isNaN(Number(n.h))&&!isNaN(Number(n.l))&&!isNaN(Number(n.c))))throw new Error("Invalid candlestick data structure");return e.jsx(ra,{type:"candlestick",data:r,options:i},`candlestick-${l}-${o}`)}catch(c){return console.error("Candlestick chart error:",c),a&&a.datasets&&a.datasets[0]?e.jsx(Qe,{data:a,options:s},`line-fallback-${l}-${o}`):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm",children:"Unable to display candlestick chart. Showing line chart instead."})})}return a&&a.datasets&&a.datasets[0]?e.jsx(Qe,{data:a,options:s},`line-${l}-${o}`):null}function Ha(){const[t,r]=d.useState("QQQ"),[a,l]=d.useState("1D"),[o,s]=d.useState(null),[i,c]=d.useState(null),[n,u]=d.useState(null),[x,w]=d.useState(!1),[f,P]=d.useState(null),[S,h]=d.useState(null),[k,j]=d.useState(null),[m,H]=d.useState([]),[B,K]=d.useState(!1),[T,_]=d.useState("line"),X=d.useRef(null),p=d.useRef(null),A=d.useRef(null),V=d.useRef(null),L=d.useRef(null),M=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){return O.parsed.y!==null&&O.parsed.y!==void 0?`${O.dataset.label}: $${O.parsed.y.toFixed(2)}`:""}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O!=null&&!isNaN(O)?"$"+O.toFixed(2):""},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),C=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){const U=O.parsed.y;return U>=1e6?`Volume: ${(U/1e6).toFixed(2)}M`:U>=1e3?`Volume: ${(U/1e3).toFixed(2)}K`:`Volume: ${U}`}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O>=1e6?(O/1e6).toFixed(1)+"M":O>=1e3?(O/1e3).toFixed(1)+"K":O},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),I=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(O){const U=O.raw;return U&&typeof U=="object"&&"o"in U&&"h"in U&&"l"in U&&"c"in U?[`Open: $${U.o.toFixed(2)}`,`High: $${U.h.toFixed(2)}`,`Low: $${U.l.toFixed(2)}`,`Close: $${U.c.toFixed(2)}`]:""}}}},scales:{x:{display:!0,grid:{display:!1},ticks:{maxTicksLimit:10,font:{size:11}}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(O){return O!=null&&!isNaN(O)?"$"+O.toFixed(2):""},font:{size:11}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}),W=d.useCallback(async()=>{if(!t||!t.trim()){P("Please enter a stock symbol");return}const O=o;w(!0),P(null);try{const U=new Promise((oe,ie)=>setTimeout(()=>ie(new Error("Request timeout. Please try again.")),2e4)),de=Bt(t.toUpperCase().trim(),a),ae=await Promise.race([de,U]);if(!ae)throw new Error("No data received from API");if(!ae.data||!Array.isArray(ae.data))throw new Error("Invalid data format: data.data is not an array");if(ae.data.length===0)throw new Error("No chart data available for this symbol");const Z=ae.data.filter(oe=>{if(!oe||!oe.timestamp)return!1;const ie=oe.close;return ie!=null&&!isNaN(ie)&&ie>0});if(Z.length===0)throw new Error("No valid price data available. All data points are invalid.");Z.sort((oe,ie)=>oe.timestamp-ie.timestamp);const y=Z.map(oe=>{try{const ie=new Date(oe.timestamp);return isNaN(ie.getTime())?"":a==="1H"?ie.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"}):ie.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"America/New_York"})}catch{return""}}).filter(oe=>oe!==""),v=Z.map(oe=>{const ie=Number(oe.close);return isNaN(ie)?null:ie}).filter(oe=>oe!==null),D=Z.map(oe=>{const ie=Number(oe.volume)||0;return isNaN(ie)?0:ie}),z=Math.min(y.length,v.length,D.length),ee=y.slice(0,z),Q=v.slice(0,z),ge=D.slice(0,z);if(Q.length===0)throw new Error("No valid price data to display after processing");const b=Q[0],R=Q[Q.length-1],Y=R-b,ve=b!==0?Y/b*100:0,Ie={labels:ee,datasets:[{label:`${t.toUpperCase()} Price`,data:Q,borderColor:Y>=0?"rgb(34, 197, 94)":"rgb(239, 68, 68)",backgroundColor:Y>=0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0,pointRadius:0,pointHoverRadius:4,borderWidth:2}],currentPrice:ae.currentPrice||R,change:Y,changePercent:ve},Be={labels:ee,datasets:[{label:"Volume",data:ge,backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},ye=Z.slice(0,z).map((oe,ie)=>{const Te=Number(oe.open)||Number(oe.close)||0,We=Number(oe.high)||Number(oe.close)||0,He=Number(oe.low)||Number(oe.close)||0,Le=Number(oe.close)||0;return{x:ie,o:Te,h:We,l:He,c:Le}}),Ae={labels:ee,datasets:[{label:`${t.toUpperCase()} Candlestick`,data:ye}]};A.current=Ie,V.current=Be,L.current=Ae,s(Ie),c(Be),u(Ae),j(a),h(new Date);const Oe=`${t.toUpperCase()}-${a}`;H(oe=>{const ie=oe.filter(We=>We!==Oe),Te=[Oe,...ie].slice(0,5);return localStorage.setItem("tradingRecentSearches",JSON.stringify(Te)),Te})}catch(U){const de=U.message||"Failed to load chart data. Please check the symbol and try again.";P(de),O||(s(null),c(null),u(null))}finally{w(!1)}},[t,a]);d.useEffect(()=>{const O=localStorage.getItem("tradingRecentSearches");if(O)try{H(JSON.parse(O))}catch{}},[]),d.useEffect(()=>{t==="QQQ"&&!o&&W()},[]),d.useEffect(()=>{T==="candlestick"&&(!n||!n.datasets||!n.datasets[0]||!n.datasets[0].data||n.datasets[0].data.length===0)&&(console.warn("Candlestick data not available, resetting to line chart"),_("line"))},[T,n]);const N=()=>{t&&t.trim()&&(W(),K(!1))},E=()=>{t&&t.trim()&&W()},F=O=>{O!==a&&(l(O),t&&t.trim()&&o&&setTimeout(()=>{W()},100))},se=O=>{const[U,de]=O.split("-");r(U),l(de),K(!1),setTimeout(()=>{W()},100)},he=O=>{O.key==="Enter"&&N()};return d.useEffect(()=>()=>{X.current&&clearInterval(X.current)},[]),e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Charts"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time stock market data and analysis"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stock Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:p,type:"text",id:"symbol",value:t,onChange:O=>{const U=O.target.value.toUpperCase();r(U),K(U.length===0&&m.length>0)},onKeyDown:he,onFocus:()=>{m.length>0&&!t&&K(!0)},onBlur:()=>{setTimeout(()=>K(!1),200)},placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),t&&e.jsx("button",{type:"button",onClick:()=>{r(""),K(!1),p.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),B&&m.length>0&&!x&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recent Searches"}),m.map(O=>{const[U,de]=O.split("-");return e.jsxs("button",{type:"button",onClick:()=>se(O),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:U}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:de})]},O)})]})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Interval"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>F("1D"),className:`px-6 py-2 rounded-md font-medium transition-all ${a==="1D"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Day"}),e.jsx("button",{type:"button",onClick:()=>F("1H"),className:`px-6 py-2 rounded-md font-medium transition-all ${a==="1H"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Hour"})]})]}),e.jsx("div",{className:"w-full lg:w-auto",children:e.jsx("button",{type:"button",onClick:N,disabled:x||!t||!t.trim(),className:"w-full lg:w-auto px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})})]}),f&&e.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:f}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check the symbol and try again"})]})]})}),(o||x)&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Current Price"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:x&&!o?e.jsx("span",{className:"text-gray-400",children:"Loading..."}):`$${o?.currentPrice?.toFixed(2)||"N/A"}`})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${!o||o.change>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsx("p",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Change"}),e.jsx("p",{className:`text-xl font-bold ${!o||o.change>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:x&&!o?e.jsx("span",{className:"text-gray-400",children:"--"}):o?`${o.change>=0?"+":""}$${o.change.toFixed(2)}`:"--"})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${!o||o.changePercent>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsx("p",{className:"text-xs font-medium mb-1 text-gray-600 dark:text-gray-400",children:"Change %"}),e.jsx("p",{className:`text-xl font-bold ${!o||o.changePercent>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:x&&!o?e.jsx("span",{className:"text-gray-400",children:"--"}):o?`${o.changePercent>=0?"+":""}${o.changePercent.toFixed(2)}%`:"--"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Interval"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k||"N/A"})]})]}),(S||o)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:S?`Last updated: ${S.toLocaleString("en-US",{timeZone:"America/New_York"})}`:"Ready to load data"})]}),o&&e.jsxs("button",{type:"button",onClick:E,disabled:x,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${x?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Price Chart"}),t&&k&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.toUpperCase()," - ",k," interval"]})]}),o&&e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>{try{_("line")}catch(O){console.error("Error switching to line chart:",O)}},className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${T==="line"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Line"}),e.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation();try{if(n&&n.datasets&&n.datasets[0]&&n.datasets[0].data&&n.datasets[0].data.length>0){const U=n.datasets[0].data[0];U&&"o"in U&&"h"in U&&"l"in U&&"c"in U?_("candlestick"):(console.warn("Candlestick data structure invalid, staying on line chart"),_("line"))}else console.warn("Candlestick data not available, staying on line chart"),_("line")}catch(U){console.error("Error switching to candlestick chart:",U),_("line")}},disabled:!n||!n.datasets||!n.datasets[0]||!n.datasets[0].data||n.datasets[0].data.length===0,className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${T==="candlestick"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Candlestick"})]})]}),e.jsx("div",{className:"h-[500px] relative",children:o&&o.labels&&o.labels.length>0&&o.datasets&&o.datasets[0]&&o.datasets[0].data&&o.datasets[0].data.length>0?e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-800/90 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx(Wa,{chartType:T,candlestickData:n,chartData:o,symbol:t,currentInterval:k,lineChartOptions:M.current,candlestickChartOptions:I.current})]}):x?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading chart data..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:"No chart data available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please try searching again or check the symbol"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trading Volume"}),t&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.toUpperCase()," trading volume over time"]})]}),e.jsx("div",{className:"h-[350px] relative",children:i&&i.labels&&i.labels.length>0?e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-800/80 z-10 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:e.jsx(ta,{data:i,options:C.current})})]}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No volume data available"})})})]})]})}const Ot="savedProjections",Wt=()=>{try{const t=localStorage.getItem(Ot);if(t)return JSON.parse(t)}catch(t){console.error("Error loading saved projections:",t)}return[]},Ua=t=>{try{const r=Wt(),a={id:Date.now().toString(),...t,savedAt:new Date().toISOString()};return r.push(a),localStorage.setItem(Ot,JSON.stringify(r)),a}catch(r){throw console.error("Error saving projection:",r),r}},er=t=>{try{const a=Wt().filter(l=>l.id!==t);return localStorage.setItem(Ot,JSON.stringify(a)),{success:!0}}catch(r){throw console.error("Error deleting projection:",r),r}};ut.register(ht,xt,gt,mt,pt,bt,ft,zt,pr);const Ee=[3,7,31,12,19,5,11,13,17,23,29,31],me=[11,13,17,29,31,47,59,61,97,101],Dr=72n,Va=1n<<Dr,tr=1n<<Dr-2n,Ft=8n,Er=256,Mt=12,rr=Math.PI*2,_a=[3,7,31,12,19,5,11,13,17,23,29,31],$r=["dub","kubt","k'anch","dub","kubt","k'anch"];function ar(t,r,a){t=(t%a+a)%a;let l=1n;for(;r>0n;)r&1n&&(l=l*t%a),t=t*t%a,r>>=1n;return l}function sr(t,r){const a=t*t,l=r*r;return(a-l)/(a+l)}function Ga(t){const r=me.indexOf(t);if(r===-1)return sr(t,t-2);const a=t,l=r>0?me[r-1]:2;return sr(a,l)}function Ya(t){return t==="dub"?3:t==="kubt"?5:t==="k'anch"||t==="k'anchay"?7:typeof t=="number"?Math.pow(3,t)%3:3}function Ja(t){const a=t/432;return{phase:Math.log(a)/Math.log(2)*(Math.PI/2),magnitude:Math.sqrt(a)}}function qa(t,r){return Array.isArray(r)?r[t%r.length]:r}function Ka(t,r,a,l,o=31){return is(t,t,a,l,typeof r=="number"?r:o,o)}function Za(t,r,a,l){const o=l.slice(0,3).reduce((u,x)=>u*x,1),s=Math.log(o)/Math.log(3),i=r/100,c=Math.pow(3,i),n=1+s/1e3;return t*c*n}function or(t,r){const a=Math.pow(10,r);return Math.floor(t*a)/a}function Qa({lastPrice:t,depthPrime:r,omegaHz:a=432,triad:l=[2,5,7],decimals:o=8,lambdaSchedule:s=$r,omegaSchedule:i=null,N:c=120}){const n=Ga(r),u=l.slice(0,3).reduce((P,S)=>P*S,1),x=Math.log(u)/Math.log(3);let w=1+.01*x+.001*(r%7);const f=[];for(let P=0;P<c;P++){const S=s[P%s.length],h=qa(P,i||a),k=Ka(P,n,S,h,r);w=Za(w,k,h,l);let j=0;for(let T=0;T<Mt;T++){const _=P*(rr/Mt)+T*rr/Mt,X=_a[T]%360*(Math.PI/180),A=Ya(S)%3*(Math.PI/360),{phase:V}=Ja(h),M=Math.floor(T/3)%2===0?1:-1,C=(P+T)%2===0?1:-1,I=_+X+A+.5*V,W=Math.cos(I),N=Math.tanh(w/1e5),E=W*M*C*n*(1+.5*N);j+=E}const m=Math.log(r)/Math.log(2),H=Math.max(1,x),B=or(j*m*.5*H,o),K=or(t+B,o);f.push({x:P,y:K})}return f}function Xa(t,r){Ir(r,!1);const[a,l,o]=r,i=ar(BigInt(l),BigInt(o),tr)+tr;return ar(BigInt(t),i,Va)}function es(t){const r=t>>Ft;return Number(r)/Number(1n<<64n)*2-1}function at(t){const r=t-1;let a=0;for(let l=0;l<Ee.length;l++){const o=r*(Math.PI*2/12)*Ee[l];a+=Math.cos(o)}return a/Ee.length}function Pt(t){return Math.trunc(t*Er)}function ts(t){return t/Er}const rs=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571];function as(t,r,a){if(!Ht(t))throw new Error(`Depth must be a prime number, got: ${t}. Prime exponentiation towers require prime-based depth.`);const l=a.indexOf(t);if(l===-1)throw new Error(`Depth prime ${t} not found in PRIMES_500. Prime exponentiation towers must use primes from the hardcoded list.`);const o=[],s=Math.floor(r/2);for(let i=-s;i<=s&&!(o.length>=r);i++){const c=Math.max(0,Math.min(a.length-3,l+i)),n=[a[c],a[c+1],a[c+2]];try{Ir(n,!1),o.push(n)}catch(u){throw console.error(`Invalid triadic set generated: ${JSON.stringify(n)}`,u),new Error(`Failed to generate valid triadic set: ${u.message}`)}}return o}function Ht(t){if(t<2)return!1;if(t===2)return!0;if(t%2===0)return!1;for(let r=3;r*r<=t;r+=2)if(t%r===0)return!1;return!0}const nr=[12,15];function Ir(t,r=!1){if(!Array.isArray(t)||t.length!==3)throw new Error(`Triadic set must be array of exactly 3 elements, got: ${JSON.stringify(t)}`);for(const a of t){if(!Number.isInteger(a)||a<2)throw new Error(`Triadic set values must be integers >= 2, got: ${JSON.stringify(t)}`);if(!Ht(a)&&!(r&&nr.includes(a)))throw new Error(`Triadic set contains non-prime value ${a} which is not an explicitly allowed coprime. Triadic sets for prime exponentiation towers must contain primes. Allowed coprimes (if explicitly chosen): ${nr.join(", ")}. Got: ${JSON.stringify(t)}`)}return!0}function ss(t){if(t<0||t>=Ee.length)return 0;let r=0;for(let a=0;a<=t;a++)Ht(Ee[a])&&r++;return r}function os(t,r){if(!r||r.length===0)return 1;const a=r.reduce((s,i)=>s+i,0)/r.length,l=r.reduce((s,i)=>s+Math.pow(i-a,2),0)/r.length,o=Math.log2(Math.max(1,l))+1;return Math.max(1,o*(t+1)/12)}function ns(t,r,a){const l=ss(r),o=os(r,a);return Math.log2(Math.max(1,l)/Math.max(1,o))}function ls(t){return t==="dub"?3:t==="kubt"?5:t==="k'anch"||t==="k'anchay"?7:typeof t=="number"?Math.pow(3,t)%3:3}function is(t,r,a,l,o,s=31){const i=(1+Math.sqrt(5))/2,c=Math.PI,n=r*c*i,u=t*2*c/12,x=ls(a),w=x>0?x:1,f=Math.log(w)/Math.log(3),S=(l||144e3)/432;let h=0;if(o&&typeof o=="object"&&o.p&&o.q)h=o.p*o.p-o.q*o.q;else if(typeof o=="number"){const k=me.indexOf(o),j=o,m=k>0?me[k-1]:2;h=j*j-m*m}else{const k=s||31,j=me.indexOf(k),m=k,H=j>0?me[j-1]:2;h=m*m-H*H}return n+u+f+S+h}function ds(t,r){if(r<0||r>=Ee.length)return 0;const a=Ee[r],l=(t-1)*2*Math.PI/12/Math.log(3),o=Math.pow(3,l),s=(t-1)*2*Math.PI/12*a;return o*Math.cos(s)}function cs(t,r,a,l,o=.01,s=31,i=432,c=!0,n=!1){if(t.length<2)return{lines:[]};const u=t[t.length-1],x=[];for(let w=0;w<l.length;w++){const f=l[w],P=Xa(a,f),S=es(P),h=n?i+w*96:i,k=8;try{const m=Qa({lastPrice:u,depthPrime:s,omegaHz:h,triad:f,decimals:k,lambdaSchedule:c?$r:["dub"],omegaSchedule:n?[432,528,432,528]:null,N:r}).map(T=>T.y),H=m.map(Pt);let B=0,K=0;for(let T=1;T<m.length;T++){const _=at(T),X=at(T-1);if((_>0&&X<=0||_<0&&X>=0)&&B++,T>1&&T<m.length-1){const p=m[T-1],A=m[T],V=m[T+1];(A>p&&A>V||A<p&&A<V)&&K++}}x.push({triad:f,base:a,aQ8:(P>>Ft).toString(),pointsQ8:H,points:m,zeroCrossings:B,turningPoints:K,omega:h,depthPrime:s})}catch(j){console.error(`Failed to compute crystalline projection for triad ${f}:`,j);let m=u;const H=[];let B=0,K=0;for(let T=1;T<=r;T++){const _=at(T),X=o*S*_;m=m*(1+X);const p=Pt(m);if(H.push(p),T>1){const A=at(T-1);(_>0&&A<=0||_<0&&A>=0)&&B++}}x.push({triad:f,base:a,aQ8:(P>>Ft).toString(),pointsQ8:H,points:H.map(ts),zeroCrossings:B,turningPoints:K})}}return{symbol:null,lastPriceQ8:Pt(u),beta:o,horizon:r,lines:x}}function At(t,r){if(t.length<2)return Array(r).fill(t[t.length-1]||0);const a=t.slice(-30),l=a.length;let o=0,s=0,i=0,c=0;a.forEach((w,f)=>{const P=f,S=w;o+=P,s+=S,i+=P*S,c+=P*P});const n=(l*i-o*s)/(l*c-o*o),u=(s-n*o)/l,x=[];for(let w=1;w<=r;w++){const f=u+n*(l+w-1);x.push(Math.max(0,f))}return x}function us(t){try{const r=`stabilizedModel_${t.toUpperCase()}`,a=localStorage.getItem(r);if(a)return JSON.parse(a)}catch(r){console.error("Error loading stabilized model:",r)}return null}function lr(t,r=.9){const a=[210,0,40,90,140,260,300,20,170,200,280,320,45];return`hsla(${a[t%a.length]}, 85%, 60%, ${r})`}function hs(){const t=ur(),[r,a]=d.useState(""),[l,o]=d.useState("1D"),[s,i]=d.useState(null),[c,n]=d.useState(!1),[u,x]=d.useState(null),[w,f]=d.useState(null),[P,S]=d.useState(null),[h,k]=d.useState(20),[j,m]=d.useState(48),[H,B]=d.useState([]),[K,T]=d.useState(!1),[_,X]=d.useState("primetetration"),[p,A]=d.useState(null),[V,L]=d.useState(!1),[M,C]=d.useState(null),[I,W]=d.useState(!1),[N,E]=d.useState(!1),[F,se]=d.useState(4),[he,O]=d.useState(me[4]||31),[U,de]=d.useState(3),[ae,Z]=d.useState(12),[y,v]=d.useState(null),[D,z]=d.useState(.01),[ee,Q]=d.useState(432),[ge,b]=d.useState(!1),[R,Y]=d.useState(!0),[ve,Ie]=d.useState(!1),[Be,ye]=d.useState(!1),[Ae,Oe]=d.useState(!1),[oe,ie]=d.useState(null),Te=d.useRef(null),We=d.useRef(null),He=d.useRef(null),Le=d.useRef(null),Fe=d.useRef(null),ze=d.useRef(null),_e=d.useRef({responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(g){return g.parsed.y!==null&&g.parsed.y!==void 0?`${g.dataset.label}: $${g.parsed.y.toFixed(2)}`:""}}},zoom:{zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0,mode:"xy",modifierKey:null,threshold:10},limits:{x:{min:"original",max:"original"},y:{min:"original",max:"original"}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{maxTicksLimit:20,font:{size:11},autoSkip:!0}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(g){return g!=null&&!isNaN(g)?"$"+g.toFixed(2):""},font:{size:11}},min:void 0,max:void 0}}}),pe=d.useCallback(async()=>{if(!r||!r.trim()){x("Please enter a stock symbol");return}const g=s;n(!0),x(null);try{const te=new Promise(($,G)=>setTimeout(()=>G(new Error("Request timeout. Please try again.")),2e4)),q=Bt(r.toUpperCase().trim(),l),ce=await Promise.race([q,te]);if(!ce)throw new Error("No data received from API");if(!ce.data||!Array.isArray(ce.data))throw new Error("Invalid data format: data.data is not an array");if(ce.data.length===0)throw new Error("No chart data available for this symbol");const xe=ce.data.filter($=>{if(!$||!$.timestamp)return!1;const G=$.close;return G!=null&&!isNaN(G)&&G>0});if(xe.length===0)throw new Error("No valid price data available. All data points are invalid.");xe.sort(($,G)=>$.timestamp-G.timestamp);const be=xe.map($=>Number($.close));He.current=be;const Ge=xe.map($=>{try{const G=new Date($.timestamp);return isNaN(G.getTime())?"":l==="1H"?G.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZone:"America/New_York"}):G.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"America/New_York"})}catch{return""}}).filter($=>$!==""),Wr=us(r.toUpperCase().trim());let ne=[],Ms=Wr,le=h;_==="primetetration"&&j&&(l==="1H"?le=j:l==="1D"||l==="1d"?le=Math.ceil(j/24):le=h),le=Math.max(1,Math.min(1e3,le||h||20));const Ne=be[be.length-1];if(_==="primetetration")try{const $=me[F]||31,G=as($,ae,rs),J=cs(be,le,U,G,D,$,ee,R,ge);if(J.symbol=r.toUpperCase().trim(),v(J),J.lines&&J.lines.length>0&&J.lines[0].points){if(ne=J.lines[0].points,ne.length!==le)if(console.warn(`Projected prices length (${ne.length}) doesn't match stepsToUse (${le})`),ne.length<le){const ue=ne[ne.length-1]||Ne;for(;ne.length<le;)ne.push(ue)}else ne=ne.slice(0,le)}else ne=At(be,le)}catch($){console.error("Prime Tetration projection failed, falling back to simple:",$),ne=At(be,le),v(null)}else ne=At(be,le);if(_!=="primetetration"&&v(null),!Array.isArray(ne)||ne.length===0)ne=Array(le).fill(Ne);else if(ne.length!==le)if(console.warn(`Final projectedPrices length (${ne.length}) doesn't match stepsToUse (${le}), adjusting...`),ne.length<le){const $=ne[ne.length-1]||Ne;for(;ne.length<le;)ne.push($)}else ne=ne.slice(0,le);const Ps=Array.from({length:12},($,G)=>ns(be.length,G,be)).reduce(($,G)=>$+G,0)/12,As=Array.from({length:12},($,G)=>Math.abs(ds(be.length,G))).reduce(($,G)=>$+G,0)/12;A(_==="primetetration"&&y?{depthPrime:me[F]||31,base:U,projectionCount:ae,beta:D,horizon:le,phi:Ee,lines:y.lines?y.lines.length:0}:null);const kt=[];for(let $=1;$<=le;$++)kt.push(`Step ${$}`);const Ye=Array.isArray(Ge)?Ge:[],Je=Array.isArray(kt)?kt:[],re=Array.isArray(be)?be:[],ke=Array.isArray(ne)?ne:[];if(Ye.length!==re.length){console.warn("Historical labels and prices length mismatch:",Ye.length,re.length);const $=Math.min(Ye.length,re.length);Ye.splice($),re.splice($)}if(Je.length!==ke.length){console.warn("Projected labels and prices length mismatch:",Je.length,ke.length);const $=Math.min(Je.length,ke.length);Je.splice($),ke.splice($)}const je=[...Ye,...Je],Se=[...re,...ke];if(je.length!==Se.length){console.warn("Labels and prices length mismatch:",je.length,Se.length);const $=Math.min(je.length,Se.length);je.splice($),Se.splice($)}const jt=re[0]||0,_t=ke.length>0?ke[ke.length-1]:Ne,Gt=Ne-jt,Hr=jt!==0?Gt/jt*100:0,Yt=_t-Ne;let Xe=0;Ne!==0&&Ne>0&&(Xe=Yt/Ne*100,Xe=Math.max(-1e3,Math.min(1e3,Xe)));const Ur=Math.max(0,_t);if(ke.length>0&&re.length>0){const $=re[re.length-1],G=ke[0];Math.abs(G-$)/$>.02&&(ke[0]=$+(G-$)*.3,Se[re.length]=ke[0])}const Ce=je.map(($,G)=>{if(G<re.length){const J=Se[G];return J!=null&&!isNaN(J)&&J>0?Number(J):null}if(G===re.length&&re.length>0){const J=re[re.length-1],ue=Se[G];return ue!=null&&!isNaN(ue)&&ue>0?J*.8+Number(ue)*.2:J}return null}),fe=je.map(($,G)=>{if(G<re.length)return null;if(G===re.length&&re.length>0){const J=re[re.length-1],ue=Se[G];return ue!=null&&!isNaN(ue)&&ue>0?J*.8+Number(ue)*.2:J}if(G<Se.length){const J=Se[G];return J!=null&&!isNaN(J)&&J>0?Number(J):null}return null}),Jt=Ce.some($=>$!=null),qt=fe.some($=>$!=null);if(!Jt&&!qt)throw new Error("No valid chart data available. All data points are null or invalid.");const Pe=re.length,Vr=Ce[Pe]||fe[Pe];console.log("Chart Data Debug:",{labelsLength:je.length,pricesLength:Se.length,historicalLength:re.length,projectedLength:ke.length,historicalDataPoints:Ce.filter($=>$!=null).length,projectedDataPoints:fe.filter($=>$!=null).length,firstHistorical:Ce[0],lastHistorical:Ce[re.length-1],connectionIndex:Pe,connectionPrice:Vr,firstProjected:fe[Pe],secondProjected:fe[Pe+1],lastProjected:fe[fe.length-1],hasHistoricalData:Jt,hasProjectedData:qt,sampleHistorical:Ce.slice(Math.max(0,re.length-5),re.length+1),sampleProjected:fe.slice(Pe,Pe+5),projectedOscillations:fe.slice(Pe,Pe+10).filter($=>$!==null).map(($,G,J)=>G===0?0:J[G]-J[G-1])});const _r=Ce.filter($=>$!=null&&!isNaN($)).length,Gr=fe.filter($=>$!=null&&!isNaN($)).length;if(_r===0&&Gr===0)throw new Error("No valid data points available for chart. All values are null or invalid.");for(;Ce.length<je.length;)Ce.push(null);for(;fe.length<je.length;)fe.push(null);const vt=[{label:`${r.toUpperCase()} Historical`,data:Ce.slice(0,je.length),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!1,pointRadius:2,pointHoverRadius:6,borderWidth:2,spanGaps:!1,showLine:!0,stepped:!1}];_==="primetetration"&&y&&y.lines&&y.lines.length>0?y.lines.forEach(($,G)=>{let J=$.points||[];if(J.length!==le)if(console.warn(`Line ${G} points length (${J.length}) doesn't match stepsToUse (${le})`),J.length<le){const et=J[J.length-1]||Ne;for(;J.length<le;)J.push(et)}else J=J.slice(0,le);const ue=je.map((et,Zt)=>{if(Zt<re.length)return null;const tt=Zt-re.length;if(tt>=0&&tt<J.length){if(tt===0&&re.length>0)return re[re.length-1]*.8+J[0]*.2;const qe=J[tt];return qe!=null&&!isNaN(qe)&&qe>0?Number(qe):null}return null});vt.push({label:`Triad [${$.triad.join("-")}]`,data:ue,borderColor:lr(G,.9),backgroundColor:lr(G,.18),fill:!1,borderWidth:2,pointRadius:0,tension:.4,spanGaps:!1,showLine:!0,stepped:!1})}):vt.push({label:`${r.toUpperCase()} Projected (Prime Tetration)`,data:fe.slice(0,je.length),borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",borderDash:[5,5],tension:.4,fill:!1,pointRadius:2,pointHoverRadius:6,borderWidth:2,spanGaps:!1,showLine:!0,stepped:!1});const Me={labels:je,datasets:vt,currentPrice:ce.currentPrice||Ne,change:Gt,changePercent:Hr,projectedPrice:Ur,projectedChange:Yt,projectedChangePercent:Xe};console.log("Final Chart Data:",{labelsCount:Me.labels.length,datasetsCount:Me.datasets.length,historicalDataCount:Me.datasets[0].data.length,projectedDataCount:Me.datasets[1].data.length,historicalValid:Me.datasets[0].data.filter($=>$!==null).length,projectedValid:Me.datasets[1].data.filter($=>$!==null).length,firstFewHistorical:Me.datasets[0].data.slice(0,5),firstFewProjected:Me.datasets[1].data.slice(re.length,re.length+5)});const wt=[...Ce,...fe].filter($=>$!=null&&!isNaN($)&&typeof $=="number"&&$>0);if(wt.length>0){const $=Math.min(...wt),G=Math.max(...wt),J=G-$,ue=Math.max(J*.05,$*.01);Fe.current=Math.max(0,$-ue),ze.current=G+ue,_e.current.scales.y.min=Fe.current,_e.current.scales.y.max=ze.current}We.current=Me,i(Me),S(l),f(new Date);const Kt=`${r.toUpperCase()}-${l}`;B($=>{const G=$.filter(ue=>ue!==Kt),J=[Kt,...G].slice(0,5);return localStorage.setItem("projectionRecentSearches",JSON.stringify(J)),J})}catch(te){const q=te.message||"Failed to load chart data. Please check the symbol and try again.";x(q),g||i(null)}finally{n(!1)}},[r,l,h,_,F,U,ae,D]);d.useEffect(()=>{if(t.state?.loadProjection){const g=t.state.loadProjection;if(Oe(!0),ie(g.id||null),a(g.symbol||""),o(g.interval||"1D"),X(g.projectionModel||"primetetration"),k(g.projectionSteps||20),m(g.projectionHours||48),g.projectionModel==="primetetration"){de(g.base||3),Z(g.projectionCount||12);const te=g.primeDepthIndex!==void 0?g.primeDepthIndex:4;se(te),O(me[te]||31),Q(g.omegaHz||432),Y(g.useLambdaSchedule!==void 0?g.useLambdaSchedule:!0),b(g.useOmegaSchedule||!1)}if(g.chartData&&(g.chartData.historicalPrices&&Array.isArray(g.chartData.historicalPrices)&&(He.current=g.chartData.historicalPrices),g.chartData.labels&&g.chartData.datasets)){const te={labels:g.chartData.labels||[],datasets:(g.chartData.datasets||[]).map(ce=>({...ce,data:Array.isArray(ce.data)?ce.data.map(xe=>xe!=null?Number(xe):null):[]})),currentPrice:g.chartData.currentPrice!==void 0?Number(g.chartData.currentPrice):null,change:g.chartData.change!==void 0?Number(g.chartData.change):null,changePercent:g.chartData.changePercent!==void 0?Number(g.chartData.changePercent):null,projectedPrice:g.chartData.projectedPrice!==void 0?Number(g.chartData.projectedPrice):null,projectedChange:g.chartData.projectedChange!==void 0?Number(g.chartData.projectedChange):null,projectedChangePercent:g.chartData.projectedChangePercent!==void 0?Number(g.chartData.projectedChangePercent):null},q=te.datasets.flatMap(ce=>(ce.data||[]).filter(xe=>xe!=null&&!isNaN(xe)&&typeof xe=="number"&&xe>0));if(q.length>0){const ce=Math.min(...q),xe=Math.max(...q),be=xe-ce,Ge=Math.max(be*.05,ce*.01);Fe.current=Math.max(0,ce-Ge),ze.current=xe+Ge,_e.current.scales.y.min=Fe.current,_e.current.scales.y.max=ze.current}i(te),We.current=te}g.snapshotData&&g.projectionModel==="primetetration"&&v(g.snapshotData),window.history.replaceState({},document.title),setTimeout(()=>{Oe(!1)},5e3)}},[t.state]),d.useEffect(()=>{const g=localStorage.getItem("projectionRecentSearches");if(g)try{B(JSON.parse(g))}catch{}},[]);const Ut=()=>{r?.trim()?(T(!1),pe()):x("Please enter a stock symbol")},Fr=()=>{r&&r.trim()&&pe()},zr=()=>{if(!r||!r.trim()){x("Please enter a stock symbol first");return}if(!s&&!y){x("No projection data to save. Please load chart data first.");return}Ie(!0),ye(!1);try{const g={symbol:r.toUpperCase().trim(),projectionModel:_,interval:l,projectionSteps:h,projectionHours:j,base:U,projectionCount:ae,primeDepth:me[F]||31,primeDepthIndex:F,omegaHz:ee,useLambdaSchedule:R,useOmegaSchedule:ge,beta:D,snapshotData:y?JSON.parse(JSON.stringify(y)):null,chartData:s?JSON.parse(JSON.stringify({labels:s.labels||[],datasets:s.datasets?s.datasets.map(q=>({label:q.label||"",data:Array.isArray(q.data)?q.data.map(ce=>ce!=null?Number(ce):null):[],borderColor:q.borderColor||"rgb(59, 130, 246)",backgroundColor:q.backgroundColor||"rgba(59, 130, 246, 0.1)",borderWidth:q.borderWidth||2,borderDash:q.borderDash||void 0,tension:q.tension!==void 0?q.tension:.4,fill:q.fill!==void 0?q.fill:!1,pointRadius:q.pointRadius!==void 0?q.pointRadius:2,pointHoverRadius:q.pointHoverRadius!==void 0?q.pointHoverRadius:6,spanGaps:q.spanGaps!==void 0?q.spanGaps:!1,showLine:q.showLine!==void 0?q.showLine:!0,stepped:q.stepped!==void 0?q.stepped:!1})):[],currentPrice:s.currentPrice!==void 0?Number(s.currentPrice):null,change:s.change!==void 0?Number(s.change):null,changePercent:s.changePercent!==void 0?Number(s.changePercent):null,projectedPrice:s.projectedPrice!==void 0?Number(s.projectedPrice):null,projectedChange:s.projectedChange!==void 0?Number(s.projectedChange):null,projectedChangePercent:s.projectedChangePercent!==void 0?Number(s.projectedChangePercent):null,historicalPrices:He.current?He.current.map(q=>Number(q)):[]})):null,savedAt:new Date().toISOString()};Ua(g),ye(!0),setTimeout(()=>ye(!1),3e3)}catch(g){console.error("Error saving projection:",g),x("Failed to save projection: "+g.message)}finally{Ie(!1)}},Vt=g=>{g!==l&&(o(g),r&&r.trim()&&s&&setTimeout(()=>{pe()},100))},Rr=g=>{const[te,q]=g.split("-");a(te),o(q),T(!1),setTimeout(()=>{pe()},100)},Br=g=>{g.key==="Enter"&&Ut()},Or=()=>{if(Le.current){let g=null;Le.current.chartInstance?g=Le.current.chartInstance:Le.current.chart?g=Le.current.chart:Le.current&&(g=Le.current),g&&(typeof g.resetZoom=="function"&&g.resetZoom(),Fe.current!==null&&ze.current!==null&&(g.scales&&g.scales.y?(g.scales.y.options.min=Fe.current,g.scales.y.options.max=ze.current,g.update("none")):g.options&&g.options.scales&&g.options.scales.y&&(g.options.scales.y.min=Fe.current,g.options.scales.y.max=ze.current,g.update("none"))))}};return d.useEffect(()=>()=>{},[]),e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Price Projection"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Prime Tetration Projections"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Stock Symbol"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:Te,type:"text",id:"symbol",value:r,onChange:g=>{const te=g.target.value.toUpperCase();a(te),T(te.length===0&&H.length>0)},onKeyDown:Br,onFocus:()=>{H.length>0&&!r&&T(!0)},onBlur:()=>{setTimeout(()=>T(!1),200)},placeholder:"Enter symbol (e.g., AAPL, TSLA, MSFT)",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),r&&e.jsx("button",{type:"button",onClick:()=>{a(""),T(!1),Te.current?.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),K&&H.length>0&&!c&&e.jsxs("div",{className:"absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",style:{zIndex:10},children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-600",children:"Recent Searches"}),H.map(g=>{const[te,q]=g.split("-");return e.jsxs("button",{type:"button",onClick:()=>Rr(g),className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:te}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:q})]},g)})]})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Interval"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>Vt("1D"),className:`px-6 py-2 rounded-md font-medium transition-all ${l==="1D"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Day"}),e.jsx("button",{type:"button",onClick:()=>Vt("1H"),className:`px-6 py-2 rounded-md font-medium transition-all ${l==="1H"?"bg-blue-600 text-white shadow-md":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"1 Hour"})]})]}),e.jsxs("div",{className:"w-full lg:w-auto",children:[e.jsx("label",{htmlFor:"projectionSteps",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Projection Steps"}),e.jsxs("select",{id:"projectionSteps",value:h,onChange:g=>{const te=parseInt(g.target.value);k(te),s&&setTimeout(()=>pe(),100)},className:"w-full lg:w-32 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",children:[e.jsx("option",{value:10,children:"10 Steps"}),e.jsx("option",{value:20,children:"20 Steps"}),e.jsx("option",{value:40,children:"40 Steps"}),e.jsx("option",{value:60,children:"60 Steps"})]})]}),e.jsx("div",{className:"w-full lg:w-auto",children:e.jsx("button",{type:"button",onClick:g=>{g.preventDefault(),g.stopPropagation(),Ut()},disabled:c||!r||!r.trim(),className:"w-full lg:w-auto px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 relative z-0",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"})]})})})]}),e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Projection Model Configuration"]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Configure your projection parameters"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Projection Model"}),e.jsx("div",{className:"w-full px-4 py-3 border-2 border-purple-500 dark:border-purple-400 rounded-lg bg-purple-50 dark:bg-purple-900/20 transition-all text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Prime Tetration Projections"})]})})]}),_==="primetetration"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Core Parameters"]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h5",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Seed, Frequency & Schedules"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Base (seed)"}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U===3,onChange:()=>{de(U===3?2:3),s&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:U===3?"3 (preferred)":"2 (Enigma-style)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Î© (Omega Hz)"}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ee===528,onChange:()=>{Q(ee===432?528:432),s&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),e.jsxs("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:[ee," Hz"]})]})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("label",{className:"inline-flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:g=>{Y(g.target.checked),s&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:"Use Î» Schedule (dub, kubt, k'anch)"})]}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:ge,onChange:g=>{b(g.target.checked),s&&setTimeout(()=>pe(),100)},className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"Use Î© Schedule (vary frequencies)"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"projectionCount",className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Projections Count"}),e.jsx("input",{type:"number",id:"projectionCount",min:"1",max:"50",step:"1",value:ae,onChange:g=>{const te=g.target.value;if(te==="")return;const q=parseInt(te,10);!isNaN(q)&&q>=1&&q<=50&&(Z(q),s&&setTimeout(()=>pe(),100))},onBlur:g=>{const te=g.target.value;if(te===""||isNaN(parseInt(te,10)))Z(12),s&&setTimeout(()=>pe(),100);else{const q=parseInt(te,10);q<1?(Z(1),s&&setTimeout(()=>pe(),100)):q>50&&(Z(50),s&&setTimeout(()=>pe(),100))}},className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white transition-all text-sm font-medium bg-white",placeholder:"Enter number (1-50)"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Range: 1-50 projections"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Prime Depth"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:me.map(g=>{const te=me[F]===g;return e.jsx("button",{type:"button",onClick:()=>{const q=me.indexOf(g);se(q),O(g),s&&setTimeout(()=>pe(),100)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${te?"bg-purple-600 text-white shadow-md ring-2 ring-purple-400 dark:ring-purple-500":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-300 dark:border-gray-600 hover:border-purple-400 dark:hover:border-purple-500 hover:text-purple-600 dark:hover:text-purple-400"}`,children:g},g)})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Selected: ",me[F]||31]})]})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Be?e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Projection saved successfully!"]}):"Save this projection configuration to view it later on the Data page"})}),e.jsx("button",{onClick:zr,disabled:ve||!r||!r.trim()||!s&&!y,className:"px-6 py-2.5 bg-gradient-to-r from-green-600 to-green-700 text-white text-sm font-semibold rounded-lg hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed disabled:opacity-50 shadow-md hover:shadow-lg transition-all flex items-center gap-2",title:!r||!r.trim()?"Enter a stock symbol first":!s&&!y?"Load chart data first":"Save projection to Data page",children:ve?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),e.jsx("span",{children:"Save Projection"})]})})]})]})]}),Ae&&e.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Projection loaded successfully! You can now edit the parameters and save changes."}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 mt-1",children:'All saved data has been restored. Modify any settings and click "Save Projection" to update.'})]}),e.jsx("button",{onClick:()=>Oe(!1),className:"ml-2 text-green-500 hover:text-green-700 dark:hover:text-green-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),u&&e.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:u}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check the symbol and try again"})]})]})}),s&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Price Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-5 border border-blue-200 dark:border-blue-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Current Price"}),e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:s?.currentPrice!==void 0&&s.currentPrice!==null?`$${s.currentPrice.toFixed(2)}`:e.jsx("span",{className:"text-gray-400",children:"N/A"})})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${s&&s.change>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Historical Change"}),s&&e.jsx("svg",{className:`w-4 h-4 ${s.change>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.change>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${s.change>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:s?.change!==void 0&&s.change!==null?`${s.change>=0?"+":""}$${Math.abs(s.change).toFixed(2)}`:e.jsx("span",{className:"text-gray-400",children:"--"})}),s?.changePercent!==void 0&&s.changePercent!==null&&e.jsxs("p",{className:`text-xs mt-1 ${s.changePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[s.changePercent>=0?"+":"",s.changePercent.toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-5 border border-purple-200 dark:border-purple-800 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Projected Price"}),e.jsx("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:s?.projectedPrice!==void 0&&s.projectedPrice!==null&&s.projectedPrice>0?(()=>{const g=s.projectedPrice;return g>=1e3?`$${g.toFixed(2)}`:g>=1?`$${g.toFixed(2)}`:`$${g.toFixed(4)}`})():e.jsx("span",{className:"text-gray-400",children:"N/A"})})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${s&&s.projectedChange>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Projected Change"}),s&&e.jsx("svg",{className:`w-4 h-4 ${s.projectedChange>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.projectedChange>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${s.projectedChange>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:s?.projectedChange!==void 0&&s.projectedChange!==null?(()=>{const g=s.projectedChange;return Math.abs(g)>=1e3?`${g>=0?"+":""}$${Math.abs(g).toFixed(2)}`:Math.abs(g)>=1?`${g>=0?"+":""}$${Math.abs(g).toFixed(2)}`:`${g>=0?"+":""}$${Math.abs(g).toFixed(4)}`})():e.jsx("span",{className:"text-gray-400",children:"--"})}),s?.projectedChangePercent!==void 0&&s.projectedChangePercent!==null&&e.jsx("p",{className:`text-xs mt-1 ${s.projectedChangePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:(()=>{const g=s.projectedChangePercent;return Math.abs(g)>=1e3?`${g>=0?"+":""}${g.toFixed(0)}%`:Math.abs(g)>=100?`${g>=0?"+":""}${g.toFixed(1)}%`:`${g>=0?"+":""}${g.toFixed(2)}%`})()})]}),e.jsxs("div",{className:`rounded-xl p-5 border shadow-sm ${s&&s.projectedChangePercent>=0?"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-800":"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-800"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:"Change %"}),s&&e.jsx("svg",{className:`w-4 h-4 ${s.projectedChangePercent>=0?"text-green-500":"text-red-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.projectedChangePercent>=0?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})]}),e.jsx("p",{className:`text-xl font-bold ${s.projectedChangePercent>=0?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:s?.projectedChangePercent!==void 0&&s.projectedChangePercent!==null?(()=>{const g=s.projectedChangePercent;return Math.abs(g)>=1e3?`${g>=0?"+":""}${g.toFixed(0)}%`:Math.abs(g)>=100?`${g>=0?"+":""}${g.toFixed(1)}%`:`${g>=0?"+":""}${g.toFixed(2)}%`})():e.jsx("span",{className:"text-gray-400",children:"--"})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Projected"})]})]})]}),p&&e.jsxs("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>E(!N),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Prime Tetration Parameters"})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${N?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),N&&e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/30",children:e.jsx("div",{className:"flex flex-col gap-4",children:_==="primetetration"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Depth Prime:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.depthPrime})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Base:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.base})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Lines:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.lines})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Beta:"}),e.jsx("span",{className:"font-mono font-semibold text-gray-900 dark:text-white",children:p.beta})]})]}),p.phi&&Array.isArray(p.phi)&&e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Full Ï_d: [3,7,31,12,19,5,11,13,17,23,29,31]"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"+8 bits truncation active"})]})}),y&&y.lines&&y.lines.length>0&&e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Oscillation Stats:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.lines.slice(0,6).map((g,te)=>e.jsxs("div",{className:"text-xs font-mono text-gray-900 dark:text-white bg-purple-100 dark:bg-purple-900/30 px-3 py-2 rounded flex flex-col gap-1",children:[e.jsxs("span",{className:"font-semibold",children:["L",te+1,"[",g.triad.join("-"),"]"]}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["zc=",g.zeroCrossings,", tp=",g.turningPoints]})]},te))})]})})]}):null})})]}),(w||s)&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:w?`Last updated: ${w.toLocaleString("en-US",{timeZone:"America/New_York"})}`:"Ready to load data"})]}),s&&e.jsxs("button",{type:"button",onClick:Fr,disabled:c,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:text-gray-400 transition-colors",children:[e.jsx("svg",{className:`w-4 h-4 ${c?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Refresh"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Price Projection Chart"}),r&&P&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[r.toUpperCase()," - ",P," interval - ",h," step projection"]})]}),s&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Historical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500 border-2 border-dashed border-purple-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Projected"})]})]}),e.jsxs("button",{type:"button",onClick:Or,className:"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"Reset zoom and pan",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Zoom"]})]})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>L(!V),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"About Prime Tetration Projections"})]}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform ${V?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),V&&e.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:"Prime Tetration Projections use the full crystalline 12-dimensional lattice with triadic prime exponentiation towers. Each projection line represents a different prime triad [p1,p2,p3] with amplitude A = base^(p2^p3) mod 2^72. The lattice oscillator Z(n) aggregates all 12 Ï_d dimensions without dimension sweeping. All calculations use Q8 fixed-point truncation (+8 guard bits)."})})]})]}),e.jsx("div",{className:"h-[600px] relative",children:s&&Array.isArray(s.labels)&&s.labels.length>0&&Array.isArray(s.datasets)&&s.datasets.length>0&&s.datasets[0]&&Array.isArray(s.datasets[0].data)&&s.datasets[0].data.some(g=>g!=null)?e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-800/90 z-10 flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto"})})}),e.jsx(Qe,{ref:Le,data:{labels:Array.isArray(s.labels)?s.labels:[],datasets:Array.isArray(s.datasets)?s.datasets.map(g=>({...g,data:Array.isArray(g.data)?g.data:[]})):[]},options:{..._e.current,responsive:!0,maintainAspectRatio:!1},redraw:!0},`chart-${r}-${l}-${h}-${s.labels?.length||0}`)]}):c?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading chart data..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:"Please wait"})]})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mb-2",children:"No chart data available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Please try searching again or check the symbol"})]})})})]})]})}ut.register(ht,xt,gt,mt,pt,bt,ft,zt,pr);const ir=[{name:"Blue",bg:"from-blue-50 to-blue-100",border:"border-blue-200",dark:"dark:from-blue-900/20 dark:to-blue-800/20 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{name:"Green",bg:"from-green-50 to-green-100",border:"border-green-200",dark:"dark:from-green-900/20 dark:to-green-800/20 dark:border-green-800",text:"text-green-700 dark:text-green-300"},{name:"Purple",bg:"from-purple-50 to-purple-100",border:"border-purple-200",dark:"dark:from-purple-900/20 dark:to-purple-800/20 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{name:"Yellow",bg:"from-yellow-50 to-yellow-100",border:"border-yellow-200",dark:"dark:from-yellow-900/20 dark:to-yellow-800/20 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300"},{name:"Pink",bg:"from-pink-50 to-pink-100",border:"border-pink-200",dark:"dark:from-pink-900/20 dark:to-pink-800/20 dark:border-pink-800",text:"text-pink-700 dark:text-pink-300"},{name:"Indigo",bg:"from-indigo-50 to-indigo-100",border:"border-indigo-200",dark:"dark:from-indigo-900/20 dark:to-indigo-800/20 dark:border-indigo-800",text:"text-indigo-700 dark:text-indigo-300"}];function xs(){const[t,r]=d.useState([]),[a,l]=d.useState(null),[o,s]=d.useState(!1),[i,c]=d.useState(!1),[n,u]=d.useState(null),[x,w]=d.useState(!0),[f,P]=d.useState(null),[S,h]=d.useState(""),[k,j]=d.useState("date"),[m,H]=d.useState("all"),[B,K]=d.useState("grid"),[T,_]=d.useState([]),[X,p]=d.useState(!0),A=aa(),V={responsive:!0,maintainAspectRatio:!1,animation:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(y){return y.parsed.y!==null&&y.parsed.y!==void 0?`${y.dataset.label}: $${y.parsed.y.toFixed(2)}`:""}}},zoom:{zoom:{wheel:{enabled:!0,speed:.1},pinch:{enabled:!0},mode:"xy"},pan:{enabled:!0,mode:"xy",modifierKey:null},limits:{x:{min:"original",max:"original"},y:{min:"original",max:"original"}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(0, 0, 0, 0.05)"},ticks:{maxTicksLimit:20,font:{size:11},autoSkip:!0}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{callback:function(y){return y!=null&&!isNaN(y)?"$"+y.toFixed(2):""},font:{size:11}}}}};d.useEffect(()=>{L()},[]);const L=()=>{try{w(!0),P(null);const y=Wt();r(y||[])}catch(y){console.error("Error loading projections:",y),P("Failed to load projections")}finally{w(!1)}},M=d.useMemo(()=>{const y=new Set;return t.forEach(v=>{v.projectionModel&&y.add(v.projectionModel)}),Array.from(y).sort()},[t]),C=d.useMemo(()=>{let y=[...t];if(S){const v=S.toLowerCase();y=y.filter(D=>D.symbol?.toLowerCase().includes(v)||D.projectionModel?.toLowerCase().includes(v)||D.interval?.toLowerCase().includes(v))}return m!=="all"&&(y=y.filter(v=>v.projectionModel===m)),y.sort((v,D)=>{switch(k){case"symbol":return(v.symbol||"").localeCompare(D.symbol||"");case"model":return(v.projectionModel||"").localeCompare(D.projectionModel||"");case"date":default:return new Date(D.savedAt||0)-new Date(v.savedAt||0)}}),y},[t,S,m,k]),I=d.useMemo(()=>{const y=t.length,v={lattice:t.filter(Q=>Q.projectionModel==="lattice").length,primetetration:t.filter(Q=>Q.projectionModel==="primetetration").length,montecarlo:t.filter(Q=>Q.projectionModel==="montecarlo").length},D=t.filter(Q=>Q.chartData&&Q.chartData.labels&&Q.chartData.labels.length>0).length,z=y-D,ee=new Set(t.map(Q=>Q.symbol).filter(Boolean)).size;return{total:y,byModel:v,withCharts:D,withoutCharts:z,totalSymbols:ee}},[t]),W=y=>y?new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",N=y=>({lattice:"12-Fold Lattice",primetetration:"Prime Tetration",montecarlo:"Monte Carlo"})[y]||y||"Unknown",E=y=>ir[y%ir.length],F=y=>{l(y),s(!0)},se=y=>{u(y),c(!0)},he=()=>{if(n)try{er(n.id),_(y=>y.filter(v=>v!==n.id)),L(),c(!1),u(null)}catch(y){console.error("Error deleting projection:",y),P("Failed to delete projection")}},O=()=>{if(T.length!==0&&window.confirm(`Are you sure you want to delete ${T.length} projection(s)?`))try{T.forEach(y=>{try{er(y)}catch(v){console.error("Error deleting projection:",v)}}),_([]),L()}catch(y){console.error("Failed to delete projections:",y),P("Failed to delete projections")}},U=y=>{A("/projection",{state:{loadProjection:y}})},de=y=>{_(v=>v.includes(y)?v.filter(D=>D!==y):[...v,y])},ae=()=>{T.length===C.length?_([]):_(C.map(y=>y.id))},Z=()=>{const y=JSON.stringify(t,null,2),v=new Blob([y],{type:"application/json"}),D=URL.createObjectURL(v),z=document.createElement("a");z.href=D,z.download=`projections-${new Date().toISOString().split("T")[0]}.json`,z.click(),URL.revokeObjectURL(D)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Saved Projections"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and view your saved projection configurations and charts"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{type:"button",onClick:()=>A("/projection"),className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Projection"]})})]}),X&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:I.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"12-Fold Lattice"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:I.byModel.lattice})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Prime Tetration"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:I.byModel.primetetration})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Monte Carlo"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:I.byModel.montecarlo})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"With Charts"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:I.withCharts})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl p-4 border border-pink-200 dark:border-pink-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-pink-700 dark:text-pink-300",children:"Filtered"}),e.jsx("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:C.length})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:S,onChange:y=>h(y.target.value),placeholder:"Search projections by symbol, model, or interval...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:m,onChange:y=>H(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Models"}),M.map(y=>e.jsx("option",{value:y,children:N(y)},y))]}),e.jsxs("select",{value:k,onChange:y=>j(y.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"symbol",children:"Sort by Symbol"}),e.jsx("option",{value:"model",children:"Sort by Model"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>K("grid"),className:`p-2 rounded ${B==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>K("list"),className:`p-2 rounded ${B==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("button",{type:"button",onClick:Z,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>p(!X),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:X?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),T.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[T.length," projection(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:O,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>_([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]})]})]}),f&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:f})})]}),e.jsx("button",{type:"button",onClick:()=>P(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),x&&t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading projections..."})]}):C.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:S||m!=="all"?"No projections found":"No projections saved"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:S||m!=="all"?"Try adjusting your search or filter criteria":"Save projections from the Projection page to view them here"}),!S&&m==="all"&&e.jsx("button",{type:"button",onClick:()=>A("/projection"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Projection Page"})]}):e.jsxs(e.Fragment,{children:[C.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:T.length===C.length&&C.length>0,onChange:ae,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",C.length,")"]})]}),e.jsx("div",{className:B==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:C.map((y,v)=>{const D=E(v);return e.jsxs("div",{className:`relative bg-gradient-to-br ${D.bg} ${D.dark} rounded-xl p-5 border ${D.border} ${D.dark} shadow-md hover:shadow-lg transition-all ${T.includes(y.id)?"ring-2 ring-blue-500":""}`,children:[B==="list"&&e.jsx("input",{type:"checkbox",checked:T.includes(y.id),onChange:()=>de(y.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:z=>z.stopPropagation()}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:y.symbol||"N/A"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:W(y.savedAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),F(y)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"View Projection",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),se(y)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Delete Projection",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Model:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:N(y.projectionModel)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Interval:"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:y.interval||"N/A"})]}),y.projectionModel==="primetetration"&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:["Base: ",y.base||3]}),e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:["Depth: ",y.primeDepth||"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/30 dark:border-gray-700/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),U(y)},className:"px-3 py-1 text-xs font-medium text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50 rounded-lg transition-colors",children:"Load"}),e.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),F(y)},className:"px-3 py-1 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:"View"})]}),B==="grid"&&e.jsx("input",{type:"checkbox",checked:T.includes(y.id),onChange:()=>de(y.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:z=>z.stopPropagation()})]})]},y.id)})}),C.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",C.length," of ",t.length," projections"]})]}),o&&a&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>s(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4 max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",children:["Projection Details: ",a.symbol]}),a.chartData&&a.chartData.labels&&Array.isArray(a.chartData.labels)&&a.chartData.datasets&&Array.isArray(a.chartData.datasets)&&a.chartData.datasets.length>0?e.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Price Projection Chart"}),e.jsx("div",{className:"h-96 w-full",children:e.jsx(Qe,{data:{labels:a.chartData.labels||[],datasets:(a.chartData.datasets||[]).map(y=>({...y,data:Array.isArray(y.data)?y.data:[]}))},options:V})}),a.chartData.currentPrice&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Current Price"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["$",a.chartData.currentPrice.toFixed(2)]})]}),a.chartData.change!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Change"}),e.jsxs("p",{className:`text-sm font-bold ${a.chartData.change>=0?"text-green-600":"text-red-600"}`,children:[a.chartData.change>=0?"+":"","$",a.chartData.change.toFixed(2)]})]}),a.chartData.changePercent!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Change %"}),e.jsxs("p",{className:`text-sm font-bold ${a.chartData.changePercent>=0?"text-green-600":"text-red-600"}`,children:[a.chartData.changePercent>=0?"+":"",a.chartData.changePercent.toFixed(2),"%"]})]}),a.chartData.projectedPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400",children:"Projected Price"}),e.jsxs("p",{className:"text-sm font-bold text-purple-600 dark:text-purple-400",children:["$",a.chartData.projectedPrice.toFixed(2)]})]})]})]}):e.jsx("div",{className:"mb-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Chart data not available for this projection. The chart may not have been saved with the projection."})]})}),e.jsx("div",{className:"mt-2 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Model"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:N(a.projectionModel)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Interval"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.interval||"N/A"})]}),a.projectionModel==="primetetration"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Base (seed)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.base||3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Prime Depth"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.primeDepth||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Projections Count"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.projectionCount||12})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Omega Hz"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[a.omegaHz||432," Hz"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Lambda Schedule"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.useLambdaSchedule?"Enabled":"Disabled"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Omega Schedule"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.useOmegaSchedule?"Enabled":"Disabled"})]})]}),a.projectionSteps&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Projection Steps"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:a.projectionSteps})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Saved At"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:W(a.savedAt)})]})]})})]})})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:()=>U(a),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Load Projection"}),e.jsx("button",{type:"button",onClick:()=>s(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Close"})]})]})]})}),i&&n&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>c(!1)}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Delete Projection"}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Are you sure you want to delete the projection for"," ",e.jsx("span",{className:"font-medium",children:n.symbol}),"? This action cannot be undone."]})})]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:he,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{c(!1),u(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})}ut.register(ht,xt,gt,mt,pt,bt,ft);function gs({monitorId:t}){const[r,a]=d.useState(null),[l,o]=d.useState(!0);d.useEffect(()=>{s();const i=setInterval(s,3e4);return()=>clearInterval(i)},[t]);const s=async()=>{try{const i=await Ar(t,"response-time"),c=i.map(u=>{const x=u.time||u.timestamp;return new Date(x).toLocaleTimeString("en-US",{timeZone:"America/New_York"})}),n=i.map(u=>u.value||u.responseTime||0);a({labels:c,datasets:[{label:"Response Time (ms)",data:n,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]})}catch(i){console.error("Failed to load chart data:",i),o(!1)}finally{o(!1)}};return l||!r?e.jsx("div",{className:"h-48 flex items-center justify-center text-gray-500",children:"Loading chart..."}):e.jsx("div",{className:"h-48",children:e.jsx(Qe,{data:r,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})}function ms({monitor:t,onEdit:r,onDelete:a,onTogglePause:l,onSelect:o,selected:s}){const[i,c]=d.useState(!1),u=(()=>{if(t.paused)return{color:"gray",text:"Paused"};const f=t.responseTime||t.avgResponseTime||0;return!(t.status==="up"||t.isUp)||f===0?{color:"red",text:"Down"}:f<1e3?{color:"green",text:"Operational"}:f<5e3?{color:"yellow",text:"Degraded"}:{color:"red",text:"Down"}})(),x=u.color,w=u.text;return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow p-4 transition-all ${s?"ring-2 ring-blue-500 dark:ring-blue-400":""} ${o?"cursor-pointer hover:shadow-lg":""}`,onClick:o,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-white mb-1",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.url})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`inline-flex items-center gap-x-1.5 py-1 px-2 rounded-full text-xs font-medium ${x==="green"?"bg-green-100 text-green-800":x==="yellow"?"bg-yellow-100 text-yellow-800":x==="red"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${x==="green"?"bg-green-600":x==="yellow"?"bg-yellow-600":x==="red"?"bg-red-600":"bg-gray-600"}`}),w]})})]}),t.price!==void 0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Current Price"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["$",t.price.toFixed(2)]}),t.change!==void 0&&e.jsxs("p",{className:`text-xs font-semibold mt-1 ${t.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[t.change>=0?"+":"","$",t.change.toFixed(2)," (",t.changePercent>=0?"+":"",t.changePercent.toFixed(2),"%)"]})]}),t.volume&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Volume"}),e.jsx("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200",children:t.volume.toLocaleString()})]}),t.marketState&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Market Status"}),e.jsx("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 capitalize",children:t.marketState==="REGULAR"?"Open":t.marketState.toLowerCase()})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Response Time"}),e.jsxs("p",{className:"text-base font-semibold text-gray-800 dark:text-white",children:[t.responseTime||t.avgResponseTime||0,"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Uptime"}),e.jsxs("p",{className:"text-base font-semibold text-gray-800 dark:text-white",children:[t.uptime||t.uptimePercent||0,"%"]})]})]}),t.lastCheck&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Last Check"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300",children:new Date(t.lastCheck).toLocaleString("en-US",{timeZone:"America/New_York"})})]})]}),t.lastCheck&&t.price===void 0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Last Check"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300",children:new Date(t.lastCheck).toLocaleString("en-US",{timeZone:"America/New_York"})})]}),i&&e.jsx("div",{className:"mb-4",children:e.jsx(gs,{monitorId:t.id})}),e.jsxs("div",{className:"flex gap-2 flex-wrap",onClick:f=>f.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),c(!i)},className:"flex-1 min-w-[100px] py-1.5 px-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:i?"Hide Chart":"Show Chart"}),e.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),l(t.id)},className:"py-1.5 px-2 text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:t.paused?"Resume":"Pause"}),e.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),r(t)},className:"py-1.5 px-2 text-xs font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors",children:"Edit"}),e.jsx("button",{type:"button",onClick:f=>{f.stopPropagation(),a(t.id)},className:"py-1.5 px-2 text-xs font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:"Delete"})]})]})}function ps({isOpen:t,onClose:r,onSave:a,monitor:l}){const[o,s]=d.useState({name:"",symbol:"",url:"",type:"http"});d.useEffect(()=>{s(l?{name:l.name||"",symbol:l.symbol||l.id||"",url:l.url||"",type:l.type||"http"}:{name:"",symbol:"",url:"",type:"http"})},[l,t]);const i=n=>{n.preventDefault(),a(o)},c=n=>{n.target===n.currentTarget&&r()};return d.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?e.jsxs("div",{className:"fixed inset-0 z-[100] overflow-x-hidden overflow-y-auto",onClick:c,children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 transition-opacity"}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 w-full max-w-lg transform transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center py-4 px-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l?"Edit Monitor":"Add Monitor"}),e.jsx("button",{type:"button",onClick:r,className:"flex justify-center items-center w-7 h-7 text-sm font-semibold rounded-full border border-transparent text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-300 transition-colors","aria-label":"Close",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Stock Symbol ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.symbol,onChange:n=>s({...o,symbol:n.target.value.toUpperCase()}),className:"py-2.5 px-3 block w-full border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"AAPL, GOOGL, MSFT, etc.",required:!0,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter a stock ticker symbol (e.g., AAPL, GOOGL, TSLA)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name (Optional)"}),e.jsx("input",{type:"text",value:o.name,onChange:n=>s({...o,name:n.target.value}),className:"py-2.5 px-3 block w-full border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Leave empty to use stock name"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Custom name for this monitor (optional)"})]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-3 py-4 px-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:r,className:"py-2 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"py-2 px-4 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 shadow-sm hover:shadow-md transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),l?"Update Monitor":"Create Monitor"]})]})]})]})})]}):null}function bs(){const[t,r]=d.useState([]),[a,l]=d.useState(!0),[o,s]=d.useState(null),[i,c]=d.useState(!1),[n,u]=d.useState(null),[x,w]=d.useState("checking"),[f,P]=d.useState(""),[S,h]=d.useState("name"),[k,j]=d.useState("all"),[m,H]=d.useState("grid"),[B,K]=d.useState([]),[T,_]=d.useState(!0),[X,p]=d.useState(null),[A,V]=d.useState(!0),[L,M]=d.useState(30),C=d.useCallback(async()=>{try{l(!0),s(null);const v=await Cr();r(v||[]),w("connected"),p(new Date)}catch(v){console.error("Failed to load monitors:",v),s(v.message||"Failed to load monitors"),w("disconnected")}finally{l(!1)}},[]);d.useEffect(()=>{C()},[C]),d.useEffect(()=>{if(!A)return;const v=setInterval(()=>{C()},L*1e3);return()=>clearInterval(v)},[A,L,C]);const I=d.useMemo(()=>{let v=[...t];if(f){const D=f.toLowerCase();v=v.filter(z=>z.name?.toLowerCase().includes(D)||z.symbol?.toLowerCase().includes(D)||z.id?.toLowerCase().includes(D))}return k!=="all"&&(v=v.filter(D=>{if(k==="operational"){const z=D.responseTime||D.avgResponseTime||0;return D.isUp&&z>0&&z<1e3}else if(k==="degraded"){const z=D.responseTime||D.avgResponseTime||0;return D.isUp&&z>=1e3&&z<5e3}else{if(k==="down")return!D.isUp||(D.responseTime||D.avgResponseTime||0)===0;if(k==="paused")return D.paused}return!0})),v.sort((D,z)=>{switch(S){case"price":return(z.price||0)-(D.price||0);case"change":return(z.changePercent||0)-(D.changePercent||0);case"status":const ee=D.paused?"paused":D.isUp?"operational":"down",Q=z.paused?"paused":z.isUp?"operational":"down";return ee.localeCompare(Q);case"name":default:return(D.name||D.id||"").localeCompare(z.name||z.id||"")}}),v},[t,f,k,S]),W=d.useMemo(()=>{const v=t.length,D=t.filter(b=>{const R=b.responseTime||b.avgResponseTime||0;return b.isUp&&R>0&&R<1e3&&!b.paused}).length,z=t.filter(b=>{const R=b.responseTime||b.avgResponseTime||0;return b.isUp&&R>=1e3&&R<5e3&&!b.paused}).length,ee=t.filter(b=>!b.isUp||(b.responseTime||b.avgResponseTime||0)===0||b.paused).length,Q=t.reduce((b,R)=>b+(R.price||0),0),ge=t.length>0?t.reduce((b,R)=>b+(R.changePercent||0),0)/t.length:0;return{total:v,operational:D,degraded:z,down:ee,totalValue:Q,avgChange:ge}},[t]),N=()=>{u(null),c(!0)},E=v=>{u(v),c(!0)},F=async v=>{try{n?await Mr(n.id,v):await Lr(v),c(!1),u(null),await C()}catch(D){console.error("Failed to save monitor:",D),s(D.message||"Failed to save monitor")}},se=async v=>{if(window.confirm("Are you sure you want to delete this monitor?"))try{await It(v),K(D=>D.filter(z=>z!==v)),await C()}catch(D){console.error("Failed to delete monitor:",D),s(D.message||"Failed to delete monitor")}},he=async()=>{if(B.length!==0&&window.confirm(`Are you sure you want to delete ${B.length} monitor(s)?`))try{await Promise.all(B.map(v=>It(v))),K([]),await C()}catch(v){console.error("Failed to delete monitors:",v),s(v.message||"Failed to delete monitors")}},O=async v=>{try{await Tt(v),await C()}catch(D){console.error("Failed to toggle pause:",D),s(D.message||"Failed to toggle pause")}},U=async v=>{if(B.length!==0)try{await Promise.all(B.map(D=>{const z=t.find(ee=>ee.id===D);return z&&z.paused!==v?Tt(D):Promise.resolve()})),await C()}catch(D){console.error("Failed to bulk pause/resume:",D),s(D.message||"Failed to bulk pause/resume")}},de=()=>{c(!1),u(null)},ae=v=>{K(D=>D.includes(v)?D.filter(z=>z!==v):[...D,v])},Z=()=>{B.length===I.length?K([]):K(I.map(v=>v.id))},y=()=>{const v=JSON.stringify(t,null,2),D=new Blob([v],{type:"application/json"}),z=URL.createObjectURL(D),ee=document.createElement("a");ee.href=z,ee.download=`monitors-${new Date().toISOString().split("T")[0]}.json`,ee.click(),URL.revokeObjectURL(z)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"API Monitoring Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor stock prices, API status, and performance metrics in real-time"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${x==="connected"?"bg-green-500 animate-pulse":x==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:x==="connected"?"Connected":x==="disconnected"?"Disconnected":"Checking..."})]}),e.jsxs("button",{type:"button",onClick:N,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Monitor"]})]})]}),T&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:W.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"Operational"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:W.operational})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Degraded"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:W.degraded})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-red-700 dark:text-red-300",children:"Down"}),e.jsx("svg",{className:"w-4 h-4 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:W.down})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Total Value"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["$",(W.totalValue/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"Avg Change"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),e.jsxs("p",{className:`text-2xl font-bold ${W.avgChange>=0?"text-indigo-900 dark:text-indigo-100":"text-red-600 dark:text-red-400"}`,children:[W.avgChange>=0?"+":"",W.avgChange.toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:f,onChange:v=>P(v.target.value),placeholder:"Search monitors by name or symbol...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:k,onChange:v=>j(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"operational",children:"Operational"}),e.jsx("option",{value:"degraded",children:"Degraded"}),e.jsx("option",{value:"down",children:"Down"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:S,onChange:v=>h(v.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price",children:"Sort by Price"}),e.jsx("option",{value:"change",children:"Sort by Change"}),e.jsx("option",{value:"status",children:"Sort by Status"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>H("grid"),className:`p-2 rounded ${m==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>H("list"),className:`p-2 rounded ${m==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:C,disabled:a,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Refresh Now",children:e.jsx("svg",{className:`w-5 h-5 ${a?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:v=>V(v.target.checked),className:"rounded"}),e.jsx("span",{children:"Auto"})]})]}),e.jsxs("button",{type:"button",onClick:y,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>_(!T),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:T?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),B.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[B.length," monitor(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-3 py-1.5 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded-lg transition-colors",children:"Resume All"}),e.jsx("button",{type:"button",onClick:()=>U(!0),className:"px-3 py-1.5 text-sm font-medium text-yellow-700 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/30 hover:bg-yellow-200 dark:hover:bg-yellow-900/50 rounded-lg transition-colors",children:"Pause All"}),e.jsx("button",{type:"button",onClick:he,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>K([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]}),X&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:["Last refreshed: ",X.toLocaleTimeString("en-US",{timeZone:"America/New_York"}),A&&` â¢ Auto-refresh every ${L}s`]})]})]}),o&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:o})})]}),e.jsx("button",{type:"button",onClick:()=>s(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a&&t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading monitors..."})]}):I.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:f||k!=="all"?"No monitors found":"No monitors yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:f||k!=="all"?"Try adjusting your search or filter criteria":"Get started by adding your first stock monitor"}),!f&&k==="all"&&e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Monitor"})]}):e.jsxs(e.Fragment,{children:[I.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:B.length===I.length&&I.length>0,onChange:Z,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",I.length,")"]})]}),e.jsx("div",{className:m==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:I.map(v=>e.jsxs("div",{className:"relative",children:[m==="list"&&e.jsx("input",{type:"checkbox",checked:B.includes(v.id),onChange:()=>ae(v.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(ms,{monitor:v,onEdit:E,onDelete:se,onTogglePause:O,onSelect:m==="list"?()=>ae(v.id):null,selected:B.includes(v.id)})]},v.id))}),I.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",I.length," of ",t.length," monitors"]})]}),e.jsx(ps,{isOpen:i,onClose:de,onSave:F,monitor:n})]})}function fs({columns:t,rows:r,columnUnit:a,rowUnit:l,onColumnsChange:o,onRowsChange:s,onColumnUnitChange:i,onRowUnitChange:c}){return e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Columns"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:t,onChange:n=>o(parseInt(n.target.value)||1),className:"flex-1 py-2 px-3 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("select",{value:a,onChange:n=>i(n.target.value),className:"py-2 px-3 block border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"fr",children:"fr"}),e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"%",children:"%"}),e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"1fr",children:"1fr"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rows"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:r,onChange:n=>s(parseInt(n.target.value)||1),className:"flex-1 py-2 px-3 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("select",{value:l,onChange:n=>c(n.target.value),className:"py-2 px-3 block border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"fr",children:"fr"}),e.jsx("option",{value:"px",children:"px"}),e.jsx("option",{value:"%",children:"%"}),e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"1fr",children:"1fr"})]})]})]})]})}function ys({id:t,children:r}){const{attributes:a,listeners:l,setNodeRef:o,transform:s,transition:i}=dt({id:t}),c={transform:ct.Transform.toString(s),transition:i};return e.jsx("div",{ref:o,style:c,...a,...l,className:"cursor-move",children:r})}function ks({columns:t,rows:r,columnUnit:a,rowUnit:l,items:o,onItemsChange:s}){const i=hr(it(mr),it(gr,{coordinateGetter:xr})),c=Array(t).fill(`1${a==="1fr"?"fr":a}`).join(" "),n=Array(r).fill(`1${l==="1fr"?"fr":l}`).join(" "),u=x=>{const{active:w,over:f}=x;if(w.id!==f.id){const P=o.findIndex(h=>h.id===w.id),S=o.findIndex(h=>h.id===f.id);s(lt(o,P,S))}};return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:e.jsx("div",{className:"grid gap-2 min-h-[400px]",style:{gridTemplateColumns:c,gridTemplateRows:n},children:e.jsx(st,{sensors:i,collisionDetection:ot,onDragEnd:u,children:e.jsx(nt,{items:o.map(x=>x.id),strategy:sa,children:o.map(x=>e.jsx(ys,{id:x.id,children:e.jsx("div",{className:"bg-blue-500 text-white p-4 rounded-lg flex items-center justify-center font-semibold",children:x.label})},x.id))})})})})}function js({columns:t,rows:r,columnUnit:a,rowUnit:l}){const[o,s]=d.useState(!1),i=Array(t).fill(`1${a==="1fr"?"fr":a}`).join(" "),c=Array(r).fill(`1${l==="1fr"?"fr":l}`).join(" "),n=`.grid-container {
  display: grid;
  grid-template-columns: ${i};
  grid-template-rows: ${c};
  gap: 1rem;
}`,u=async()=>{try{await navigator.clipboard.writeText(n),s(!0),setTimeout(()=>s(!1),2e3)}catch(x){console.error("Failed to copy:",x)}};return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Generated CSS"}),e.jsx("button",{type:"button",onClick:u,className:"py-1 px-3 text-sm font-medium text-blue-700 bg-blue-100 rounded-lg hover:bg-blue-200",children:o?"Copied!":"Copy"})]}),e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:e.jsx("code",{children:n})})]})}function vs(){const[t,r]=d.useState(3),[a,l]=d.useState(3),[o,s]=d.useState("fr"),[i,c]=d.useState("fr"),[n,u]=d.useState(()=>{const f=[];for(let P=1;P<=9;P++)f.push({id:`item-${P}`,label:`Item ${P}`});return f}),x=()=>{const f=`item-${Date.now()}`;u([...n,{id:f,label:`Item ${n.length+1}`}])},w=()=>{r(3),l(3),s("fr"),c("fr");const f=[];for(let P=1;P<=9;P++)f.push({id:`item-${P}`,label:`Item ${P}`});u(f)};return e.jsxs("div",{children:[e.jsx(fs,{columns:t,rows:a,columnUnit:o,rowUnit:i,onColumnsChange:r,onRowsChange:l,onColumnUnitChange:s,onRowUnitChange:c}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("button",{type:"button",onClick:x,className:"py-2 px-4 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Add Item"}),e.jsx("button",{type:"button",onClick:w,className:"py-2 px-4 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Reset"})]}),e.jsx(ks,{columns:t,rows:a,columnUnit:o,rowUnit:i,items:n,onItemsChange:u}),e.jsx(js,{columns:t,rows:a,columnUnit:o,rowUnit:i})]})}function ws(){const[t,r]=d.useState(()=>{const N=localStorage.getItem("darkMode");return N?JSON.parse(N):!1}),[a,l]=d.useState({finnhub:"demo",massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG",fibhub:""}),[o,s]=d.useState(()=>{const N=localStorage.getItem("refreshInterval");return N?parseInt(N,10):30}),[i,c]=d.useState(()=>{const N=localStorage.getItem("defaultSymbols");return N?JSON.parse(N):["AAPL","GOOGL","MSFT","TSLA","AMZN"]}),[n,u]=d.useState(""),[x,w]=d.useState(()=>{const N=localStorage.getItem("notificationSettings");return N?JSON.parse(N):{priceAlerts:!0,apiStatusAlerts:!0,errorAlerts:!0,soundEnabled:!1}}),[f,P]=d.useState(()=>{const N=localStorage.getItem("generalSettings");return N?JSON.parse(N):{autoRefresh:!0,showTooltips:!0,compactMode:!1}}),[S,h]=d.useState("appearance"),[k,j]=d.useState({message:"",type:""}),[m,H]=d.useState({finnhub:!1,massive:!1,fibhub:!1}),[B,K]=d.useState(!1);d.useEffect(()=>{const N=localStorage.getItem("apiKeys");if(N)try{const E=JSON.parse(N);l({...a,...E})}catch(E){console.error("Error loading API keys:",E)}},[]),d.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(t)),_("Dark mode updated","success")},[t]);const T=d.useCallback((N,E,F)=>{try{localStorage.setItem(N,typeof E=="object"?JSON.stringify(E):E),_(F||"Settings saved","success"),K(!1)}catch(se){_("Failed to save settings","error"),console.error("Save error:",se)}},[]),_=(N,E)=>{j({message:N,type:E}),setTimeout(()=>{j({message:"",type:""})},3e3)},X=(N,E)=>{l({...a,[N]:E}),K(!0)},p=()=>{T("apiKeys",a,"API keys saved successfully")},A=N=>{const E=parseInt(N,10)||30;s(Math.max(5,Math.min(300,E))),T("refreshInterval",E.toString(),"Refresh interval updated")},V=()=>{const N=n.toUpperCase().trim();if(N&&!i.includes(N)&&N.length<=10){const E=[...i,N];c(E),u(""),T("defaultSymbols",E,"Symbol added")}},L=N=>{const E=i.filter(F=>F!==N);c(E),T("defaultSymbols",E,"Symbol removed")},M=(N,E)=>{const F={...x,[N]:E};w(F),T("notificationSettings",F,"Notification settings updated")},C=(N,E)=>{const F={...f,[N]:E};P(F),T("generalSettings",F,"General settings updated")},I=()=>{window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone.")&&(localStorage.removeItem("apiKeys"),localStorage.removeItem("refreshInterval"),localStorage.removeItem("defaultSymbols"),localStorage.removeItem("notificationSettings"),localStorage.removeItem("generalSettings"),l({finnhub:"demo",massive:"qeBvdtjWjffA90rzgWB_HeHtmdpyuGQG",fibhub:""}),s(30),c(["AAPL","GOOGL","MSFT","TSLA","AMZN"]),w({priceAlerts:!0,apiStatusAlerts:!0,errorAlerts:!0,soundEnabled:!1}),P({autoRefresh:!0,showTooltips:!0,compactMode:!1}),_("All settings reset to defaults","success"),K(!1))},W=[{id:"appearance",label:"Appearance"},{id:"api",label:"API Keys"},{id:"data",label:"Data & Refresh"},{id:"notifications",label:"Notifications"},{id:"general",label:"General"},{id:"tools",label:"Tools"}];return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your application preferences and configuration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[B&&e.jsxs("span",{className:"text-sm text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Unsaved changes"]}),e.jsxs("button",{onClick:I,className:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset All"]})]})]}),k.message&&e.jsx("div",{className:`rounded-lg p-4 mb-4 border ${k.type==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[k.type==="success"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-medium",children:k.message})]})}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:W.map(N=>e.jsx("button",{onClick:()=>h(N.id),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${S===N.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:N.label},N.id))})})]}),e.jsxs("div",{className:"mt-6",children:[S==="appearance"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Appearance Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customize the look and feel of the application"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Dark Mode"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:"Recommended"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Switch between light and dark theme for better viewing experience"})]}),e.jsx("button",{type:"button",onClick:()=>r(!t),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${t?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,role:"switch","aria-checked":t,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${t?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Theme Tip"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:"Dark mode reduces eye strain in low-light environments and can help save battery on OLED displays."})]})]})})]})]}),S==="api"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"API Keys"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your API keys for different data sources. Keys are stored locally in your browser."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Finnhub API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m.finnhub?"text":"password",value:a.finnhub,onChange:N=>X("finnhub",N.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Finnhub API key"}),e.jsx("button",{type:"button",onClick:()=>H({...m,finnhub:!m.finnhub}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",title:m.finnhub?"Hide":"Show",children:m.finnhub?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("a",{href:"https://finnhub.io/register",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Get free API key"]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"â¢ Free tier: 60 calls/minute"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Massive API Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m.massive?"text":"password",value:a.massive,onChange:N=>X("massive",N.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Massive API key"}),e.jsx("button",{type:"button",onClick:()=>H({...m,massive:!m.massive}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:m.massive?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Optional backup API source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Fibhub API Key (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m.fibhub?"text":"password",value:a.fibhub||"",onChange:N=>X("fibhub",N.target.value),className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your Fibhub API key (optional)"}),e.jsx("button",{type:"button",onClick:()=>H({...m,fibhub:!m.fibhub}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:m.fibhub?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"For news and additional data sources"})]}),B&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:p,className:"px-6 py-2.5 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save API Keys"]})})]})]}),S==="data"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Data Refresh"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure how often data is automatically refreshed"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 dark:text-white mb-3",children:["Refresh Interval: ",e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:[o," seconds"]})]}),e.jsx("input",{type:"range",min:"5",max:"300",step:"5",value:o,onChange:N=>A(N.target.value),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-blue-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:"5s (Fast)"}),e.jsx("span",{children:"150s (Balanced)"}),e.jsx("span",{children:"300s (Slow)"})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[e.jsx("strong",{children:"Tip:"})," Lower intervals provide more real-time data but may consume more API quota. Recommended: 30-60 seconds for most use cases."]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Default Stock Symbols"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure default stock symbols to monitor automatically"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:N=>u(N.target.value.toUpperCase()),onKeyPress:N=>N.key==="Enter"&&V(),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter symbol (e.g., AAPL, TSLA)",maxLength:"10"}),e.jsx("button",{onClick:V,disabled:!n.trim()||i.includes(n.toUpperCase().trim()),className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Add"})]}),i.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(N=>e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("span",{className:"text-sm font-semibold",children:N}),e.jsx("button",{onClick:()=>L(N),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 transition-colors",title:"Remove symbol",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},N))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{children:"No symbols added yet"})]})]})]})]}),S==="notifications"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure what notifications you want to receive"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"priceAlerts",label:"Price Alerts",desc:"Get notified when prices reach your target levels"},{key:"apiStatusAlerts",label:"API Status Alerts",desc:"Get notified when API endpoints change status"},{key:"errorAlerts",label:"Error Alerts",desc:"Get notified when errors occur in the application"},{key:"soundEnabled",label:"Sound Notifications",desc:"Play sound when notifications appear"}].map(({key:N,label:E,desc:F})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white block mb-1",children:E}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:F})]}),e.jsx("button",{type:"button",onClick:()=>M(N,!x[N]),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${x[N]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${x[N]?"translate-x-6":"translate-x-1"}`})})]},N))})]}),S==="general"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"General Settings"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"General application preferences and behavior"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"autoRefresh",label:"Auto Refresh",desc:"Automatically refresh data at configured intervals"},{key:"showTooltips",label:"Show Tooltips",desc:"Display helpful tooltips throughout the application"},{key:"compactMode",label:"Compact Mode",desc:"Use a more compact layout to fit more information"}].map(({key:N,label:E,desc:F})=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-base font-semibold text-gray-900 dark:text-white block mb-1",children:E}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:F})]}),e.jsx("button",{type:"button",onClick:()=>C(N,!f[N]),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${f[N]?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform ${f[N]?"translate-x-6":"translate-x-1"}`})})]},N))})]}),S==="tools"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"CSS Grid Generator"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create dynamic layouts by configuring your grid columns and rows, then drag elements to position them."})]}),e.jsx(vs,{})]})]})]})}const dr=[{ratio:0,label:"0.0"},{ratio:.5,label:"0.5"},{ratio:1,label:"1.0"},{ratio:1.382,label:"1.382"},{ratio:1.618,label:"1.618"},{ratio:2,label:"2.0"},{ratio:2.382,label:"2.382"},{ratio:2.618,label:"2.618"},{ratio:3,label:"3.0"},{ratio:3.382,label:"3.382"},{ratio:3.618,label:"3.618"},{ratio:4.24,label:"4.24"},{ratio:5.08,label:"5.08"},{ratio:6.86,label:"6.86"},{ratio:11.01,label:"11.01"}],cr=[{ratio:-11.01,label:"-11.01"},{ratio:-6.86,label:"-6.86"},{ratio:-5.08,label:"-5.08"},{ratio:-4.24,label:"-4.24"},{ratio:-3.618,label:"-3.618"},{ratio:-3.382,label:"-3.382"},{ratio:-3,label:"-3.0"},{ratio:-2.618,label:"-2.618"},{ratio:-2.382,label:"-2.382"},{ratio:-2,label:"-2.0"},{ratio:-1.618,label:"-1.618"},{ratio:-1.382,label:"-1.382"},{ratio:-1,label:"-1.0"},{ratio:-.5,label:"-0.5"}];function Ns(){const[t,r]=d.useState("AAPL"),[a,l]=d.useState(2),[o,s]=d.useState(!1),[i,c]=d.useState(null),[n,u]=d.useState(null),[x,w]=d.useState(!1),[f,P]=d.useState(!1),S=d.useRef(null),h=d.useRef(null),k=async(p,A,V)=>{try{const C=await $e(p,"1d",A==="ytd"?"ytd":"1y");if(C.source!=="yahoo")throw new Error("Yahoo Finance data is required for chart display. Please try again.");const I=C.data;if(!I||!I.chart||!I.chart.result||I.chart.result.length===0)throw new Error("No data available for this symbol");const W=I.chart.result[0],N=W.meta,E=W.indicators?.quote?.[0],F=W.timestamp;if(!E)throw new Error("No quote data available for this symbol");if(!F||F.length===0)throw new Error("No timestamp data available");let se,he,O;if(V==="first_day"){const Z=new Date().getFullYear(),y=[];for(let Q=0;Q<F.length;Q++){const ge=new Date(F[Q]*1e3);ge.getFullYear()===Z&&y.push({index:Q,date:ge,timestamp:F[Q],high:E.high[Q],low:E.low[Q],open:E.open[Q],close:E.close[Q]})}if(y.length===0)throw new Error("No data available for current year");y.sort((Q,ge)=>Q.timestamp-ge.timestamp);const v=y[0];if(v.high===null||v.low===null||v.open===null||v.close===null)throw new Error("Invalid data for first trading day");const D=v.close>v.open;D?(se=v.high,he=v.low):(se=v.low,he=v.high);const z=v.date,ee=D?"BULLISH":"BEARISH";O=`First Trading Day: ${z.toLocaleDateString()} (${ee} - Open: ${v.open.toFixed(2)}, High: ${v.high.toFixed(2)}, Low: ${v.low.toFixed(2)}, Close: ${v.close.toFixed(2)})`,console.log("First trading day anchor:",{date:z.toLocaleDateString(),dateTime:z.toLocaleString(),candleType:ee,actualHigh:v.high,actualLow:v.low,open:v.open,close:v.close,fibonacciHigh:se,fibonacciLow:he,note:D?"0=Low, 1=High":"0=High, 1=Low",totalCandlesInYear:y.length})}const U=E.close.filter(Z=>Z!==null),de=U[U.length-1],ae=[];for(let Z=0;Z<F.length;Z++)if(E.open[Z]!==null&&E.high[Z]!==null&&E.low[Z]!==null&&E.close[Z]!==null){const y=Math.floor(Number(F[Z])),v=Number(E.open[Z]),D=Number(E.high[Z]),z=Number(E.low[Z]),ee=Number(E.close[Z]);!isNaN(v)&&!isNaN(D)&&!isNaN(z)&&!isNaN(ee)&&v>0&&D>0&&z>0&&ee>0&&y>0&&D>=z&&D>=Math.max(v,ee)&&z<=Math.min(v,ee)&&ae.push({time:y,open:v,high:D,low:z,close:ee})}if(ae.sort((Z,y)=>Z.time-y.time),console.log("Chart data prepared:",{totalCandles:ae.length,firstCandle:ae[0],lastCandle:ae[ae.length-1],sampleData:ae.slice(0,3)}),ae.length===0)throw new Error("No valid chart data points found. Please check the symbol and try again.");return{symbol:N.symbol,current:de,high:se,low:he,currency:N.currency||"USD",timestamps:F,quotes:E,anchorInfo:O,chartData:ae}}catch(L){throw console.error("Error fetching market data:",L),console.error("Error stack:",L.stack),new Error(L.message||"Unable to fetch market data. Please verify the symbol and try again.")}},j=async()=>{const p=t.trim().toUpperCase();if(!p){c("Please enter a valid symbol");return}s(!0),c(null),w(!1);try{console.log("Fetching data for:",p,"ytd","Anchor: first_day","Precision:",a);const A=await k(p,"ytd","first_day");console.log("Data received:",A),u(A),w(!0)}catch(A){console.error("Error in fetchDataAndCalculate:",A),c(A.message||"Unable to fetch market data. Please verify the symbol and try again.")}finally{s(!1)}},m=(p,A,V=2)=>{if(!p||!A||p<=A)return[];const L=p-A,M=[];return dr.forEach(C=>{const I=C.ratio===0||C.ratio===1,W=A+L*C.ratio;M.push({y:W,borderColor:"#3B82F6",strokeDashArray:I?0:[5,5],borderWidth:I?2:1,opacity:I?1:.7,label:{borderColor:"#3B82F6",style:{color:"#fff",background:"#3B82F6",fontSize:"11px",fontWeight:600},text:`${C.label} (${W.toFixed(V)})`,position:"right"}})}),cr.forEach(C=>{const I=A+L*C.ratio;M.push({y:I,borderColor:"#EF4444",strokeDashArray:[5,5],borderWidth:1,opacity:.7,label:{borderColor:"#EF4444",style:{color:"#fff",background:"#EF4444",fontSize:"11px",fontWeight:600},text:`${C.label} (${I.toFixed(V)})`,position:"right"}})}),M},H=(p,A,V,L=2)=>{if(!S.current||!p||p.length===0)return console.error("Chart container ref is null or no data"),!1;if(h.current){try{h.current.destroy()}catch(F){console.warn("Error destroying existing chart:",F)}h.current=null}const M=S.current,C=document.documentElement.classList.contains("dark"),I=M.clientWidth||M.offsetWidth||800,W=M.clientHeight||M.offsetHeight||600,N=p.map(F=>({x:F.time*1e3,y:[F.open,F.high,F.low,F.close]})),E=A&&V?m(A,V,L):[];console.log("Fibonacci annotations calculated:",{count:E.length,high:A,low:V,range:A-V,sample:E.slice(0,3)}),E.length>0&&(console.log("First annotation structure:",JSON.stringify(E[0],null,2)),console.log("Last annotation structure:",JSON.stringify(E[E.length-1],null,2)));try{const F={series:[{name:"Price",data:N}],chart:{type:"candlestick",width:I,height:W,toolbar:{show:!0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}},zoom:{enabled:!0,type:"x",autoScaleYaxis:!0}},plotOptions:{candlestick:{colors:{upward:"#22C55E",downward:"#EF4444"}}},xaxis:{type:"datetime",labels:{show:!0,style:{colors:C?"#9ca3af":"#6b7280",fontSize:"12px",fontFamily:"Inter, ui-sans-serif",fontWeight:400},datetimeUTC:!1,format:"MMM dd"},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:C?"#9ca3af":"#6b7280",fontSize:"12px",fontFamily:"Inter, ui-sans-serif",fontWeight:400}}},grid:{borderColor:C?"#374151":"#e5e7eb",strokeDashArray:2},...E.length>0&&{annotations:{yaxis:E}},tooltip:{enabled:!0,theme:C?"dark":"light",custom:function({seriesIndex:he,dataPointIndex:O,w:U}){const de=U.globals.initialSeries[he].data[O],Z=new Date(de.x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),[y,v,D,z]=de.y,ee=2;return`
              <div class="px-3 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg">
                <div class="text-xs font-semibold text-gray-900 dark:text-white mb-1">${Z}</div>
                <div class="text-xs text-gray-600 dark:text-gray-400">
                  <div>Open: <span class="font-semibold">${y.toFixed(ee)}</span></div>
                  <div>High: <span class="font-semibold text-green-600">${v.toFixed(ee)}</span></div>
                  <div>Low: <span class="font-semibold text-red-600">${D.toFixed(ee)}</span></div>
                  <div>Close: <span class="font-semibold">${z.toFixed(ee)}</span></div>
                </div>
              </div>
            `}}},se=new oa(M,F);return h.current=se,se.render().then(()=>{console.log("ApexCharts rendered successfully with",E.length,"Fibonacci annotations"),E.length>0&&console.log("First annotation:",E[0])}).catch(he=>{console.error("Error rendering ApexCharts:",he)}),console.log("ApexCharts inline candles chart initialized successfully"),!0}catch(F){return console.error("Error initializing ApexCharts:",F),!1}},B=(p,A,V,L=2)=>{if(!Array.isArray(p)||p.length===0)return console.warn("No price data to show"),!1;const M=p.map(C=>{let I;if(typeof C.time=="number")I=Math.floor(C.time);else if(typeof C.time=="string"){const se=new Date(C.time);if(I=Math.floor(se.getTime()/1e3),isNaN(I))return null}else if(C.timestamp)I=Math.floor(Number(C.timestamp));else return null;const W=Number(C.open),N=Number(C.high),E=Number(C.low),F=Number(C.close);return isNaN(W)||isNaN(N)||isNaN(E)||isNaN(F)||W<=0||N<=0||E<=0||F<=0||I<=0||N<E||N<Math.max(W,F)||E>Math.min(W,F)?null:{time:I,open:W,high:N,low:E,close:F}}).filter(C=>C!==null).sort((C,I)=>C.time-I.time);return M.length===0?(console.error("No valid price data after formatting"),!1):H(M,A,V,L)},K=(p,A)=>{const V=p-A,L=dr.map(C=>({...C,price:A+V*C.ratio})),M=cr.map(C=>({...C,price:A+V*C.ratio}));return{positiveLevels:L,negativeLevels:M}},T=p=>{p.key==="Enter"&&j()};d.useEffect(()=>{if(!x||!n||!n.chartData||!Array.isArray(n.chartData)||n.chartData.length===0){if(h.current){try{h.current.destroy()}catch{}h.current=null}P(!1);return}let p=!0,A=null,V=0;const L=20,M=()=>{if(!p)return;if(V++,V>L){console.error("Max retries reached for chart initialization"),P(!1);return}if(!S.current){console.log("Container not ready, retrying...",V),A=setTimeout(M,100);return}const C=S.current,I=C.clientWidth||C.offsetWidth,W=C.clientHeight||C.offsetHeight;if(!I||I===0||!W||W===0){console.log("Container has no dimensions, retrying...",{containerWidth:I,containerHeight:W,retryCount:V}),A=setTimeout(M,100);return}console.log("Container ready, initializing chart...",{containerWidth:I,containerHeight:W}),n.chartData&&n.chartData.length>0&&(console.log("Updating chart with",n.chartData.length,"data points"),B(n.chartData,n.high,n.low,a)?(P(!0),console.log("Chart ready and displayed with Fibonacci levels")):(console.error("Failed to update chart with data"),P(!1)))};return A=setTimeout(M,50),()=>{p=!1,A&&clearTimeout(A)}},[x,n?.chartData?.length,n?.high,n?.low,a]),d.useEffect(()=>{let p=!0;const A=setTimeout(()=>{p&&t&&j()},500);return()=>{p=!1,clearTimeout(A)}},[]),d.useEffect(()=>()=>{if(h.current){try{h.current.destroy()}catch(p){console.warn("Error destroying chart on unmount:",p)}h.current=null}},[]);const{positiveLevels:_=[],negativeLevels:X=[]}=n?K(n.high,n.low):{};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"ð Fibonacci Retracement Calculator"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Calculate Fibonacci levels with real-time market data"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Market Data Input"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"symbol",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Symbol (Stock/Crypto)"}),e.jsx("input",{type:"text",id:"symbol",value:t,onChange:p=>r(p.target.value),onKeyPress:T,placeholder:"e.g., AAPL, TSLA, BTC-USD",className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 dark:focus:ring-blue-800 transition-colors"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time Period"}),e.jsx("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-2 border-blue-500 dark:border-blue-400 rounded-lg text-center text-base font-semibold text-blue-600 dark:text-blue-400",children:"Year to Date (YTD)"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fibonacci Anchor"}),e.jsx("div",{className:"px-4 py-2.5 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-2 border-blue-500 dark:border-blue-400 rounded-lg text-center text-base font-semibold text-blue-600 dark:text-blue-400",children:"First Trading Day of Year"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Decimal Precision"}),e.jsx("div",{className:"flex gap-2",children:[2,3].map(p=>e.jsx("button",{className:`flex-1 px-4 py-2.5 rounded-lg font-semibold transition-all ${a===p?"bg-blue-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-2 border-gray-300 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400"}`,onClick:()=>l(p),children:p},p))})]}),e.jsx("button",{className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all disabled:opacity-60 disabled:cursor-not-allowed mt-2",onClick:j,disabled:o,children:o?"Calculating...":"Calculate Fibonacci Levels"}),e.jsx("div",{className:"mt-5 p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded",children:e.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:[e.jsx("strong",{children:"How to use:"})," Enter a stock symbol (e.g., AAPL, GOOGL) or crypto symbol (e.g., BTC-USD, ETH-USD) and click calculate. Fibonacci levels will be anchored to the first trading day of the current year."]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Current Market Data"}),n&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg border border-gray-200 dark:border-gray-600 mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[n.symbol," - ",n.anchorInfo?.split("(")[0].trim()||"Period High/Low"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Current Price:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",n.current.toFixed(a)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Period High:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",n.high.toFixed(a)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Period Low:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",n.low.toFixed(a)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Range:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900 dark:text-white",children:[n.currency," ",(n.high-n.low).toFixed(a),"(",((n.high-n.low)/n.low*100).toFixed(2),"%)"]})]})]})]}),i&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 rounded text-sm mb-4",children:i}),o&&e.jsx("div",{className:"text-center py-6 text-blue-600 dark:text-blue-400 font-medium",children:"Fetching market data..."})]})]}),x&&n&&e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[450px_1fr] gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Fibonacci Extension Levels"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-3 text-sm",children:"ð Positive Levels"}),e.jsx("div",{className:"space-y-2",children:_.map((p,A)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:p.label}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:p.price.toFixed(a)})]},A))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-3 text-sm",children:"ð Negative Levels"}),e.jsx("div",{className:"space-y-2",children:X.map((p,A)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:p.label}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:p.price.toFixed(a)})]},A))})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded",children:e.jsxs("p",{className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:[e.jsx("strong",{children:"Fibonacci Anchoring:"})," BULLISH candle: 0 = Low, 1 = High. BEARISH candle: 0 = High, 1 = Low. Levels extend from these anchor points."]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 pb-3 border-b border-gray-200 dark:border-gray-700",children:"Price Chart"}),o&&e.jsx("div",{className:"text-center py-6 text-blue-600 dark:text-blue-400 font-medium",children:"Loading chart data..."}),i&&e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-700 dark:text-red-400 rounded text-sm mb-4",children:i}),x&&n&&n.chartData&&e.jsx("div",{className:"w-full",children:e.jsx("div",{ref:S,id:"hs-sparklines-candles-chart",className:"w-full",style:{height:"600px",minHeight:"600px",position:"relative"},children:!f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500 dark:text-gray-400 z-10 bg-white dark:bg-gray-800 rounded",style:{zIndex:10,pointerEvents:"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-200 border-t-blue-600 mx-auto mb-2"}),e.jsx("p",{children:"Initializing chart..."})]})})})})]})]})]})}const Re=[{name:"Blue",bg:"from-blue-50 to-blue-100",border:"border-blue-200",dark:"dark:from-blue-900/20 dark:to-blue-800/20 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300"},{name:"Green",bg:"from-green-50 to-green-100",border:"border-green-200",dark:"dark:from-green-900/20 dark:to-green-800/20 dark:border-green-800",text:"text-green-700 dark:text-green-300"},{name:"Yellow",bg:"from-yellow-50 to-yellow-100",border:"border-yellow-200",dark:"dark:from-yellow-900/20 dark:to-yellow-800/20 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300"},{name:"Purple",bg:"from-purple-50 to-purple-100",border:"border-purple-200",dark:"dark:from-purple-900/20 dark:to-purple-800/20 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300"},{name:"Pink",bg:"from-pink-50 to-pink-100",border:"border-pink-200",dark:"dark:from-pink-900/20 dark:to-pink-800/20 dark:border-pink-800",text:"text-pink-700 dark:text-pink-300"},{name:"Indigo",bg:"from-indigo-50 to-indigo-100",border:"border-indigo-200",dark:"dark:from-indigo-900/20 dark:to-indigo-800/20 dark:border-indigo-800",text:"text-indigo-700 dark:text-indigo-300"}];function Ss(){const[t,r]=d.useState(()=>{try{const b=localStorage.getItem("notes");if(b)return JSON.parse(b)}catch(b){console.error("Error loading notes:",b)}return[]}),[a,l]=d.useState(!1),[o,s]=d.useState(null),[i,c]=d.useState(!1),[n,u]=d.useState(null),[x,w]=d.useState(""),[f,P]=d.useState("date"),[S,h]=d.useState("all"),[k,j]=d.useState("grid"),[m,H]=d.useState([]),[B,K]=d.useState(!0),[T,_]=d.useState(""),[X,p]=d.useState(""),[A,V]=d.useState([]),[L,M]=d.useState(""),[C,I]=d.useState(Re[0]),[W,N]=d.useState(null);d.useEffect(()=>{try{localStorage.setItem("notes",JSON.stringify(t)),N(new Date)}catch(b){console.error("Error saving notes:",b),s("Failed to save notes to local storage")}},[t]);const E=d.useMemo(()=>{const b=new Set;return t.forEach(R=>{R.tags&&Array.isArray(R.tags)&&R.tags.forEach(Y=>b.add(Y))}),Array.from(b).sort()},[t]),F=d.useMemo(()=>{let b=[...t];if(x){const R=x.toLowerCase();b=b.filter(Y=>Y.title?.toLowerCase().includes(R)||Y.content?.toLowerCase().includes(R)||Y.tags?.some(ve=>ve.toLowerCase().includes(R)))}return S!=="all"&&(b=b.filter(R=>R.tags&&R.tags.includes(S))),b.sort((R,Y)=>{switch(f){case"title":return(R.title||"").localeCompare(Y.title||"");case"color":return(R.color?.name||"").localeCompare(Y.color?.name||"");case"date":default:return new Date(Y.updatedAt||Y.createdAt)-new Date(R.updatedAt||R.createdAt)}}),b},[t,x,S,f]),se=d.useMemo(()=>{const b=t.length,R={};Re.forEach(ye=>{R[ye.name]=t.filter(Ae=>Ae.color?.name===ye.name).length});const Y=t.filter(ye=>ye.tags&&ye.tags.length>0).length,ve=b-Y,Ie=E.length,Be=b>0?t.reduce((ye,Ae)=>ye+(Ae.tags?.length||0),0)/b:0;return{total:b,byColor:R,withTags:Y,withoutTags:ve,totalTags:Ie,avgTagsPerNote:Be}},[t,E.length]),he=()=>{u(null),_(""),p(""),V([]),M(""),I(Re[0]),c(!0)},O=b=>{u(b),_(b.title||""),p(b.content||""),V(b.tags||[]),M(""),I(b.color||Re[0]),c(!0)},U=()=>{if(!T.trim()&&!X.trim()){s("Note must have at least a title or content");return}try{const b=new Date().toISOString();if(n)r(R=>R.map(Y=>Y.id===n.id?{...Y,title:T.trim(),content:X.trim(),tags:A,color:C,updatedAt:b}:Y));else{const R={id:Date.now().toString(),title:T.trim(),content:X.trim(),tags:A,color:C,createdAt:b,updatedAt:b};r(Y=>[R,...Y])}c(!1),u(null),s(null)}catch(b){console.error("Failed to save note:",b),s(b.message||"Failed to save note")}},de=b=>{if(window.confirm("Are you sure you want to delete this note?"))try{r(R=>R.filter(Y=>Y.id!==b)),H(R=>R.filter(Y=>Y!==b))}catch(R){console.error("Failed to delete note:",R),s(R.message||"Failed to delete note")}},ae=()=>{if(m.length!==0&&window.confirm(`Are you sure you want to delete ${m.length} note(s)?`))try{r(b=>b.filter(R=>!m.includes(R.id))),H([])}catch(b){console.error("Failed to delete notes:",b),s(b.message||"Failed to delete notes")}},Z=()=>{c(!1),u(null),_(""),p(""),V([]),M(""),I(Re[0]),s(null)},y=b=>{H(R=>R.includes(b)?R.filter(Y=>Y!==b):[...R,b])},v=()=>{m.length===F.length?H([]):H(F.map(b=>b.id))},D=()=>{const b=L.trim();b&&!A.includes(b)&&(V(R=>[...R,b]),M(""))},z=b=>{V(R=>R.filter(Y=>Y!==b))},ee=b=>{b.key==="Enter"&&(b.preventDefault(),D())},Q=()=>{const b=JSON.stringify(t,null,2),R=new Blob([b],{type:"application/json"}),Y=URL.createObjectURL(R),ve=document.createElement("a");ve.href=Y,ve.download=`notes-${new Date().toISOString().split("T")[0]}.json`,ve.click(),URL.revokeObjectURL(Y)},ge=b=>b?new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return e.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Notes"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, organize, and manage your notes with tags and colors"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:W?`Saved ${ge(W.toISOString())}`:"Ready"})]}),e.jsxs("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Note"]})]})]}),B&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"Total Notes"}),e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:se.total})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"With Tags"}),e.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:se.withTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-purple-700 dark:text-purple-300",children:"Total Tags"}),e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:se.totalTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-yellow-700 dark:text-yellow-300",children:"Avg Tags"}),e.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:se.avgTagsPerNote.toFixed(1)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300",children:"No Tags"}),e.jsx("svg",{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})]}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:se.withoutTags})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-xl p-4 border border-pink-200 dark:border-pink-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-pink-700 dark:text-pink-300",children:"Filtered"}),e.jsx("svg",{className:"w-4 h-4 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})]}),e.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:F.length})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",value:x,onChange:b=>w(b.target.value),placeholder:"Search notes by title, content, or tags...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("select",{value:S,onChange:b=>h(b.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Tags"}),E.map(b=>e.jsx("option",{value:b,children:b},b))]}),e.jsxs("select",{value:f,onChange:b=>P(b.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"color",children:"Sort by Color"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>j("grid"),className:`p-2 rounded ${k==="grid"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"Grid View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{type:"button",onClick:()=>j("list"),className:`p-2 rounded ${k==="list"?"bg-white dark:bg-gray-600 shadow-sm":""}`,title:"List View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("button",{type:"button",onClick:Q,className:"px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Export Notes",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),e.jsx("button",{type:"button",onClick:()=>K(!B),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:B?"Hide Statistics":"Show Statistics",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),m.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[m.length," note(s) selected"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:ae,className:"px-3 py-1.5 text-sm font-medium text-red-700 dark:text-red-300 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 rounded-lg transition-colors",children:"Delete All"}),e.jsx("button",{type:"button",onClick:()=>H([]),className:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Clear"})]})]})]})]}),o&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:o})})]}),e.jsx("button",{type:"button",onClick:()=>s(null),className:"text-red-600 dark:text-red-300 hover:text-red-800 dark:hover:text-red-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),F.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:x||S!=="all"?"No notes found":"No notes yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:x||S!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first note"}),!x&&S==="all"&&e.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Note"})]}):e.jsxs(e.Fragment,{children:[F.length>0&&e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.length===F.length&&F.length>0,onChange:v,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select all (",F.length,")"]})]}),e.jsx("div",{className:k==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:F.map(b=>{const R=b.color||Re[0];return e.jsxs("div",{className:`relative bg-gradient-to-br ${R.bg} ${R.dark} rounded-xl p-5 border ${R.border} ${R.dark} shadow-md hover:shadow-lg transition-all ${m.includes(b.id)?"ring-2 ring-blue-500":""}`,onClick:()=>O(b),children:[k==="list"&&e.jsx("input",{type:"checkbox",checked:m.includes(b.id),onChange:()=>y(b.id),className:"absolute top-4 left-4 z-10 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:Y=>Y.stopPropagation()}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 line-clamp-2",children:b.title||"Untitled Note"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:ge(b.updatedAt||b.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),O(b)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Edit Note",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),de(b.id)},className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded transition-colors",title:"Delete Note",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 line-clamp-4 whitespace-pre-wrap",children:b.content||"No content"}),b.tags&&b.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:b.tags.map(Y=>e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-white/60 dark:bg-gray-800/60 text-gray-700 dark:text-gray-300 rounded-full",children:Y},Y))}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/30 dark:border-gray-700/30",children:[e.jsx("span",{className:`text-xs font-medium ${R.text}`,children:R.name}),k==="grid"&&e.jsx("input",{type:"checkbox",checked:m.includes(b.id),onChange:()=>y(b.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:Y=>Y.stopPropagation()})]})]},b.id)})}),F.length!==t.length&&e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Showing ",F.length," of ",t.length," notes"]})]}),i&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Z}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Edit Note":"New Note"}),e.jsx("button",{type:"button",onClick:Z,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:T,onChange:b=>_(b.target.value),placeholder:"Enter note title...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content"}),e.jsx("textarea",{value:X,onChange:b=>p(b.target.value),placeholder:"Enter note content...",rows:8,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:A.map(b=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full",children:[b,e.jsx("button",{type:"button",onClick:()=>z(b),className:"hover:text-blue-900 dark:hover:text-blue-100",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},b))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:L,onChange:b=>M(b.target.value),onKeyPress:ee,placeholder:"Add a tag and press Enter...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Add"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Re.map(b=>e.jsx("button",{type:"button",onClick:()=>I(b),className:`p-3 rounded-lg border-2 transition-all ${C.name===b.name?"border-gray-900 dark:border-white ring-2 ring-blue-500":"border-gray-300 dark:border-gray-600"} bg-gradient-to-br ${b.bg} ${b.dark}`,title:b.name,children:e.jsx("div",{className:`w-full h-4 rounded ${b.bg} ${b.dark}`})},b.name))})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:U,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:n?"Update":"Create"}),e.jsx("button",{type:"button",onClick:Z,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})}function Cs(){const r=(()=>{if(typeof window>"u")return"/";const a=window.location.pathname,l=a.split("/").filter(Boolean);if(l.length>0&&l[0]==="trading"||a.startsWith("/trading"))return"/trading";const o=["news","trading","notes","projection","data","api","settings"];return l.length>0&&!o.includes(l[0])&&l[0]!=="index.html"?`/${l[0]}`:"/"})();return e.jsx(ha,{children:e.jsx(na,{basename:r,children:e.jsx(la,{children:e.jsxs(we,{path:"/",element:e.jsx(pa,{}),children:[e.jsx(we,{index:!0,element:e.jsx(ja,{})}),e.jsx(we,{path:"news",element:e.jsx(Pa,{})}),e.jsx(we,{path:"trading",element:e.jsx(Ha,{})}),e.jsx(we,{path:"notes",element:e.jsx(Ss,{})}),e.jsxs(we,{path:"projection",children:[e.jsx(we,{index:!0,element:e.jsx(hs,{})}),e.jsx(we,{path:"fib",element:e.jsx(Ns,{})})]}),e.jsx(we,{path:"data",element:e.jsx(xs,{})}),e.jsx(we,{path:"api",element:e.jsx(bs,{})}),e.jsx(we,{path:"settings",element:e.jsx(ws,{})}),e.jsx(we,{path:"*",element:e.jsx(ia,{to:"/",replace:!0})})]})})})})}const Tr=document.getElementById("root");if(!Tr)throw new Error('Root element not found. Make sure there is a <div id="root"></div> in your HTML.');const Ls=da.createRoot(Tr);Ls.render(e.jsx(d.StrictMode,{children:e.jsx(Cs,{})}));typeof window<"u"&&br(()=>import("./preline-Cj2HLzEz.js").then(t=>t.p),[]).then(()=>{document.readyState==="complete"||document.readyState==="interactive"?window.HSStaticMethods&&typeof window.HSStaticMethods.autoInit=="function"&&window.HSStaticMethods.autoInit():document.addEventListener("DOMContentLoaded",()=>{window.HSStaticMethods&&typeof window.HSStaticMethods.autoInit=="function"&&window.HSStaticMethods.autoInit()})}).catch(()=>{});
